import{b as ye,r as v,x as N,q as V,m as xe,c as p,o as m,a as e,g as d,t as l,u as a,h as g,i as C,w as b,F as $,e as H,n as ce,A as ge,d as be,S as fe,T as j,k as Y,l as _,y as w}from"./app-oxZXhdOW.js";import{S as k}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as O}from"./Modal-SzUZ4wQu.js";import{_ as x}from"./InputError-B7wiYZu4.js";import{r as ve}from"./CogIcon-BQSCeEA1.js";import{r as _e}from"./PlusCircleIcon-BusPPSJG.js";import{s as P}from"./index-h2zUZAih.js";import{s as we}from"./index-gWakqisN.js";import"./index-DrkAZooi.js";import"./index-bSZUspVt.js";import"./index-iPN-rL7A.js";import"./index-DzCLsYWF.js";import"./index-BN6OOifn.js";import"./index-B2wRUQhw.js";const ke={class:"max-w-5xl mx-auto"},he={class:"flex items-center justify-between mb-4"},Ce={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},Se={class:"my-4 ml-4 flex items-center space-x-2"},Pe={key:0,class:"inline-flex items-center px-4 py-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-green-600 text-white text-sm font-bold shadow-md border border-green-500 animate-pulse"},Ve={class:"mb-6 space-y-4"},Te={class:"flex flex-wrap gap-6"},Ue={class:"w-64"},Ae={class:"w-64"},Fe={class:"text-sm"},De={class:"flex items-center justify-between"},Me={class:"text-lg font-semibold text-gray-800 dark:text-gray-100"},Be={class:"text-sm text-gray-500 dark:text-gray-400"},Ee={class:"text-right space-y-1"},Le={class:"text-sm text-gray-500 dark:text-gray-400"},Ne={class:"text-xl font-bold text-gray-800 dark:text-gray-100"},$e={class:"mt-3 w-full bg-gray-300 dark:bg-gray-700 h-2 rounded-full overflow-hidden"},je={class:"mt-4 flex justify-between items-center"},Oe=["onClick"],Re={class:"space-x-2 flex flex-wrap"},qe=["onClick"],ze={key:0,class:"mt-4 text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700 rounded-xl p-4"},Ie={key:0,class:"mb-6"},We={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},He={class:"overflow-x-auto"},Ye={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ge={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},Je={class:"px-6 py-2 text-sm text-gray-800 dark:text-gray-200"},Ke={class:"px-6 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},Qe={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},Xe={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},Ze={class:"bg-yellow-50 dark:bg-yellow-900 font-bold"},et={class:"px-6 py-2 text-yellow-800 dark:text-yellow-200 text-lg"},tt={colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"},st={class:"w-full px-16 py-8"},at={class:"flex justify-end mt-4"},ot=["disabled"],lt={class:"w-full px-8 py-6"},rt={class:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100"},nt={class:"text-red-700 text-lg"},dt={class:"mb-4"},it={class:"flex flex-wrap -mx-2"},ut={class:"w-full md:w-1/2 px-2 mb-4"},mt={class:"w-full md:w-1/2 px-2 mb-4"},pt={key:0,class:"mb-6"},yt={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},xt={class:"overflow-x-auto"},ct={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},gt={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},bt={class:"px-6 py-2 text-sm text-gray-800 dark:text-gray-200"},ft={class:"px-6 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},vt={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},_t={class:"bg-yellow-50 dark:bg-yellow-900 font-bold"},wt={class:"px-6 py-2 text-yellow-800 dark:text-yellow-200 text-lg"},kt={key:1,class:"mb-6"},ht={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},Ct={class:"overflow-x-auto"},St={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Pt={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},Vt={class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition"},Tt={class:"px-6 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},Ut={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},At={class:"bg-yellow-50 dark:bg-yellow-900 font-bold"},Ft={class:"px-6 py-2 text-yellow-800 dark:text-yellow-200 text-lg"},Dt={class:"flex flex-wrap -mx-2"},Mt={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Bt={key:0,class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Et={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Lt={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Nt={class:"flex justify-end mt-4"},$t=["disabled"],jt={key:0,class:"w-full px-8 py-6"},Ot={class:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100"},Rt={class:"flex flex-wrap gap-6 mb-6"},qt={class:"flex-1 min-w-[180px] bg-blue-50 dark:bg-blue-900 rounded-xl p-4 shadow text-center"},zt={class:"text-2xl font-bold text-blue-800 dark:text-blue-100"},It={class:"flex-1 min-w-[180px] bg-green-50 dark:bg-green-900 rounded-xl p-4 shadow text-center"},Wt={class:"text-2xl font-bold text-green-800 dark:text-green-100"},Ht={class:"flex-1 min-w-[180px] bg-yellow-50 dark:bg-yellow-900 rounded-xl p-4 shadow text-center"},Yt={class:"text-2xl font-bold text-yellow-800 dark:text-yellow-100"},Gt={class:"text-red-700 text-lg"},Jt={class:"flex flex-wrap -mx-2"},Kt={class:"w-full md:w-1/2 px-2 mb-4"},Qt={class:"w-full md:w-1/2 px-2 mb-4"},Xt={class:"flex flex-wrap -mx-2"},Zt={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},es={key:0,class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},ts=["max"],ss={key:0,class:"text-red-500 text-xs mt-1"},as={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},os={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},ls={class:"flex justify-end mt-4"},rs=["disabled"],ns={class:"px-6 py-4"},ds={class:"flex justify-end gap-3"},is=["disabled"],Ss={__name:"ShowPayments",props:{student:{type:Object,required:!0},payments:{type:Array,required:!0},semesters:{type:Array,required:!0},activeSemester:{type:Object,required:!0},paymentMethods:Array,paymentTypes:Array},setup(i){var Q,X,Z,ee,te;const u=i,le={pending:"Pending",completed:"Completed",paid_by_college:"Paid by College",canceled:"Canceled"},G=ye().props.errors,M=v(!1),T=v(!1),h=N({payments:[],student_id:u.student.id}),U=v(""),S=v(u.activeSemester.id),J=v(u.payments.filter(n=>{var t;return((t=n.semester)==null?void 0:t.id)===S.value}));V(()=>[S.value,U.value,u.payments],([n,t])=>{console.log("Semester:",n),console.log("Status:",t),J.value=u.payments.filter(A=>{var F;const L=!n||((F=A.semester)==null?void 0:F.id)===n,s=!t||A.status===t;return L&&s})},{immediate:!0});const o=N({student_id:u.student.id,payment_method_id:null,payment_type_id:null,payment_date:new Date().toISOString().slice(0,10),paid_amount:null,total_amount:null,description:null,status:null,reference_number:null}),r=N({payment_method_id:null,payment_type_id:((Q=u.payments[0])==null?void 0:Q.payment_type_id)||null,description:((X=u.payments[0])==null?void 0:X.description)||"",status:((Z=u.payments[0])==null?void 0:Z.status)||"pending",paid_amount:((ee=u.payments[0])==null?void 0:ee.paid_amount)||0,payment_date:new Date().toISOString().slice(0,10),reference_number:((te=u.payments[0])==null?void 0:te.reference_number)||"",_method:"PATCH"}),y=v(null),R=v(!1),q=v(!1),f=N({student_id:u.student.id,paymentCode:u.student.paymentCode||""}),B=()=>{q.value=!1},re=()=>{if(!f.paymentCode.trim()){k.fire({icon:"error",title:"Missing Code",text:"Please enter a valid payment code."});return}if(f.paymentCode.length<5){k.fire({icon:"error",title:"Invalid Code",text:"Payment code must be at least 5 characters long."});return}B(),k.fire({title:"Are you sure?",text:"This will Add the payment code for the student.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Create it",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&f.post(route("students.payment-code",u.student.id),{onSuccess:()=>{k.fire({icon:"success",title:"Created!",text:"Payment code saved successfully."}),B(),u.student.paymentCode=f.paymentCode},onError:t=>{k.fire({icon:"error",title:"Error",text:t.error??"Could not save payment code. Check your input if repeated."})}})})},ne=n=>{y.value=n,r.payment_type_id=n.payment_type_id,r.description=n.description,r.payment_date=new Date().toISOString().slice(0,10),r.paid_amount=n.paid_amount,r.status=n.status,r.reference_number=n.reference_number,R.value=!0},z=()=>{r.reset(),y.value=null,R.value=!1},E=u.student.enrollments.filter(n=>n.status=="pending"),de=()=>{h.reset(),M.value=!1},ie=()=>{h.post(route("payments",u.student.id),{preserveScroll:!0,onSuccess:()=>{M.value=!1,h.reset()}})},I=v(!1),K=()=>{T.value=!1,o.reset()},c=xe(()=>u.paymentTypes.find(n=>n.id==o.payment_type_id&&n.study_mode_id==u.student.studyMode.id));V(()=>o.paid_amount,n=>{n==o.total_amount?o.status="completed":o.status="pending"}),V(()=>r.paid_amount,n=>{n==r.total_amount?r.status="completed":r.status="pending"}),V(()=>o.status,n=>{var t;n=="completed"?o.paid_amount=o.total_amount:o.paid_amount=((t=u.payments[0])==null?void 0:t.paid_amount)||0}),V(()=>r.status,n=>{var t;n=="completed"?(console.log(r.paid_amount),r.paid_amount=y.value.total_amount,console.log(r.paid_amount)):r.paid_amount=((t=u.payments[0])==null?void 0:t.paid_amount)||0}),V(()=>o.payment_type_id,()=>{console.log(c.value),c.value&&c.value.duration=="per-course"?(I.value=!0,o.total_amount=c.value.amount*E.length):(I.value=!1,c.value&&(o.total_amount=c.value.amount))});const W=[{label:"Pending",value:"pending"},{label:"Completed",value:"completed"},{label:"Canceled",value:"failed"}],ue=()=>{o.post(route("payments.store",{student:u.student.id}),{onSuccess:()=>{o.reset(),o.payment_method_id=null,o.payment_type_id=null,o.payment_date=new Date().toISOString().slice(0,10),o.paid_amount=null,o.total_amount=null,o.description=null,o.status=null,o.reference_number=null,k.fire({title:"Success!",text:"Payment has been created successfully.",icon:"success"}),T.value=!1,o.reset()},onError:n=>{k.fire({title:"Error!",text:n.error??"Fill the Payment Form Properly",icon:"error",customClass:{popup:"z-[1100]"}})}})},me=()=>{r.post(route("payments.update",{payment:y.value.id}),{onSuccess:()=>{console.log(r.paid_amount),r.reset(),z(),k.fire("Success!","Payment has been created successfully.","success")},onError:n=>{k.fire({title:"Error!",text:n.error??"Fill the Payment Form Properly",icon:"error",target:document.body,customClass:{popup:"z-[1100]",backdrop:"z-[1099]"}})}})};return(n,t)=>{var A,L;return m(),p($,null,[e("div",ke,[e("div",he,[e("h2",Ce,l(U.value.toUpperCase())+" Payments Of "+l((A=i.semesters.find(s=>s.id==S.value))==null?void 0:A.name)+" "+l(((L=i.semesters.find(s=>s.id==S.value))==null?void 0:L.id)==i.activeSemester.id?"(Current Semester)":""),1),i.student.paymentCode==null?(m(),p("button",{key:0,onClick:t[0]||(t[0]=s=>q.value=!0),class:"inline-flex items-center px-4 py-1 rounded-full bg-gradient-to-r from-blue-500 to-blue-700 text-white text-sm font-bold shadow-md border border-blue-600 hover:from-blue-600 hover:to-blue-800 transition"},[d(a(ve),{class:"w-5 h-5 mr-2"}),t[20]||(t[20]=e("span",null,"Add Payment Code",-1))])):(m(),p("button",{key:1,onClick:t[1]||(t[1]=s=>T.value=!T.value),class:"flex items-center text-green-600 hover:text-green-800"},[d(a(_e),{class:"mx-2 w-6 h-6"}),t[21]||(t[21]=e("span",{class:"font-medium"},"Create Payment",-1))]))]),e("div",Se,[i.student.paymentCode?(m(),p("span",Pe,[t[22]||(t[22]=e("svg",{class:"w-4 h-4 mr-2 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2l4 -4"})],-1)),C(" Payment Code: "+l(i.student.paymentCode),1)])):g("",!0)]),e("div",Ve,[t[25]||(t[25]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100"}," Filters "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Narrow down payments based on status or semester. ")],-1)),e("div",Te,[e("div",Ue,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Status ",-1)),d(a(P),{modelValue:U.value,"onUpdate:modelValue":t[2]||(t[2]=s=>U.value=s),options:W,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full"},null,8,["modelValue"])]),e("div",Ae,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Semester ",-1)),d(a(P),{modelValue:S.value,"onUpdate:modelValue":t[3]||(t[3]=s=>S.value=s),options:i.semesters,optionLabel:"name",optionValue:"id",placeholder:"Select Semester",class:"w-full"},{option:b(s=>[C(l(s.option.name)+" ",1),e("span",Fe,l(s.option.id==i.activeSemester.id?"(Current Semester)":""),1)]),_:1},8,["modelValue","options"])])])]),d(j,{mode:"out-in","enter-active-class":"transition duration-300 ease-out","enter-from-class":"scale-75 opacity-0","enter-to-class":"scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"scale-100 opacity-100","leave-to-class":"scale-75 opacity-0"},{default:b(()=>[(m(),p("div",{class:"grid grid-cols-1 gap-4 mt-6",key:`${U.value}-${S.value}`},[(m(!0),p($,null,H(J.value,(s,F)=>{var se,ae,oe;return m(),p("div",{key:s.id,class:"rounded-2xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-5 shadow-sm transition hover:shadow-md"},[e("div",De,[e("div",null,[e("h3",Me,l(((se=s.payment_type)==null?void 0:se.type)||"Unknown Type"),1),e("p",Be,l(((ae=s.semester)==null?void 0:ae.name)||"No Semester")+" | "+l(new Date(s.payment_date).toLocaleDateString()),1)]),e("div",Ee,[e("p",Le," Total: "+l(s.total_amount)+" ETB ",1),e("p",Ne," Paid: "+l(s.paid_amount)+" ETB ",1),e("p",{class:ce([{"text-yellow-500":s.status==="pending","text-green-500":s.status==="completed","text-red-500":s.status==="failed","text-blue-500":s.status==="refunded"},"text-sm font-bold"])},l(le[s.status]),3)])]),e("div",$e,[e("div",{class:"h-full bg-green-500",style:ge({width:s.status=="paid_by_college"?"100%":s.paid_amount/s.total_amount*100+"%"})},null,4)]),e("div",je,[e("button",{onClick:D=>s.showDetails=!s.showDetails,class:"text-sm text-blue-600 hover:underline dark:text-blue-400"},l(s.showDetails?"Hide Details":"Show Details"),9,Oe),e("div",Re,[s.status==="completed"||s.status==="paid_by_college"?(m(),be(a(fe),{key:0,href:n.route("payments.show",{payment:s.id}),class:"px-3 py-1 text-sm font-medium rounded-md bg-indigo-100 text-indigo-700 hover:bg-indigo-200 dark:bg-indigo-800 dark:text-white dark:hover:bg-indigo-700"},{default:b(()=>t[26]||(t[26]=[C(" Receipt ")])),_:2},1032,["href"])):g("",!0),s.status==="pending"?(m(),p("button",{key:1,onClick:D=>ne(s),class:"px-3 py-1 text-sm font-medium rounded-md bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-800 dark:text-white dark:hover:bg-green-700"}," Update Payment ",8,qe)):g("",!0)])]),s.showDetails?(m(),p("div",ze,[e("p",null,[t[27]||(t[27]=e("strong",null,"Method:",-1)),C(" "+l(((oe=s.payment_method)==null?void 0:oe.bank_name)||"N/A"),1)]),e("p",null,[t[28]||(t[28]=e("strong",null,"Reference:",-1)),C(" "+l(s.reference_number||"N/A"),1)]),s.payment_type.type=="Course Fee"?(m(),p("div",Ie,[e("h2",We," Course Fees – "+l(i.activeSemester.year.name)+" Semester "+l(i.activeSemester.level),1),e("div",He,[e("table",Ye,[t[30]||(t[30]=e("thead",{class:"bg-gray-100 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," # "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Course Name "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Amount "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Status ")])],-1)),e("tbody",Ge,[(m(!0),p($,null,H(a(E),(D,pe)=>(m(),p("tr",{key:D.course.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition"},[e("td",Je,l(pe+1),1),e("td",Ke,l(D.course.name),1),e("td",Qe,l(s.payment_type.amount),1),e("td",Xe,l(D.status),1)]))),128)),e("tr",Ze,[t[29]||(t[29]=e("td",{colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"}," Total ",-1)),e("td",et,l(s.payment_type.amount*i.student.enrollments.length),1),e("td",tt,l(s.status),1)])])])])])):g("",!0)])):g("",!0)])}),128))]))]),_:1})]),d(O,{show:M.value,onClose:t[5]||(t[5]=s=>M.value=!1),maxWidth:"6xl",class:"p-24 h-full"},{default:b(()=>[e("div",st,[t[31]||(t[31]=e("h1",{class:"text-lg mb-5"}," Pick Payments You Would like To Assign To This Section ",-1)),d(a(we),{id:"cousesList",modelValue:a(h).payments,"onUpdate:modelValue":t[4]||(t[4]=s=>a(h).payments=s),options:i.payments,optionLabel:"name","option-value":"id",appendTo:"self",filter:"",checkmark:"",multiple:"","list-style":"max-height: 500px",placeholder:"Select Payments",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"]),d(x,{message:a(h).errors.payments,class:"mt-2 text-sm text-red-500"},null,8,["message"]),e("div",at,[e("button",{onClick:ie,disabled:a(h).processing,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},l(a(h).processing?"Assigning...":"Assign"),9,ot),e("button",{onClick:de,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])])]),_:1},8,["show"]),d(O,{show:T.value,onClose:K,maxWidth:"6xl",class:"p-6"},{default:b(()=>[e("div",lt,[e("h1",rt," Create Payment for – "+l(i.activeSemester.name),1),e("span",nt,l(a(G).error),1),e("form",{onSubmit:Y(ue,["prevent"])},[e("div",dt,[t[32]||(t[32]=e("label",{for:"narration",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Description ",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>a(o).description=s),placeholder:"Payment Description (eg Registration Fee, Tuition Fee...)",id:"narration",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(o).description]]),d(x,{message:a(o).errors.narration,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",it,[e("div",ut,[t[33]||(t[33]=e("label",{for:"payment_method_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Method ",-1)),d(a(P),{modelValue:a(o).payment_method_id,"onUpdate:modelValue":t[7]||(t[7]=s=>a(o).payment_method_id=s),options:i.paymentMethods,optionLabel:"bank_name",optionValue:"id",appendTo:"self",placeholder:"Select Payment Method",class:"w-full"},null,8,["modelValue","options"]),d(x,{message:a(o).errors.payment_method_id,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",mt,[t[34]||(t[34]=e("label",{for:"payment_type_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Type ",-1)),d(a(P),{modelValue:a(o).payment_type_id,"onUpdate:modelValue":t[8]||(t[8]=s=>a(o).payment_type_id=s),options:i.paymentTypes,optionLabel:"type",optionValue:"id",appendTo:"self",placeholder:"Select Type",class:"w-full"},null,8,["modelValue","options"]),d(x,{message:a(o).errors.payment_type_id,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),d(j,{"enter-active-class":"transition ease-out duration-500","enter-from-class":"opacity-0 -translate-y-6","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-6"},{default:b(()=>[I.value?(m(),p("div",pt,[e("h2",yt," Courses with Unpaid Fees – "+l(i.activeSemester.year.name)+" Semester "+l(i.activeSemester.level),1),e("div",xt,[e("table",ct,[t[36]||(t[36]=e("thead",{class:"bg-gray-100 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," # "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Course Name "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Amount ")])],-1)),e("tbody",gt,[(m(!0),p($,null,H(a(E),(s,F)=>(m(),p("tr",{key:s.course.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition"},[e("td",bt,l(F+1),1),e("td",ft,l(s.course.name),1),e("td",vt,l(c.value.amount),1)]))),128)),e("tr",_t,[t[35]||(t[35]=e("td",{colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"}," Total ",-1)),e("td",wt,l(c.value.amount*a(E).length),1)])])])])])):c.value&&c.value.duration!="per-course"?(m(),p("div",kt,[e("h2",ht," Courses with Unpaid Fees – "+l(i.activeSemester.year.name)+" Semester "+l(i.activeSemester.level),1),e("div",Ct,[e("table",St,[t[39]||(t[39]=e("thead",{class:"bg-gray-100 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," # "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Description "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Amount ")])],-1)),e("tbody",Pt,[e("tr",Vt,[t[37]||(t[37]=e("td",{class:"px-6 py-2 text-sm text-gray-800 dark:text-gray-200"}," 1 ",-1)),e("td",Tt,l(c.value.type),1),e("td",Ut,l(c.value.amount),1)]),e("tr",At,[t[38]||(t[38]=e("td",{colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"}," Total ",-1)),e("td",Ft,l(c.value.amount),1)])])])])])):g("",!0)]),_:1}),e("div",Dt,[e("div",Mt,[t[40]||(t[40]=e("label",{for:"status",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Status ",-1)),d(a(P),{modelValue:a(o).status,"onUpdate:modelValue":t[9]||(t[9]=s=>a(o).status=s),options:W,optionLabel:"label",optionValue:"value",appendTo:"self",placeholder:"Select Status",class:"w-full"},null,8,["modelValue"]),d(x,{message:a(o).errors.status,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),d(j,{"enter-active-class":"transition ease-out duration-500","enter-from-class":"opacity-0 -translate-x-6","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-6"},{default:b(()=>[a(o).status!=="completed"?(m(),p("div",Bt,[t[41]||(t[41]=e("label",{for:"paid_amount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Paid Amount ",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=s=>a(o).paid_amount=s),id:"paid_amount",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(o).paid_amount]]),d(x,{message:a(o).errors.paid_amount,class:"mt-2 text-sm text-red-500"},null,8,["message"])])):g("",!0)]),_:1}),e("div",Et,[t[42]||(t[42]=e("label",{for:"payment_date",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Date ",-1)),_(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=s=>a(o).payment_date=s),id:"payment_date",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(o).payment_date]]),d(x,{message:a(o).errors.payment_date,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",Lt,[t[43]||(t[43]=e("label",{for:"reference_number",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Reference Number (Optional) ",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=s=>a(o).reference_number=s),id:"reference_number",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(o).reference_number]]),d(x,{message:a(o).errors.reference_number,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),e("div",Nt,[e("button",{type:"submit",disabled:a(o).processing,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},l(a(o).processing?"Creating...":"Create Payment"),9,$t),e("button",{type:"button",onClick:K,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])],32)])]),_:1},8,["show"]),d(O,{show:R.value,onClose:z,maxWidth:"6xl",class:"p-6"},{default:b(()=>[y.value?(m(),p("div",jt,[e("h1",Ot," Update "+l(y.value.payment_type.type)+" Payment for – "+l(i.activeSemester.name),1),e("div",Rt,[e("div",qt,[t[45]||(t[45]=e("div",{class:"text-xs uppercase text-blue-700 dark:text-blue-200 font-semibold mb-1"},"Total Payment",-1)),e("div",zt,[C(l(y.value.total_amount)+" ",1),t[44]||(t[44]=e("span",{class:"text-base font-normal"},"ETB",-1))])]),e("div",It,[t[47]||(t[47]=e("div",{class:"text-xs uppercase text-green-700 dark:text-green-200 font-semibold mb-1"},"Already Paid",-1)),e("div",Wt,[C(l(y.value.paid_amount)+" ",1),t[46]||(t[46]=e("span",{class:"text-base font-normal"},"ETB",-1))])]),e("div",Ht,[t[49]||(t[49]=e("div",{class:"text-xs uppercase text-yellow-700 dark:text-yellow-200 font-semibold mb-1"},"Remaining Amount",-1)),e("div",Yt,[C(l(y.value.total_amount-y.value.paid_amount)+" ",1),t[48]||(t[48]=e("span",{class:"text-base font-normal"},"ETB",-1))])])]),e("span",Gt,l(a(G).error),1),e("form",{onSubmit:Y(me,["prevent"])},[e("div",Jt,[e("div",Kt,[t[50]||(t[50]=e("label",{for:"payment_method_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Method ",-1)),d(a(P),{modelValue:a(r).payment_method_id,"onUpdate:modelValue":t[13]||(t[13]=s=>a(r).payment_method_id=s),options:i.paymentMethods,optionLabel:"bank_name",optionValue:"id",appendTo:"self",placeholder:"Select Payment Method",class:"w-full"},null,8,["modelValue","options"]),d(x,{message:a(r).errors.payment_method_id,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",Qt,[t[51]||(t[51]=e("label",{for:"description",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Description ",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=s=>a(r).description=s),placeholder:"Payment Description (eg Registration Fee, Tuition Fee...)",id:"description",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(r).description]]),d(x,{message:a(r).errors.description,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),e("div",Xt,[e("div",Zt,[t[52]||(t[52]=e("label",{for:"status",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Status ",-1)),d(a(P),{modelValue:y.value.status,"onUpdate:modelValue":t[15]||(t[15]=s=>y.value.status=s),options:W,optionLabel:"label",optionValue:"value",appendTo:"self",placeholder:"Select Status",class:"w-full"},null,8,["modelValue"]),d(x,{message:a(r).errors.status,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),d(j,{"enter-active-class":"transition ease-out duration-500","enter-from-class":"opacity-0 -translate-x-6","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-6"},{default:b(()=>[a(r).status!=="completed"?(m(),p("div",es,[t[53]||(t[53]=e("label",{for:"paid_amount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Paid Amount ",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>a(r).paid_amount=s),max:y.value.total_amount,min:"0",id:"paid_amount",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,8,ts),[[w,a(r).paid_amount,void 0,{number:!0}]]),d(x,{message:a(r).errors.paid_amount,class:"mt-2 text-sm text-red-500"},null,8,["message"]),a(r).paid_amount>y.value.total_amount?(m(),p("div",ss," Paid amount cannot exceed the remaining amount ("+l(y.value.total_amount-y.value.paid_amount)+" ETB). ",1)):g("",!0)])):g("",!0)]),_:1}),e("div",as,[t[54]||(t[54]=e("label",{for:"payment_date",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Date ",-1)),_(e("input",{type:"date","onUpdate:modelValue":t[17]||(t[17]=s=>a(r).payment_date=s),id:"payment_date",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(r).payment_date]]),d(x,{message:a(r).errors.payment_date,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",os,[t[55]||(t[55]=e("label",{for:"reference_number",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Reference Number ",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=s=>a(r).reference_number=s),id:"reference_number",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(r).reference_number]]),d(x,{message:a(r).errors.reference_number,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),e("div",ls,[e("button",{type:"submit",disabled:a(r).processing,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},l(a(o).processing?"Saving...":"Save Payment"),9,rs),e("button",{type:"button",onClick:z,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])],32)])):g("",!0)]),_:1},8,["show"]),d(O,{show:q.value,onClose:B,maxWidth:"sm"},{default:b(()=>[e("div",ns,[t[58]||(t[58]=e("h2",{class:"text-lg font-bold mb-4"},"Add / Update Payment Code",-1)),e("form",{onSubmit:Y(re,["prevent"]),class:"space-y-4"},[e("div",null,[t[56]||(t[56]=e("label",{for:"paymentCode",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Payment Code ",-1)),_(e("input",{id:"paymentCode",type:"text","onUpdate:modelValue":t[19]||(t[19]=s=>a(f).paymentCode=s),maxlength:"20",placeholder:"e.g. ABC12345",class:"mt-1 block w-full rounded-md border-gray-300 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200 shadow-sm focus:ring focus:ring-blue-300"},null,512),[[w,a(f).paymentCode]]),t[57]||(t[57]=e("p",{class:"text-xs text-gray-500 mt-1"}," This code should be unique to the student. ",-1)),d(x,{message:a(f).errors.paymentCode,class:"mt-2"},null,8,["message"])]),e("div",ds,[e("button",{type:"button",onClick:B,class:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200"}," Cancel "),e("button",{type:"submit",disabled:a(f).processing,class:"px-4 py-2 rounded bg-green-600 hover:bg-green-700 text-white"},l(a(f).processing?"Saving...":"Save"),9,is)])],32)])]),_:1},8,["show"])],64)}}};export{Ss as default};
