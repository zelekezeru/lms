import{b as ye,r as v,x as N,q as D,m as xe,c as m,o as i,g as n,a as e,t as l,u as a,h as g,i as C,w as b,F as $,e as H,n as ce,y as ge,d as be,S as fe,T as j,k as Y,l as k,z as w}from"./app-B_9gkXmO.js";import{S as _}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as O}from"./Modal-IonluXN_.js";import{_ as x}from"./InputError-Btg_5l_f.js";import{r as ve}from"./CogIcon-DZOv0zG-.js";import{r as ke}from"./PlusCircleIcon-Caz09zCh.js";import{s as P}from"./index-BOfLx7VB.js";import{s as we}from"./index-B8Mbf6wC.js";import"./index-DI5uil2U.js";import"./index-s5QEAozd.js";import"./index-CvqeDn2I.js";import"./index-DVTwuAHC.js";import"./index-CLyBsNy6.js";import"./index-C_6FzjrZ.js";const _e={key:0,class:"max-w-5xl mx-auto"},he={class:"flex items-center justify-between mb-4"},Ce={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},Se={class:"my-4 ml-4 flex items-center space-x-2"},Pe={key:0,class:"inline-flex items-center px-4 py-3 py-1 rounded-full bg-gradient-to-r from-green-400 to-green-600 text-white text-sm font-bold shadow-md border border-green-500 animate-pulse"},Ve={class:"mb-6 space-y-4"},Te={class:"flex flex-wrap gap-6"},Ue={class:"w-64"},Ae={class:"w-64"},Fe={class:"text-sm"},De={class:"flex items-center justify-between"},Me={class:"text-lg font-semibold text-gray-800 dark:text-gray-100"},Be={class:"text-sm text-gray-500 dark:text-gray-400"},Ee={class:"text-right space-y-1"},Le={class:"text-sm text-gray-500 dark:text-gray-400"},Ne={class:"text-xl font-bold text-gray-800 dark:text-gray-100"},$e={class:"mt-3 w-full bg-gray-300 dark:bg-gray-700 h-2 rounded-full overflow-hidden"},je={class:"mt-4 flex justify-between items-center"},Oe=["onClick"],Re={class:"space-x-2 flex flex-wrap"},qe=["onClick"],ze={key:0,class:"mt-4 text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700 rounded-xl p-4"},Ie={key:0,class:"mb-6"},We={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},He={class:"overflow-x-auto"},Ye={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ge={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},Je={class:"px-6 py-2 text-sm text-gray-800 dark:text-gray-200"},Ke={class:"px-6 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},Qe={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},Xe={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},Ze={class:"bg-yellow-50 dark:bg-yellow-900 font-bold"},et={class:"px-6 py-2 text-yellow-800 dark:text-yellow-200 text-lg"},tt={colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"},st={key:1},at={class:"w-full px-16 py-8"},ot={class:"flex justify-end mt-4"},lt=["disabled"],rt={class:"w-full px-8 py-6"},nt={class:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100"},dt={class:"text-red-700 text-lg"},it={class:"mb-4"},ut={class:"flex flex-wrap -mx-2"},mt={class:"w-full md:w-1/2 px-2 mb-4"},pt={class:"w-full md:w-1/2 px-2 mb-4"},yt={key:0,class:"mb-6"},xt={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},ct={class:"overflow-x-auto"},gt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},bt={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},ft={class:"px-6 py-2 text-sm text-gray-800 dark:text-gray-200"},vt={class:"px-6 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},kt={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},wt={class:"bg-yellow-50 dark:bg-yellow-900 font-bold"},_t={class:"px-6 py-2 text-yellow-800 dark:text-yellow-200 text-lg"},ht={key:1,class:"mb-6"},Ct={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},St={class:"overflow-x-auto"},Pt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Vt={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},Tt={class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition"},Ut={class:"px-6 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},At={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},Ft={class:"bg-yellow-50 dark:bg-yellow-900 font-bold"},Dt={class:"px-6 py-2 text-yellow-800 dark:text-yellow-200 text-lg"},Mt={class:"flex flex-wrap -mx-2"},Bt={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Et={key:0,class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Lt={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Nt={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},$t={class:"flex justify-end mt-4"},jt=["disabled"],Ot={key:0,class:"w-full px-8 py-6"},Rt={class:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100"},qt={class:"flex flex-wrap gap-6 mb-6"},zt={class:"flex-1 min-w-[180px] bg-blue-50 dark:bg-blue-900 rounded-xl p-4 shadow text-center"},It={class:"text-2xl font-bold text-blue-800 dark:text-blue-100"},Wt={class:"flex-1 min-w-[180px] bg-green-50 dark:bg-green-900 rounded-xl p-4 shadow text-center"},Ht={class:"text-2xl font-bold text-green-800 dark:text-green-100"},Yt={class:"flex-1 min-w-[180px] bg-yellow-50 dark:bg-yellow-900 rounded-xl p-4 shadow text-center"},Gt={class:"text-2xl font-bold text-yellow-800 dark:text-yellow-100"},Jt={class:"text-red-700 text-lg"},Kt={class:"flex flex-wrap -mx-2"},Qt={class:"w-full md:w-1/2 px-2 mb-4"},Xt={class:"w-full md:w-1/2 px-2 mb-4"},Zt={class:"flex flex-wrap -mx-2"},es={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},ts={key:0,class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},ss=["max"],as={key:0,class:"text-red-500 text-xs mt-1"},os={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},ls={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},rs={class:"flex justify-end mt-4"},ns=["disabled"],ds={class:"px-6 py-4"},is={class:"flex justify-end gap-3"},us=["disabled"],Ps={__name:"ShowPayments",props:{student:{type:Object,required:!0},payments:{type:Array,required:!0},semesters:{type:Array,required:!0},activeSemester:{type:Object,required:!0},paymentMethods:Array,paymentTypes:Array},setup(u){var Q,X,Z,ee,te;const p=u,le={pending:"Pending",completed:"Completed",paid_by_college:"Paid by College",canceled:"Canceled"},G=ye().props.errors,M=v(!1),V=v(!1),h=N({payments:[],student_id:p.student.id}),T=v(""),S=v(p.activeSemester.id),J=v(p.payments.filter(d=>{var t;return((t=d.semester)==null?void 0:t.id)===S.value}));D(()=>[S.value,T.value,p.payments],([d,t])=>{console.log("Semester:",d),console.log("Status:",t),J.value=p.payments.filter(U=>{var A;const L=!d||((A=U.semester)==null?void 0:A.id)===d,s=!t||U.status===t;return L&&s})},{immediate:!0});const o=N({student_id:p.student.id,payment_method_id:null,payment_type_id:null,payment_date:new Date().toISOString().slice(0,10),paid_amount:null,total_amount:null,description:null,status:null,reference_number:null}),r=N({payment_method_id:null,payment_type_id:((Q=p.payments[0])==null?void 0:Q.payment_type_id)||null,description:((X=p.payments[0])==null?void 0:X.description)||"",status:((Z=p.payments[0])==null?void 0:Z.status)||"pending",paid_amount:((ee=p.payments[0])==null?void 0:ee.paid_amount)||0,payment_date:new Date().toISOString().slice(0,10),reference_number:((te=p.payments[0])==null?void 0:te.reference_number)||"",_method:"PATCH"}),y=v(null),R=v(!1),q=v(!1),f=N({student_id:p.student.id,paymentCode:p.student.paymentCode||""}),B=()=>{q.value=!1},re=()=>{if(!f.paymentCode.trim()){_.fire({icon:"error",title:"Missing Code",text:"Please enter a valid payment code."});return}if(f.paymentCode.length<5){_.fire({icon:"error",title:"Invalid Code",text:"Payment code must be at least 5 characters long."});return}B(),_.fire({title:"Are you sure?",text:"This will Add the payment code for the student.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Create it",cancelButtonText:"Cancel"}).then(d=>{d.isConfirmed&&f.post(route("students.payment-code",p.student.id),{onSuccess:()=>{_.fire({icon:"success",title:"Created!",text:"Payment code saved successfully."}),B(),p.student.paymentCode=f.paymentCode},onError:t=>{_.fire({icon:"error",title:"Error",text:t.error??"Could not save payment code. Check your input if repeated."})}})})},ne=d=>{y.value=d,r.payment_type_id=d.payment_type_id,r.description=d.description,r.payment_date=new Date().toISOString().slice(0,10),r.paid_amount=d.paid_amount,r.status=d.status,r.reference_number=d.reference_number,R.value=!0},z=()=>{r.reset(),y.value=null,R.value=!1},E=p.student.enrollments.filter(d=>d.status=="pending"),de=()=>{h.reset(),M.value=!1},ie=()=>{h.post(route("payments",p.student.id),{preserveScroll:!0,onSuccess:()=>{M.value=!1,h.reset()}})},I=v(!1),K=()=>{V.value=!1,o.reset()},c=xe(()=>p.paymentTypes.find(d=>d.id==o.payment_type_id&&d.study_mode_id==p.student.studyMode.id));D(()=>o.paid_amount,d=>{d==o.total_amount?o.status="completed":o.status="pending"}),D(()=>r.paid_amount,d=>{d==r.total_amount?r.status="completed":r.status="pending"}),D(()=>o.status,d=>{var t;d=="completed"?o.paid_amount=o.total_amount:o.paid_amount=((t=p.payments[0])==null?void 0:t.paid_amount)||0}),D(()=>o.payment_type_id,()=>{c.value&&c.value.duration=="per-course"?(I.value=!0,o.total_amount=c.value.amount*E.length):(I.value=!1,c.value&&(o.total_amount=c.value.amount))});const W=[{label:"Pending",value:"pending"},{label:"Completed",value:"completed"},{label:"Canceled",value:"failed"}],ue=()=>{o.post(route("payments.store",{student:p.student.id}),{onSuccess:()=>{o.reset(),o.payment_method_id=null,o.payment_type_id=null,o.payment_date=new Date().toISOString().slice(0,10),o.paid_amount=null,o.total_amount=null,o.description=null,o.status=null,o.reference_number=null,_.fire({title:"Success!",text:"Payment has been created successfully.",icon:"success"}),V.value=!1,o.reset()},onError:d=>{_.fire({title:"Error!",text:d.error??"Fill the Payment Form Properly",icon:"error",customClass:{popup:"z-[1100]"}})}})},me=()=>{r.post(route("payments.update",{payment:y.value.id}),{onSuccess:()=>{console.log(r.paid_amount),r.reset(),z(),_.fire("Success!","Payment has been created successfully.","success")},onError:d=>{_.fire({title:"Error!",text:d.error??"Fill the Payment Form Properly",icon:"error",target:document.body,customClass:{popup:"z-[1100]",backdrop:"z-[1099]"}})}})};return(d,t)=>{var U,L;return i(),m($,null,[d.userCanAny(["create-payments","update-payments"])?(i(),m("div",_e,[e("div",he,[e("h2",Ce,l(T.value.toUpperCase())+" Payments Of "+l((U=u.semesters.find(s=>s.id==S.value))==null?void 0:U.name)+" "+l(((L=u.semesters.find(s=>s.id==S.value))==null?void 0:L.id)==u.activeSemester.id?"(Current Semester)":""),1),u.student.paymentCode==null?(i(),m("button",{key:0,onClick:t[0]||(t[0]=s=>q.value=!0),class:"inline-flex items-center px-4 py-1 rounded-full bg-gradient-to-r from-blue-500 to-blue-700 text-white text-sm font-bold shadow-md border border-blue-600 hover:from-blue-600 hover:to-blue-800 transition"},[n(a(ve),{class:"w-5 h-5 mr-2"}),t[20]||(t[20]=e("span",null,"Add Payment Code",-1))])):(i(),m("button",{key:1,onClick:t[1]||(t[1]=s=>V.value=!V.value),class:"flex items-center text-green-600 hover:text-green-800"},[n(a(ke),{class:"mx-2 w-6 h-6"}),t[21]||(t[21]=e("span",{class:"font-medium"},"Create Payment",-1))]))]),e("div",Se,[u.student.paymentCode?(i(),m("span",Pe,[t[22]||(t[22]=e("svg",{class:"w-4 h-4 mr-2 text-white",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2l4 -4"})],-1)),C(" Payment Code: "+l(u.student.paymentCode),1)])):g("",!0)]),e("div",Ve,[t[25]||(t[25]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100"}," Filters "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Narrow down payments based on status or semester. ")],-1)),e("div",Te,[e("div",Ue,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Status ",-1)),n(a(P),{modelValue:T.value,"onUpdate:modelValue":t[2]||(t[2]=s=>T.value=s),options:W,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full"},null,8,["modelValue"])]),e("div",Ae,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Semester ",-1)),n(a(P),{modelValue:S.value,"onUpdate:modelValue":t[3]||(t[3]=s=>S.value=s),options:u.semesters,optionLabel:"name",optionValue:"id",placeholder:"Select Semester",class:"w-full"},{option:b(s=>[C(l(s.option.name)+" ",1),e("span",Fe,l(s.option.id==u.activeSemester.id?"(Current Semester)":""),1)]),_:1},8,["modelValue","options"])])])]),n(j,{mode:"out-in","enter-active-class":"transition duration-300 ease-out","enter-from-class":"scale-75 opacity-0","enter-to-class":"scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"scale-100 opacity-100","leave-to-class":"scale-75 opacity-0"},{default:b(()=>[(i(),m("div",{class:"grid grid-cols-1 gap-4 mt-6",key:`${T.value}-${S.value}`},[(i(!0),m($,null,H(J.value,(s,A)=>{var se,ae,oe;return i(),m("div",{key:s.id,class:"rounded-2xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 p-5 shadow-sm transition hover:shadow-md"},[e("div",De,[e("div",null,[e("h3",Me,l(((se=s.payment_type)==null?void 0:se.type)||"Unknown Type"),1),e("p",Be,l(((ae=s.semester)==null?void 0:ae.name)||"No Semester")+" | "+l(new Date(s.payment_date).toLocaleDateString()),1)]),e("div",Ee,[e("p",Le," Total: "+l(s.total_amount)+" ETB ",1),e("p",Ne," Paid: "+l(s.paid_amount)+" ETB ",1),e("p",{class:ce([{"text-yellow-500":s.status==="pending","text-green-500":s.status==="completed","text-red-500":s.status==="failed","text-blue-500":s.status==="refunded"},"text-sm font-bold"])},l(le[s.status]),3)])]),e("div",$e,[e("div",{class:"h-full bg-green-500",style:ge({width:s.status=="paid_by_college"?"100%":s.paid_amount/s.total_amount*100+"%"})},null,4)]),e("div",je,[e("button",{onClick:F=>s.showDetails=!s.showDetails,class:"text-sm text-blue-600 hover:underline dark:text-blue-400"},l(s.showDetails?"Hide Details":"Show Details"),9,Oe),e("div",Re,[s.status==="completed"||s.status==="paid_by_college"?(i(),be(a(fe),{key:0,href:d.route("payments.show",{payment:s.id}),class:"px-3 py-1 text-sm font-medium rounded-md bg-indigo-100 text-indigo-700 hover:bg-indigo-200 dark:bg-indigo-800 dark:text-white dark:hover:bg-indigo-700"},{default:b(()=>t[26]||(t[26]=[C(" Receipt ")])),_:2},1032,["href"])):g("",!0),s.status==="pending"?(i(),m("button",{key:1,onClick:F=>ne(s),class:"px-3 py-1 text-sm font-medium rounded-md bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-800 dark:text-white dark:hover:bg-green-700"}," Update Payment ",8,qe)):g("",!0)])]),s.showDetails?(i(),m("div",ze,[e("p",null,[t[27]||(t[27]=e("strong",null,"Method:",-1)),C(" "+l(((oe=s.payment_method)==null?void 0:oe.bank_name)||"N/A"),1)]),e("p",null,[t[28]||(t[28]=e("strong",null,"Reference:",-1)),C(" "+l(s.reference_number||"N/A"),1)]),s.payment_type.type=="Course Fee"?(i(),m("div",Ie,[e("h2",We," Course Fees – "+l(u.activeSemester.year.name)+" Semester "+l(u.activeSemester.level),1),e("div",He,[e("table",Ye,[t[30]||(t[30]=e("thead",{class:"bg-gray-100 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," # "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Course Name "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Amount "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Status ")])],-1)),e("tbody",Ge,[(i(!0),m($,null,H(a(E),(F,pe)=>(i(),m("tr",{key:F.course.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition"},[e("td",Je,l(pe+1),1),e("td",Ke,l(F.course.name),1),e("td",Qe,l(s.payment_type.amount),1),e("td",Xe,l(F.status),1)]))),128)),e("tr",Ze,[t[29]||(t[29]=e("td",{colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"}," Total ",-1)),e("td",et,l(s.payment_type.amount*u.student.enrollments.length),1),e("td",tt,l(s.status),1)])])])])])):g("",!0)])):g("",!0)])}),128))]))]),_:1})])):(i(),m("div",st,"Unavalilable!")),n(O,{show:M.value,onClose:t[5]||(t[5]=s=>M.value=!1),maxWidth:"6xl",class:"p-24 h-full"},{default:b(()=>[e("div",at,[t[31]||(t[31]=e("h1",{class:"text-lg mb-5"}," Pick Payments You Would like To Assign To This Section ",-1)),n(a(we),{id:"cousesList",modelValue:a(h).payments,"onUpdate:modelValue":t[4]||(t[4]=s=>a(h).payments=s),options:u.payments,optionLabel:"name","option-value":"id",appendTo:"self",filter:"",checkmark:"",multiple:"","list-style":"max-height: 500px",placeholder:"Select Payments",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"]),n(x,{message:a(h).errors.payments,class:"mt-2 text-sm text-red-500"},null,8,["message"]),e("div",ot,[e("button",{onClick:ie,disabled:a(h).processing,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},l(a(h).processing?"Assigning...":"Assign"),9,lt),e("button",{onClick:de,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])])]),_:1},8,["show"]),n(O,{show:V.value,onClose:K,maxWidth:"6xl",class:"p-6"},{default:b(()=>[e("div",rt,[e("h1",nt," Create Payment for – "+l(u.activeSemester.name),1),e("span",dt,l(a(G).error),1),e("form",{onSubmit:Y(ue,["prevent"])},[e("div",it,[t[32]||(t[32]=e("label",{for:"narration",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Description ",-1)),k(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>a(o).description=s),placeholder:"Payment Description (eg Registration Fee, Tuition Fee...)",id:"narration",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(o).description]]),n(x,{message:a(o).errors.narration,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",ut,[e("div",mt,[t[33]||(t[33]=e("label",{for:"payment_method_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Method ",-1)),n(a(P),{modelValue:a(o).payment_method_id,"onUpdate:modelValue":t[7]||(t[7]=s=>a(o).payment_method_id=s),options:u.paymentMethods,optionLabel:"bank_name",optionValue:"id",appendTo:"self",placeholder:"Select Payment Method",class:"w-full"},null,8,["modelValue","options"]),n(x,{message:a(o).errors.payment_method_id,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",pt,[t[34]||(t[34]=e("label",{for:"payment_type_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Type ",-1)),n(a(P),{modelValue:a(o).payment_type_id,"onUpdate:modelValue":t[8]||(t[8]=s=>a(o).payment_type_id=s),options:u.paymentTypes,optionLabel:"type",optionValue:"id",appendTo:"self",placeholder:"Select Type",class:"w-full"},null,8,["modelValue","options"]),n(x,{message:a(o).errors.payment_type_id,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),n(j,{"enter-active-class":"transition ease-out duration-500","enter-from-class":"opacity-0 -translate-y-6","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-6"},{default:b(()=>[I.value?(i(),m("div",yt,[e("h2",xt," Courses with Unpaid Fees – "+l(u.activeSemester.year.name)+" Semester "+l(u.activeSemester.level),1),e("div",ct,[e("table",gt,[t[36]||(t[36]=e("thead",{class:"bg-gray-100 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," # "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Course Name "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Amount ")])],-1)),e("tbody",bt,[(i(!0),m($,null,H(a(E),(s,A)=>(i(),m("tr",{key:s.course.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition"},[e("td",ft,l(A+1),1),e("td",vt,l(s.course.name),1),e("td",kt,l(c.value.amount),1)]))),128)),e("tr",wt,[t[35]||(t[35]=e("td",{colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"}," Total ",-1)),e("td",_t,l(c.value.amount*a(E).length),1)])])])])])):c.value&&c.value.duration!="per-course"?(i(),m("div",ht,[e("h2",Ct," Courses with Unpaid Fees – "+l(u.activeSemester.year.name)+" Semester "+l(u.activeSemester.level),1),e("div",St,[e("table",Pt,[t[39]||(t[39]=e("thead",{class:"bg-gray-100 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," # "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Description "),e("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Amount ")])],-1)),e("tbody",Vt,[e("tr",Tt,[t[37]||(t[37]=e("td",{class:"px-6 py-2 text-sm text-gray-800 dark:text-gray-200"}," 1 ",-1)),e("td",Ut,l(c.value.type),1),e("td",At,l(c.value.amount),1)]),e("tr",Ft,[t[38]||(t[38]=e("td",{colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"}," Total ",-1)),e("td",Dt,l(c.value.amount),1)])])])])])):g("",!0)]),_:1}),e("div",Mt,[e("div",Bt,[t[40]||(t[40]=e("label",{for:"status",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Status ",-1)),n(a(P),{modelValue:a(o).status,"onUpdate:modelValue":t[9]||(t[9]=s=>a(o).status=s),options:W,optionLabel:"label",optionValue:"value",appendTo:"self",placeholder:"Select Status",class:"w-full"},null,8,["modelValue"]),n(x,{message:a(o).errors.status,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),n(j,{"enter-active-class":"transition ease-out duration-500","enter-from-class":"opacity-0 -translate-x-6","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-6"},{default:b(()=>[a(o).status!=="completed"?(i(),m("div",Et,[t[41]||(t[41]=e("label",{for:"paid_amount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Paid Amount ",-1)),k(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=s=>a(o).paid_amount=s),id:"paid_amount",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(o).paid_amount]]),n(x,{message:a(o).errors.paid_amount,class:"mt-2 text-sm text-red-500"},null,8,["message"])])):g("",!0)]),_:1}),e("div",Lt,[t[42]||(t[42]=e("label",{for:"payment_date",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Date ",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=s=>a(o).payment_date=s),id:"payment_date",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(o).payment_date]]),n(x,{message:a(o).errors.payment_date,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",Nt,[t[43]||(t[43]=e("label",{for:"reference_number",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Reference Number (Optional) ",-1)),k(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=s=>a(o).reference_number=s),id:"reference_number",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(o).reference_number]]),n(x,{message:a(o).errors.reference_number,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),e("div",$t,[e("button",{type:"submit",disabled:a(o).processing,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},l(a(o).processing?"Creating...":"Create Payment"),9,jt),e("button",{type:"button",onClick:K,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])],32)])]),_:1},8,["show"]),n(O,{show:R.value,onClose:z,maxWidth:"6xl",class:"p-6"},{default:b(()=>[y.value?(i(),m("div",Ot,[e("h1",Rt," Update "+l(y.value.payment_type.type)+" Payment for – "+l(u.activeSemester.name),1),e("div",qt,[e("div",zt,[t[45]||(t[45]=e("div",{class:"text-xs uppercase text-blue-700 dark:text-blue-200 font-semibold mb-1"}," Total Payment ",-1)),e("div",It,[C(l(y.value.total_amount)+" ",1),t[44]||(t[44]=e("span",{class:"text-base font-normal"},"ETB",-1))])]),e("div",Wt,[t[47]||(t[47]=e("div",{class:"text-xs uppercase text-green-700 dark:text-green-200 font-semibold mb-1"}," Already Paid ",-1)),e("div",Ht,[C(l(y.value.paid_amount)+" ",1),t[46]||(t[46]=e("span",{class:"text-base font-normal"},"ETB",-1))])]),e("div",Yt,[t[49]||(t[49]=e("div",{class:"text-xs uppercase text-yellow-700 dark:text-yellow-200 font-semibold mb-1"}," Remaining Amount ",-1)),e("div",Gt,[C(l(y.value.total_amount-y.value.paid_amount)+" ",1),t[48]||(t[48]=e("span",{class:"text-base font-normal"},"ETB",-1))])])]),e("span",Jt,l(a(G).error),1),e("form",{onSubmit:Y(me,["prevent"])},[e("div",Kt,[e("div",Qt,[t[50]||(t[50]=e("label",{for:"payment_method_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Method ",-1)),n(a(P),{modelValue:a(r).payment_method_id,"onUpdate:modelValue":t[13]||(t[13]=s=>a(r).payment_method_id=s),options:u.paymentMethods,optionLabel:"bank_name",optionValue:"id",appendTo:"self",placeholder:"Select Payment Method",class:"w-full"},null,8,["modelValue","options"]),n(x,{message:a(r).errors.payment_method_id,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",Xt,[t[51]||(t[51]=e("label",{for:"description",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Description ",-1)),k(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=s=>a(r).description=s),placeholder:"Payment Description (eg Registration Fee, Tuition Fee...)",id:"description",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(r).description]]),n(x,{message:a(r).errors.description,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),e("div",Zt,[e("div",es,[t[52]||(t[52]=e("label",{for:"status",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Status ",-1)),n(a(P),{modelValue:y.value.status,"onUpdate:modelValue":t[15]||(t[15]=s=>y.value.status=s),options:W,optionLabel:"label",optionValue:"value",appendTo:"self",placeholder:"Select Status",class:"w-full"},null,8,["modelValue"]),n(x,{message:a(r).errors.status,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),n(j,{"enter-active-class":"transition ease-out duration-500","enter-from-class":"opacity-0 -translate-x-6","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-6"},{default:b(()=>[a(r).status!=="completed"?(i(),m("div",ts,[t[53]||(t[53]=e("label",{for:"paid_amount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Paid Amount ",-1)),k(e("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>a(r).paid_amount=s),max:y.value.total_amount,min:"0",id:"paid_amount",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,8,ss),[[w,a(r).paid_amount,void 0,{number:!0}]]),n(x,{message:a(r).errors.paid_amount,class:"mt-2 text-sm text-red-500"},null,8,["message"]),a(r).paid_amount>y.value.total_amount?(i(),m("div",as," Paid amount cannot exceed the remaining amount ("+l(y.value.total_amount-y.value.paid_amount)+" ETB). ",1)):g("",!0)])):g("",!0)]),_:1}),e("div",os,[t[54]||(t[54]=e("label",{for:"payment_date",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Date ",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[17]||(t[17]=s=>a(r).payment_date=s),id:"payment_date",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(r).payment_date]]),n(x,{message:a(r).errors.payment_date,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),e("div",ls,[t[55]||(t[55]=e("label",{for:"reference_number",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Reference Number ",-1)),k(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=s=>a(r).reference_number=s),id:"reference_number",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[w,a(r).reference_number]]),n(x,{message:a(r).errors.reference_number,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),e("div",rs,[e("button",{type:"submit",disabled:a(r).processing,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},l(a(o).processing?"Saving...":"Save Payment"),9,ns),e("button",{type:"button",onClick:z,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])],32)])):g("",!0)]),_:1},8,["show"]),n(O,{show:q.value,onClose:B,maxWidth:"sm"},{default:b(()=>[e("div",ds,[t[58]||(t[58]=e("h2",{class:"text-lg font-bold mb-4"},"Add / Update Payment Code",-1)),e("form",{onSubmit:Y(re,["prevent"]),class:"space-y-4"},[e("div",null,[t[56]||(t[56]=e("label",{for:"paymentCode",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Payment Code ",-1)),k(e("input",{id:"paymentCode",type:"text","onUpdate:modelValue":t[19]||(t[19]=s=>a(f).paymentCode=s),maxlength:"20",placeholder:"e.g. ABC12345",class:"mt-1 block w-full rounded-md border-gray-300 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200 shadow-sm focus:ring focus:ring-blue-300"},null,512),[[w,a(f).paymentCode]]),t[57]||(t[57]=e("p",{class:"text-xs text-gray-500 mt-1"}," This code should be unique to the student. ",-1)),n(x,{message:a(f).errors.paymentCode,class:"mt-2"},null,8,["message"])]),e("div",is,[e("button",{type:"button",onClick:B,class:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200"}," Cancel "),e("button",{type:"submit",disabled:a(f).processing,class:"px-4 py-2 rounded bg-green-600 hover:bg-green-700 text-white"},l(a(f).processing?"Saving...":"Save"),9,us)])],32)])]),_:1},8,["show"])],64)}}};export{Ps as default};
