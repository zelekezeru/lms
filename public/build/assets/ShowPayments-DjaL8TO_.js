import{r as C,b as S,x as V,c as l,o as m,a as e,i as n,j as c,u as a,w as M,t as y,l as h,g as d,F as _,e as v,z as f,A as b}from"./app-D6lH-V-k.js";import{S as k}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as U}from"./Modal-DmKwr83V.js";import{_ as i}from"./InputError-CB1-Joai.js";import A from"./List-CmwGv2mg.js";import{r as N}from"./PlusCircleIcon-BujAqfgh.js";import"./TableHeader-qDSgppdw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TableZebraRows-Dqy411Tb.js";import"./Thead-IxSq2OC_.js";import"./EyeIcon-fGVF_nMG.js";import"./PencilSquareIcon-Doitnmb2.js";import"./TrashIcon-DO5Lnvq3.js";const F={class:"flex items-center justify-between mb-4"},j={class:"overflow-x-auto"},D={class:"mt-8 border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},O={key:0,class:"text-center"},$={key:1},B={class:"w-full px-8 py-6"},E={class:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100"},T={class:"text-yellow-700 underline"},q={class:"mb-4"},I=["value"],R={class:"mb-4"},z=["value"],L={class:"mb-4"},W={class:"mb-4"},G={class:"mb-4"},H={class:"mb-4"},J={class:"mb-4"},K={class:"flex justify-end mt-4"},Q=["disabled"],ut={__name:"ShowPayments",props:{student:{type:Object,required:!0},payments:{type:Array,required:!0},paymentMethods:Array,paymentCategories:Array,paymentStatuses:Array},setup(r){const g=r,p=C(!1),w=S(()=>{var u;return(u=g.student)==null?void 0:u.id}),s=V({student_id:w.value,payment_method_id:null,payment_category_id:null,payment_date:new Date().toISOString().slice(0,10),total_amount:null,narration:null,status:null,payment_reference:null}),x=()=>{p.value=!1,s.reset()},P=()=>{s.post(route("payments.store",{student:g.student.id}),{onSuccess:()=>{k.fire("Success!","Payment has been created successfully.","success"),p.value=!1,s.reset()},onError:u=>{k.fire("Error!","Failed to create the payment. Please check the form for errors.","error"),console.log(u)}})};return(u,t)=>(m(),l("div",null,[e("div",F,[t[9]||(t[9]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"Payments",-1)),e("button",{onClick:t[0]||(t[0]=o=>p.value=!0),class:"flex text-green-600 hover:text-green-800"},[n(a(N),{class:"mx-2 w-8 h-8"}),t[8]||(t[8]=c(" Create Payment "))])]),e("div",j,[e("div",D,[!r.payments||!r.payments.length?(m(),l("div",O,t[10]||(t[10]=[e("p",{class:"text-gray-500 dark:text-gray-400"},"No payment information available.",-1)]))):(m(),l("div",$,[n(A,{payments:r.payments},null,8,["payments"])]))])]),n(U,{show:p.value,onClose:x,maxWidth:"md",class:"p-6"},{default:M(()=>[e("div",B,[e("h1",E,[t[11]||(t[11]=c(" Create Payment for - ")),e("span",T,y(r.student.first_name)+" "+y(r.student.middle_name),1)]),e("form",{onSubmit:h(P,["prevent"])},[e("div",q,[t[13]||(t[13]=e("label",{for:"payment_method_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Payment Method",-1)),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>a(s).payment_method_id=o),id:"payment_method_id",class:"form-select"},[t[12]||(t[12]=e("option",{value:null,disabled:""},"Select Payment Method",-1)),(m(!0),l(_,null,v(r.paymentMethods,o=>(m(),l("option",{key:o.id,value:o.id},y(o.bank_name),9,I))),128))],512),[[f,a(s).payment_method_id]]),n(i,{message:a(s).errors.payment_method_id,class:"mt-2"},null,8,["message"])]),e("div",R,[t[15]||(t[15]=e("label",{for:"payment_category_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Payment Category (Optional)",-1)),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>a(s).payment_category_id=o),id:"payment_category_id",class:"form-select"},[t[14]||(t[14]=e("option",{value:null,disabled:""},"Select Category",-1)),(m(!0),l(_,null,v(r.paymentCategories,o=>(m(),l("option",{key:o.id,value:o.id},y(o.name),9,z))),128))],512),[[f,a(s).payment_category_id]]),n(i,{message:a(s).errors.payment_category_id,class:"mt-2"},null,8,["message"])]),e("div",L,[t[16]||(t[16]=e("label",{for:"payment_date",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Payment Date",-1)),d(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=o=>a(s).payment_date=o),id:"payment_date",class:"form-input"},null,512),[[b,a(s).payment_date]]),n(i,{message:a(s).errors.payment_date,class:"mt-2"},null,8,["message"])]),e("div",W,[t[17]||(t[17]=e("label",{for:"total_amount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Total Amount",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>a(s).total_amount=o),id:"total_amount",class:"form-input"},null,512),[[b,a(s).total_amount]]),n(i,{message:a(s).errors.total_amount,class:"mt-2"},null,8,["message"])]),e("div",G,[t[18]||(t[18]=e("label",{for:"narration",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Payment Narration",-1)),d(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>a(s).narration=o),id:"narration",class:"form-input"},null,512),[[b,a(s).narration]]),n(i,{message:a(s).errors.narration,class:"mt-2"},null,8,["message"])]),e("div",H,[t[20]||(t[20]=e("label",{for:"status",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Status",-1)),d(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>a(s).status=o),id:"status",class:"form-select"},t[19]||(t[19]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"failed"},"Failed",-1),e("option",{value:"refunded"},"Refunded",-1)]),512),[[f,a(s).status]]),n(i,{message:a(s).errors.status,class:"mt-2"},null,8,["message"])]),e("div",J,[t[21]||(t[21]=e("label",{for:"payment_reference",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Payment Reference (Optional)",-1)),d(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>a(s).payment_reference=o),id:"payment_reference",class:"form-input"},null,512),[[b,a(s).payment_reference]]),n(i,{message:a(s).errors.payment_reference,class:"mt-2"},null,8,["message"])]),e("div",K,[e("button",{type:"submit",disabled:a(s).processing,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},y(a(s).processing?"Creating...":"Create Payment"),9,Q),e("button",{type:"button",onClick:x,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])],32)])]),_:1},8,["show"])]))}};export{ut as default};
