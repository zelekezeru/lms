import{c as n,o as i,a as t,m as k,r as N,x as B,g as x,h as _,i as g,u as l,t as r,F as v,e as w,w as h,n as f,S as C,W as U}from"./app-BhU5B_f0.js";import{S as A}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as I}from"./Modal-YBWfJMcd.js";import{s as M}from"./index-DskeiN7J.js";import{s as L}from"./index-DO0GRGXG.js";import{r as G}from"./PlusCircleIcon-BQmhlOtm.js";import{r as O}from"./ClockIcon-RaZZcJvN.js";import{r as W}from"./BookmarkIcon-BzvTC5M6.js";import{r as Z}from"./XCircleIcon-6ubtsGpK.js";import{r as z}from"./CheckCircleIcon-DzquW7UQ.js";import"./index-Cdn_3lvK.js";import"./index-PM85C2bD.js";import"./index-D8_9NANw.js";import"./index-C5OntAVo.js";import"./index-CKWira_5.js";import"./index-GXptklSY.js";function E(o,m){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm3 10.5a.75.75 0 0 0 0-1.5H9a.75.75 0 0 0 0 1.5h6Z","clip-rule":"evenodd"})])}const Y={key:0},J={class:"flex items-center justify-between mb-4"},K={class:"space-x-4"},P={class:"mb-8 border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},Q={class:"flex items-center gap-3 text-green-600"},R={class:"text-xl font-semibold dark:text-white text-gray-900"},X={key:0,class:"text-center"},tt={key:1,class:"flex flex-col"},et={class:"mt-10 min-w-[100px] overflow-auto border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},st={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},rt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},at={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},dt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ot={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},lt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},nt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},it={class:"px-4 py-2 text-sm"},xt=["onClick"],ut={class:"border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},yt={class:"flex items-center gap-3 text-green-600"},ct={class:"text-xl font-semibold dark:text-white text-gray-900"},gt={key:0,class:"text-center"},mt={key:1,class:"flex flex-col"},pt={class:"mt-5 min-w-[100px] overflow-auto border-gray-300 dark:border-gray-600 pt-4 pb-4"},ft={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},bt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ht={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},kt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},vt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},_t={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},wt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Ct={class:"px-4 py-2 text-sm"},St=["onClick"],Nt={class:"flex items-center gap-3 mt-8 text-green-600"},At={key:0,class:"text-center"},$t={key:1,class:"flex flex-col"},Vt={class:"mt-8 min-w-[100px] overflow-auto border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},Bt={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},Mt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Gt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Et={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Ft={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Dt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},Tt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Ht={class:"px-4 py-2 text-sm"},jt=["onClick"],qt={class:"flex items-center gap-3 mt-8 mb-6 text-green-600"},Ut={key:2,class:"text-center"},It={key:3,class:"flex flex-col"},Lt={class:"mt-8 min-w-[100px] overflow-auto border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},Ot={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},Wt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Zt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},zt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Yt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Jt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},Kt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Pt={key:1},Qt={class:"px-8 py-6"},Rt={class:"text-lg text-center font-light mb-4"},Xt={class:"font-bold"},te={class:"font-bold underline"},ee={class:"text-red-400"},se={class:"text-red-400"},re={class:"text-sm"},ae={class:"flex justify-end"},de=["disabled"],we={__name:"ShowCourses",props:{student:{type:Object,required:!0},courses:{type:Array,required:!0},studyModes:{type:Array,required:!1,default:()=>[]},activeSemester:{type:Object,required:!0}},setup(o){const m=o,F=k(()=>m.student.enrollments.filter(a=>a.status=="enrolled"||a.status=="completed").map(a=>a.course.id)),D=k(()=>m.courses.filter(a=>!F.value.includes(a.id))),b=N(!1);N(!1);const u=B({course_id:"",section_id:""});B({});const T=k(()=>new Set(m.student.enrollments.filter(a=>a.status=="enrolled").map(a=>a.course.id)));k(()=>m.courses.filter(a=>!T.value.has(a.id)).map(a=>({...a,label:a.name})));const S=N(m.studyModes[0].id||null),$=k(()=>{var s;const a=m.studyModes.find(e=>e.id===S.value);return((s=a==null?void 0:a.sections)==null?void 0:s.filter(e=>(Array.isArray(e.courses)?e.courses:[]).map(y=>y.id).includes(u.course_id)))||[]}),H=()=>{u.reset(),u.clearErrors()},j=()=>{u.post(route("enrollments-student.add",{student:m.student.id}),{onSuccess:()=>{A.fire("Added!","Course added successfully.","success"),b.value=!1,H()}})},q=a=>{u.course_id=a.course.id,b.value=!0},V=a=>{A.fire({title:"Are you sure?",text:"This action will drop the course from the student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, drop it!"}).then(s=>{s.isConfirmed&&U.post(route("enrollments-student.drop",{student:m.student.id}),{enrollment_id:a},{onSuccess:()=>{A.fire("Dropped!","Course dropped successfully.","success")}})})};return(a,s)=>(i(),n(v,null,[a.userCanAny(["create-students"])?(i(),n("div",Y,[t("div",J,[s[7]||(s[7]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Courses ",-1)),t("div",K,[t("button",{onClick:s[0]||(s[0]=e=>b.value=!0),class:"flex items-center text-green-600 hover:text-green-800"},[x(l(G),{class:"w-6 h-6 mr-1"}),s[6]||(s[6]=g(" Add Course "))])])]),t("div",P,[t("div",Q,[x(l(O),{class:"w-6 h-6"}),t("h2",R," Pending Courses For "+r(o.activeSemester.year.name)+" Semester "+r(o.activeSemester.level),1)]),o.student.enrollments.filter(e=>e.status=="pending").length==0?(i(),n("div",X,s[8]||(s[8]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No Pending Courses For This Semester. ",-1)]))):o.student.enrollments.filter(e=>e.status=="pending").length>0?(i(),n("div",tt,[t("div",et,[t("table",st,[s[10]||(s[10]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(v,null,w(o.student.enrollments.filter(e=>e.status=="pending"),(e,d)=>{var y,c;return i(),n("tr",{key:e.id,class:f(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",rt,r(d+1),1),t("td",at,[x(l(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[g(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",dt,r(e.course.code),1),t("td",ot,r(e.course.credit_hours),1),t("td",lt,r(((c=(y=o.student.grades)==null?void 0:y.find(p=>p.course_id===e.course.id))==null?void 0:c.grade_letter)??"Not Graded"),1),t("td",nt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",it,[t("button",{onClick:p=>V(e.id),class:"flex items-center text-red-600 hover:text-red-800"},[x(l(E),{class:"w-4 h-4 mr-1"}),s[9]||(s[9]=g(" Drop "))],8,xt)])],2)}),128))])])])])):_("",!0)]),t("div",ut,[t("div",yt,[x(l(W),{class:"w-6"}),t("h2",ct," Enrolled Courses For "+r(o.activeSemester.year.name)+" Semester "+r(o.activeSemester.level),1)]),o.student.enrollments.filter(e=>e.status=="enrolled").length==0?(i(),n("div",gt,s[11]||(s[11]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No Enrolled Courses For This Semester. ",-1)]))):o.student.enrollments.filter(e=>e.status=="enrolled").length>0?(i(),n("div",mt,[t("div",pt,[t("table",ft,[s[13]||(s[13]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(v,null,w(o.student.enrollments.filter(e=>e.status=="enrolled"),(e,d)=>{var y,c;return i(),n("tr",{key:e.id,class:f(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",bt,r(d+1),1),t("td",ht,[x(l(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[g(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",kt,r(e.course.code),1),t("td",vt,r(e.course.credit_hours),1),t("td",_t,r(((c=(y=o.student.grades)==null?void 0:y.find(p=>p.course_id===e.course.id))==null?void 0:c.grade_letter)??"Not Graded"),1),t("td",wt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",Ct,[t("button",{onClick:p=>V(e.id),class:"flex items-center text-red-600 hover:text-red-800"},[x(l(E),{class:"w-4 h-4 mr-1"}),s[12]||(s[12]=g(" Drop "))],8,St)])],2)}),128))])])])])):_("",!0)]),t("div",Nt,[x(l(Z),{class:"w-6 h-6"}),s[14]||(s[14]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Dropped Courses ",-1))]),o.student.enrollments.filter(e=>e.status=="dropped").length==0?(i(),n("div",At,s[15]||(s[15]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"No Dropped Courses.",-1)]))):o.student.enrollments.filter(e=>e.status=="dropped")?(i(),n("div",$t,[t("div",Vt,[t("table",Bt,[s[17]||(s[17]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(v,null,w(o.student.enrollments.filter(e=>e.status=="dropped"),(e,d)=>{var y,c;return i(),n("tr",{key:e.id,class:f(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",Mt,r(d+1),1),t("td",Gt,[x(l(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[g(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",Et,r(e.course.code),1),t("td",Ft,r(e.course.credit_hours),1),t("td",Dt,r(((c=(y=o.student.grades)==null?void 0:y.find(p=>p.course_id===e.course.id))==null?void 0:c.grade_letter)??"Not Graded"),1),t("td",Tt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",Ht,[t("button",{onClick:p=>q(e),class:"flex items-center text-green-600 hover:text-green-700"},[x(l(G),{class:"w-4 h-4 mr-1"}),s[16]||(s[16]=g(" Add Back "))],8,jt)])],2)}),128))])])])])):_("",!0),t("div",qt,[x(l(z),{class:"w-6 h-6"}),s[18]||(s[18]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Completed Courses ",-1))]),o.student.enrollments.filter(e=>e.status=="completed").length==0?(i(),n("div",Ut,s[19]||(s[19]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No completed Courses. ",-1)]))):o.student.enrollments.filter(e=>e.status=="completed")?(i(),n("div",It,[t("div",Lt,[t("table",Ot,[s[20]||(s[20]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status ")])],-1)),t("tbody",null,[(i(!0),n(v,null,w(o.student.enrollments.filter(e=>e.status=="completed"),(e,d)=>{var y,c;return i(),n("tr",{key:e.id,class:f(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",Wt,r(d+1),1),t("td",Zt,[x(l(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[g(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",zt,r(e.course.code),1),t("td",Yt,r(e.course.credit_hours),1),t("td",Jt,r(((c=(y=o.student.grades)==null?void 0:y.find(p=>p.course_id===e.course.id))==null?void 0:c.grade_letter)??"Not Graded"),1),t("td",Kt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)])],2)}),128))])])])])):_("",!0)])):(i(),n("div",Pt,"Unavalilable!")),x(I,{show:b.value,onClose:s[5]||(s[5]=e=>b.value=!1),"max-width":"4xl"},{default:h(()=>{var e;return[t("div",Qt,[t("h3",Rt,[s[21]||(s[21]=g(" Enroll ")),t("span",Xt,r(o.student.firstName)+" "+r(o.student.lastName),1),s[22]||(s[22]=g(" to ")),t("span",te,r(l(u).course_id?(e=o.courses.find(d=>d.id==l(u).course_id))==null?void 0:e.name:"New Course"),1)]),t("p",ee,r(l(u).errors.section_id),1),t("p",se,r(l(u).errors.course_id),1),s[23]||(s[23]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Course ",-1)),s[24]||(s[24]=t("p",{class:"text-sm text-gray-500 mb-2"}," Choose a course the student hasn’t taken yet. ",-1)),x(l(L),{modelValue:l(u).course_id,"onUpdate:modelValue":s[1]||(s[1]=d=>l(u).course_id=d),options:D.value,checkmark:"",optionLabel:"name","option-value":"id",filter:"",placeholder:"Select Course",class:"w-full mb-4"},null,8,["modelValue","options"]),s[25]||(s[25]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Study Mode ",-1)),s[26]||(s[26]=t("p",{class:"text-sm text-gray-500 mb-2"}," Select how the course will be attended (e.g. regular, weekend). ",-1)),x(l(M),{modelValue:S.value,"onUpdate:modelValue":s[2]||(s[2]=d=>S.value=d),options:m.studyModes,placeholder:"Select Study Mode","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options"]),s[27]||(s[27]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Section ",-1)),s[28]||(s[28]=t("p",{class:"text-sm text-gray-500 mb-2"}," Pick the section where the student will take the given course in the given study mode. ",-1)),x(l(M),{modelValue:l(u).section_id,"onUpdate:modelValue":s[3]||(s[3]=d=>l(u).section_id=d),options:$.value,placeholder:`This course is available in (${$.value.length})`,"empty-message":"no available section!","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},{option:h(d=>[g(r(d.option.name)+" In "+r(d.option.studyMode.name)+" ",1),t("span",re," ("+r(d.option.program.name)+" in "+r(d.option.track.name)+") ",1)]),_:1},8,["modelValue","options","placeholder"]),t("div",ae,[t("button",{onClick:j,disabled:l(u).processing,class:"bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded mr-3"},r(l(u).processing?"Adding...":"Add"),9,de),t("button",{onClick:s[4]||(s[4]=d=>b.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded"}," Cancel ")])])]}),_:1},8,["show"])],64))}};export{we as default};
