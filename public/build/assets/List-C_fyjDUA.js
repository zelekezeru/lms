import{c as i,o as u,a as l,r as Y,x as R,m as h,q as N,g as a,h as x,i as n,u as r,t as g,w as y,F as C,e as A,d as M,S,l as U,v as T,n as Z}from"./app-DUpuGMW7.js";import{a as q,T as z}from"./TableHeader-D7uJNh34.js";import{T as E}from"./TableZebraRows-BrDkeYG9.js";import{_ as w}from"./Thead-D-JAxZkL.js";import{_ as G}from"./Modal-CRP5yG5K.js";import{s as c}from"./index-DJEtajV4.js";import{r as v}from"./XMarkIcon-C1tpYErm.js";import{r as J}from"./EyeIcon-clVge1wQ.js";import{r as K}from"./PencilSquareIcon-CXCsdkoV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DsCgMSR2.js";import"./index-e-ky9dHk.js";import"./index-D20UFSOr.js";import"./index-Dn_IohPg.js";import"./index-CyXN4d0R.js";import"./index-DBAsH9VH.js";function P(m,b){return u(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M3.792 2.938A49.069 49.069 0 0 1 12 2.25c2.797 0 5.54.236 8.209.688a1.857 1.857 0 0 1 1.541 1.836v1.044a3 3 0 0 1-.879 2.121l-6.182 6.182a1.5 1.5 0 0 0-.439 1.061v2.927a3 3 0 0 1-1.658 2.684l-1.757.878A.75.75 0 0 1 9.75 21v-5.818a1.5 1.5 0 0 0-.44-1.06L3.13 7.938a3 3 0 0 1-.879-2.121V4.774c0-.897.64-1.683 1.542-1.836Z","clip-rule":"evenodd"})])}const Q={class:"overflow-x-auto shadow-md sm:rounded-lg mt-3"},W={class:"flex justify-between items-center my-4"},X={key:0,class:"mb-4 bg-gray-100 dark:bg-gray-800 p-4 rounded shadow-sm"},_={class:"flex flex-wrap gap-3 text-sm"},ee={key:0,class:"flex items-center gap-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white px-3 py-1 rounded-full shadow"},te={key:1,class:"flex items-center gap-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white px-3 py-1 rounded-full shadow"},re={key:2,class:"flex items-center gap-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white px-3 py-1 rounded-full shadow"},se={key:3,class:"flex items-center gap-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white px-3 py-1 rounded-full shadow"},le={key:4,class:"flex items-center gap-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white px-3 py-1 rounded-full shadow"},oe={key:5,class:"flex items-center gap-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white px-3 py-1 rounded-full shadow"},ae={class:"px-6 py-4"},ne={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},de={class:"px-6 py-4"},ue={class:"px-6 py-4"},ie={class:"px-6 py-4 flex space-x-6"},me={key:0},pe={key:1},ge={class:"mt-3 flex justify-center space-x-6"},ye={class:"p-6 space-y-6 bg-gradient-to-br from-white via-blue-50 to-blue-100 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 rounded-xl shadow-xl"},fe={class:"text-2xl font-bold text-blue-700 dark:text-blue-300 flex items-center gap-2"},xe={class:"flex flex-wrap gap-4"},be={class:"flex items-center gap-2 text-gray-600 dark:text-gray-300"},ce={class:"flex items-center gap-2 text-gray-600 dark:text-gray-300"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ke={class:"flex justify-end space-x-3 pt-4"},je={__name:"List",props:{students:Object,sortInfo:Object,deleteStudent:Function,search:String,programs:Array,years:Array},setup(m){const b=m,k=Y(!1),p=new URLSearchParams(window.location.search),t=R({payment:p.get("payment")||null,statuses:p.getAll("statuses")||[],year:p.has("year")?Number(p.get("year")):null,program:p.has("program")?Number(p.get("program")):null,track:p.has("track")?Number(p.get("track")):null,study_mode:p.has("study_mode")?Number(p.get("study_mode")):null,section:p.has("section")?Number(p.get("section")):null}),V=h(()=>{const o=b.programs.find(e=>e.id==t.program);return o?o.tracks:[]}),F=h(()=>{const o=b.programs.find(e=>e.id==t.program);return o?o.studyModes:[]}),$=h(()=>{var d;const o=t.track,e=t.study_mode,s=(d=V.value)==null?void 0:d.find(f=>f.id==o);return s?e?s.sections.filter(f=>t.year?f.studyMode.id==e&&f.year.id==t.year:f.studyMode.id==e):s.sections:[]}),B=()=>{t.get(route("students.index"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>k.value=!1})};N(()=>t.program,o=>{o||(t.study_mode=null,t.track=null)}),N(()=>t.track,o=>{o||(t.section=null)});const I=h(()=>t.payment||t.year||t.program||t.track||t.study_mode||t.section),L=o=>{var e;return((e=b.programs.find(s=>s.id==o))==null?void 0:e.name)||"Unknown"},j=o=>{var e;return((e=b.years.find(s=>s.id==o))==null?void 0:e.name)||"Unknown"},D=o=>{var s;const e=b.programs.find(d=>d.id==t.program);return((s=e==null?void 0:e.tracks.find(d=>d.id==o))==null?void 0:s.name)||"Unknown"},H=o=>{var s;const e=b.programs.find(d=>d.id==t.program);return((s=e==null?void 0:e.studyModes.find(d=>d.id==o))==null?void 0:s.name)||"Unknown"},O=o=>{var d;const e=V.value.find(f=>f.id==t.track);return((d=((e==null?void 0:e.sections)||[]).find(f=>f.id==o))==null?void 0:d.name)||"Unknown"};return(o,e)=>(u(),i(C,null,[l("div",Q,[l("div",W,[l("button",{onClick:e[0]||(e[0]=s=>k.value=!0),class:"flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition"},[a(r(P),{class:"w-5 h-5 mr-2"}),e[17]||(e[17]=n(" Filters "))])]),I.value?(u(),i("div",X,[e[24]||(e[24]=l("h2",{class:"font-semibold text-gray-700 dark:text-gray-200 mb-2"}," Active Filters: ",-1)),l("div",_,[r(t).payment?(u(),i("span",ee,[e[18]||(e[18]=n(" Payment: ")),l("strong",null,g(r(t).payment),1),a(r(v),{onClick:e[1]||(e[1]=s=>r(t).payment=null),class:"w-4 h-4 cursor-pointer text-gray-500 hover:text-red-500 transition"})])):x("",!0),r(t).year?(u(),i("span",te,[e[19]||(e[19]=n(" Year: ")),l("strong",null,g(j(r(t).year)),1),a(r(v),{onClick:e[2]||(e[2]=()=>{r(t).year=null,r(t).get(o.route("students.index"),{preserveScroll:!0,preserveState:!0})}),class:"w-4 h-4 cursor-pointer text-gray-500 hover:text-red-500 transition"})])):x("",!0),r(t).program?(u(),i("span",re,[e[20]||(e[20]=n(" Program: ")),l("strong",null,g(L(r(t).program)),1),a(r(v),{onClick:e[3]||(e[3]=()=>{r(t).program=null,r(t).get(o.route("students.index"),{preserveScroll:!0,preserveState:!0})}),class:"w-4 h-4 cursor-pointer text-gray-500 hover:text-red-500 transition"})])):x("",!0),r(t).track?(u(),i("span",se,[e[21]||(e[21]=n(" Track: ")),l("strong",null,g(D(r(t).track)),1),a(r(v),{onClick:e[4]||(e[4]=()=>{r(t).track=null,r(t).get(o.route("students.index"),{preserveScroll:!0,preserveState:!0})}),class:"w-4 h-4 cursor-pointer text-gray-500 hover:text-red-500 transition"})])):x("",!0),r(t).study_mode?(u(),i("span",le,[e[22]||(e[22]=n(" Study Mode: ")),l("strong",null,g(H(r(t).study_mode)),1),a(r(v),{onClick:e[5]||(e[5]=()=>{r(t).study_mode=null,r(t).get(o.route("students.index"),{preserveScroll:!0,preserveState:!0})}),class:"w-4 h-4 cursor-pointer text-gray-500 hover:text-red-500 transition"})])):x("",!0),r(t).section?(u(),i("span",oe,[e[23]||(e[23]=n(" Section: ")),l("strong",null,g(O(r(t).section)),1),a(r(v),{onClick:e[6]||(e[6]=()=>{r(t).section=null,r(t).get(o.route("students.index"),{preserveScroll:!0,preserveState:!0})}),class:"w-4 h-4 cursor-pointer text-gray-500 hover:text-red-500 transition"})])):x("",!0)])])):x("",!0),a(z,null,{default:y(()=>[a(q,null,{default:y(()=>[l("tr",null,[a(w,null,{default:y(()=>e[25]||(e[25]=[n("No.")])),_:1}),a(w,{sortable:!0,"sort-info":m.sortInfo,sortColumn:"first_name"},{default:y(()=>e[26]||(e[26]=[n("Student Name")])),_:1},8,["sort-info"]),a(w,{sortable:!0,"sort-info":m.sortInfo,sortColumn:"id_no"},{default:y(()=>e[27]||(e[27]=[n("ID Number")])),_:1},8,["sort-info"]),a(w,{sortable:!0,"sort-info":m.sortInfo,sortColumn:"mobile_phone"},{default:y(()=>e[28]||(e[28]=[n("Phone")])),_:1},8,["sort-info"]),a(w,null,{default:y(()=>e[29]||(e[29]=[n("Actions")])),_:1})])]),_:1}),l("tbody",null,[(u(!0),i(C,null,A(m.students.data,(s,d)=>(u(),M(E,{key:s.id},{default:y(()=>[l("td",ae,g(d+1+(m.students.meta.current_page-1)*m.students.meta.per_page),1),l("th",ne,[a(r(S),{href:o.route("students.show",{student:s.id})},{default:y(()=>[n(g(s.firstName)+" "+g(s.middleName)+" "+g(s.lastName),1)]),_:2},1032,["href"])]),l("td",de,g(s.idNo),1),l("td",ue,g(s.mobilePhone),1),l("td",ie,[o.userCan("view-students")?(u(),i("div",me,[a(r(S),{href:o.route("students.show",{student:s.id}),class:"text-blue-500 hover:text-blue-700"},{default:y(()=>[a(r(J),{class:"w-5 h-5"})]),_:2},1032,["href"])])):x("",!0),o.userCan("update-students")?(u(),i("div",pe,[a(r(S),{href:o.route("students.edit",{student:s.id}),class:"text-green-500 hover:text-green-700"},{default:y(()=>[a(r(K),{class:"w-5 h-5"})]),_:2},1032,["href"])])):x("",!0)])]),_:2},1024))),128))])]),_:1})]),l("div",ge,[(u(!0),i(C,null,A(m.students.meta.links,s=>(u(),M(r(S),{key:s.label,href:s.url?`${s.url}&search=${m.search}`:"#",class:Z(["p-2 px-4 text-sm font-medium rounded-lg transition-colors",{"text-gray-700 dark:text-gray-400":!0,"cursor-not-allowed opacity-50":!s.url,"!bg-gray-100 !dark:bg-gray-800":s.active}]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))]),a(G,{show:k.value,onClose:e[16]||(e[16]=s=>k.value=!1)},{default:y(()=>[l("div",ye,[l("h2",fe,[a(r(P),{class:"w-6 h-6 text-blue-500 dark:text-blue-300"}),e[30]||(e[30]=n(" Filter Students "))]),l("div",null,[e[31]||(e[31]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"By Payment",-1)),a(r(c),{"append-to":"self",modelValue:r(t).payment,"onUpdate:modelValue":e[7]||(e[7]=s=>r(t).payment=s),options:[{label:"All",value:null},{label:"Uncompleted (Pending)",value:"pending"},{label:"All Completed(both Scholarship and self-sponsor)",value:"paid"},{label:"Only Scholarship Students",value:"is_scholarship"}],"option-label":"label","option-value":"value",placeholder:"Select payment type",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[34]||(e[34]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"By Status",-1)),l("div",xe,[l("label",be,[U(l("input",{type:"checkbox",value:"active","onUpdate:modelValue":e[8]||(e[8]=s=>r(t).statuses=s)},null,512),[[T,r(t).statuses]]),e[32]||(e[32]=n(" Active "))]),l("label",ce,[U(l("input",{type:"checkbox",value:"graduated","onUpdate:modelValue":e[9]||(e[9]=s=>r(t).statuses=s)},null,512),[[T,r(t).statuses]]),e[33]||(e[33]=n(" Graduated "))])])]),l("div",ve,[l("div",null,[e[35]||(e[35]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Year",-1)),a(r(c),{"append-to":"self",modelValue:r(t).year,"onUpdate:modelValue":e[10]||(e[10]=s=>r(t).year=s),options:[{name:"All",value:null},...m.years],"option-label":"name","option-value":"id",placeholder:"Select year",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[e[36]||(e[36]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Program",-1)),a(r(c),{"append-to":"self",modelValue:r(t).program,"onUpdate:modelValue":e[11]||(e[11]=s=>r(t).program=s),options:[{name:"All",value:null},...m.programs],"option-label":"name","option-value":"id",placeholder:"Select program",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[e[37]||(e[37]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Track",-1)),a(r(c),{"append-to":"self",modelValue:r(t).track,"onUpdate:modelValue":e[12]||(e[12]=s=>r(t).track=s),options:[{name:"All",value:null},...V.value],"option-label":"name","option-value":"id",placeholder:"Select track",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[e[38]||(e[38]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"StudyMode",-1)),a(r(c),{"append-to":"self",modelValue:r(t).study_mode,"onUpdate:modelValue":e[13]||(e[13]=s=>r(t).study_mode=s),options:[{name:"All",value:null},...F.value],"option-label":"name","option-value":"id",placeholder:"Select Study Mode",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[e[39]||(e[39]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Section",-1)),a(r(c),{"append-to":"self",modelValue:r(t).section,"onUpdate:modelValue":e[14]||(e[14]=s=>r(t).section=s),options:[{name:"All",value:null},...$.value],"option-label":"name","option-value":"id",placeholder:"Select section",class:"w-full"},null,8,["modelValue","options"])])]),l("div",ke,[l("button",{onClick:e[15]||(e[15]=s=>k.value=!1),class:"px-5 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition font-semibold"}," Cancel "),l("button",{onClick:B,class:"px-5 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-400 text-white font-semibold shadow hover:from-blue-700 hover:to-blue-500 transition"}," Apply Filters ")])])]),_:1},8,["show"])],64))}};export{je as default};
