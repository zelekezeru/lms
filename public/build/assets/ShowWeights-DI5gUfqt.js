import{m,x as w,r as _,c as u,o as p,a as t,h as x,g as d,u as a,t as c,F as b,e as V,w as W,T as C,n as F}from"./app-ls423X1b.js";import{S as f}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as l}from"./TextInput-C3cMdmu-.js";import{r as T}from"./PlusCircleIcon-DRaJbVNf.js";const S={class:"flex items-center justify-between mb-4"},j={key:0},q={class:"overflow-x-auto"},U={class:"mt-8 border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},O={class:"overflow-x-auto"},A={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},B={class:"bg-gray-50 dark:bg-gray-700"},D={class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"},N={class:"w-60 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},P={class:"w-40 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},$={class:"w-60 px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},E={key:0,class:"bg-gray-50 dark:bg-gray-700 border-b border-gray-300 dark:border-gray-600"},L={class:"px-4 py-2"},M={class:"px-3 py-2"},z={class:"px-5 py-2"},G={class:"flex items-center space-x-6"},R={__name:"ShowWeights",props:{section:{type:Object,required:!0},course:{type:Object,required:!0},semester:{type:Object,required:!0},weights:{type:Array,required:!0},instructor:{type:Object,required:!0},redirectTo:{type:String,required:!1}},setup(y){const s=y,h=m(()=>s.weights.reduce((n,e)=>n+(parseFloat(e.point)||0),0)),o=w({name:"",point:"",description:"",course_id:s.course.id,section_id:s.section.id,semester_id:s.semester.id}),i=_(!1),k=()=>{const n=s.weights.reduce((r,g)=>r+parseFloat(g.point||0),0),e=parseFloat(o.point||0);if(n+e>100){f.fire("Error","Total weight cannot exceed 100.","error");return}o.post(route("weights.store",{redirectTo:s.redirectTo??route("assessments.section_course",{course:s.course.id,section:s.section.id}),params:{section:s.section.id,course:s.course.id}}),{onSuccess:()=>{f.fire("Added!","Weight added successfully.","success"),i.value=!1,o.reset()}})},v=m(()=>s.weights.reduce((e,r)=>e+parseFloat(r.point||0),0)>=100);return(n,e)=>(p(),u(b,null,[t("div",S,[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Assessment Weights ",-1)),(!s.section.grades||s.section.grades.filter(r=>r.course_id===s.course.id).length===0)&&!v.value?(p(),u("div",j,[t("button",{onClick:e[0]||(e[0]=r=>i.value=!i.value),class:"flex items-center space-x-6 text-indigo-600 hover:text-indigo-800 transition"},[d(a(T),{class:"w-8 h-8"}),e[8]||(e[8]=t("span",{class:"hidden sm:inline"},"Add Weight",-1))])])):x("",!0)]),t("div",q,[t("div",U,[t("div",O,[t("table",A,[t("thead",null,[t("tr",B,[e[10]||(e[10]=t("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Title ",-1)),t("th",D," Point ( "+c(h.value)+"/ 100%) ",1),e[11]||(e[11]=t("th",{class:"w-80 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Description ",-1))])]),t("tbody",null,[(p(!0),u(b,null,V(y.weights,(r,g)=>(p(),u("tr",{key:r.id,class:F([g%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","border-b border-gray-300 dark:border-gray-600"])},[t("td",N,c(r.name),1),t("td",P,c(r.point),1),t("td",$,c(r.description),1)],2))),128)),d(C,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:W(()=>[i.value?(p(),u("tr",E,[d(l,{modelValue:a(o).course_id,"onUpdate:modelValue":e[1]||(e[1]=r=>a(o).course_id=r),type:"text",value:s.course.id,readonly:"",hidden:""},null,8,["modelValue","value"]),d(l,{modelValue:a(o).section_id,"onUpdate:modelValue":e[2]||(e[2]=r=>a(o).section_id=r),type:"text",value:s.section.id,readonly:"",hidden:""},null,8,["modelValue","value"]),d(l,{modelValue:a(o).semester_id,"onUpdate:modelValue":e[3]||(e[3]=r=>a(o).semester_id=r),type:"text",value:s.semester.id,readonly:"",hidden:""},null,8,["modelValue","value"]),t("td",L,[d(l,{modelValue:a(o).name,"onUpdate:modelValue":e[4]||(e[4]=r=>a(o).name=r),type:"text",placeholder:"Title",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"])]),t("td",M,[d(l,{modelValue:a(o).point,"onUpdate:modelValue":e[5]||(e[5]=r=>a(o).point=r),type:"number",placeholder:"Weight Point",min:"0",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"])]),t("td",z,[t("div",G,[d(l,{modelValue:a(o).description,"onUpdate:modelValue":e[6]||(e[6]=r=>a(o).description=r),type:"text",placeholder:"Description",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"]),t("button",{class:"px-4 py-1 h-9 bg-green-600 text-white rounded-md shadow-md hover:bg-green-700 transition-all duration-200 flex items-center gap-2",onClick:k}," Save "),t("button",{class:"px-4 py-1 h-9 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 rounded-md shadow-md hover:from-gray-400 hover:to-gray-500 transition-all duration-200 ml-2 flex items-center gap-2",onClick:e[7]||(e[7]=r=>i.value=!1),type:"button"},e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),t("span",null,"Cancel",-1)]))])])])):x("",!0)]),_:1})])])])])])],64))}};export{R as default};
