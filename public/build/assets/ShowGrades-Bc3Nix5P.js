import{r as N,d as x,x as G,c as i,o as n,a as t,t as o,F as _,f as m,n as f}from"./app-Cuthcimd.js";import{S as h}from"./sweetalert2.esm.all-89IKscqO.js";const F={class:"overflow-x-auto px-4 py-6"},q={key:0},L={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},A={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold text-gray-800 dark:text-gray-100"},B={class:"px-4 py-2"},O={class:"px-4 py-2"},P={class:"px-4 py-2"},j={class:"px-4 py-2 font-semibold"},C={class:"px-4 py-2"},D={colspan:"100%",class:"text-center py-4 bg-gray-50 dark:bg-gray-800 text-gray-800 dark:text-gray-100"},E={key:1,class:"text-sm text-red-600 dark:text-red-400"},T={key:1},V={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},W={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold text-gray-800 dark:text-gray-100"},z={class:"px-4 py-2"},H={class:"px-4 py-2"},U={class:"px-4 py-2"},I={class:"px-4 py-2 font-semibold"},J={class:"px-4 py-2"},Q={__name:"ShowGrades",props:{section:{type:Object,required:!0},course:{type:Object,required:!0},semester:{type:Object,required:!0},weights:{type:Array,required:!0},instructor:{type:Object,required:!0},studentsList:{type:Object,required:!0}},setup(k){const a=k,w=N({id:1}),u=x(()=>a.weights.reduce((r,e)=>r+(parseFloat(e.point)||0),0)),g=G({grades:[]}),c=r=>{let e=0;return a.weights.forEach(s=>{const d=s.results.find(l=>l.student_id===r);e+=parseFloat((d==null?void 0:d.point)||0)}),e.toFixed(2)},y=r=>(r=parseFloat(r),isNaN(r)?"N/A":r>=94?"A":r>=90?"A-":r>=87?"B+":r>=84?"B":r>=80?"B-":r>=77?"C+":r>=74?"C":r>=70?"C-":r>=67?"D+":r>=64?"D":r>=60?"D-":"F"),v=()=>{const r=a.studentsList.map(e=>{const s=c(e.id);return{student_id:e.id,grade_point:s,grade_letter:y(s),grade_description:"",grade_scale:u.value.toString(),grade_complaint:!1,grade_comment:"",changed_grade:null,grade_status:"Pending",changed_by:null,user_id:w.value.id,year_id:a.semester.year_id,semester_id:a.semester.id,section_id:a.section.id,course_id:a.course.id}});g.grades=r,g.post(route("grades.store"),{onSuccess:()=>{h.fire("Success","Grades successfully submitted!","success"),g.reset()},onError:()=>{h.fire("Error","Failed to submit grades.","error")}})},S=x(()=>a.studentsList.every(r=>a.weights.every(e=>{var s;return(s=e.results)==null?void 0:s.some(d=>d.student_id===r.id&&d.point!==null&&d.point!==void 0)}))),p=r=>a.section.grades.find(e=>e.student_id===r);return(r,e)=>(n(),i("div",F,[!a.section.grades||a.section.grades.filter(s=>s.course_id===a.course.id).length===0?(n(),i("div",q,[e[3]||(e[3]=t("h2",{class:"text-xl font-bold mb-4 text-gray-900 dark:text-gray-100"}," Grade Generation Form ",-1)),t("table",L,[t("thead",A,[t("tr",null,[e[0]||(e[0]=t("th",{class:"px-4 py-2"},"#",-1)),e[1]||(e[1]=t("th",{class:"px-4 py-2 text-left"},"Student Name",-1)),t("th",B," Total ("+o(u.value)+" pt) ",1),e[2]||(e[2]=t("th",{class:"px-4 py-2"},"Grade",-1))])]),t("tbody",null,[(n(!0),i(_,null,m(a.studentsList,(s,d)=>(n(),i("tr",{key:s.id,class:f(["text-sm border-b",d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"])},[t("td",O,o(d+1),1),t("td",P,o(s.firstName)+" "+o(s.middleName),1),t("td",j,o(c(s.id)),1),t("td",C,o(y(c(s.id))),1)],2))),128))]),t("tfoot",null,[t("tr",null,[t("td",D,[S.value?(n(),i("button",{key:0,onClick:v,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded"}," Submit Grades ")):(n(),i("p",E," Please enter all required weight values before submitting grades. "))])])])])])):(n(),i("div",T,[e[7]||(e[7]=t("h2",{class:"text-xl font-bold mb-4 text-gray-900 dark:text-gray-100"}," Submitted Grades ",-1)),t("table",V,[t("thead",W,[t("tr",null,[e[4]||(e[4]=t("th",{class:"px-4 py-2"},"#",-1)),e[5]||(e[5]=t("th",{class:"px-4 py-2 text-left"},"Student Name",-1)),t("th",z," Total ("+o(u.value)+" pt) ",1),e[6]||(e[6]=t("th",{class:"px-4 py-2"},"Grade",-1))])]),t("tbody",null,[(n(!0),i(_,null,m(a.studentsList,(s,d)=>{var l,b;return n(),i("tr",{key:s.id,class:f(["text-sm border-b",d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"])},[t("td",H,o(d+1),1),t("td",U,o(s.firstName)+" "+o(s.middleName),1),t("td",I,o(((l=p(s.id))==null?void 0:l.grade_point)??"N/A"),1),t("td",J,o(((b=p(s.id))==null?void 0:b.grade_letter)??"N/A"),1)],2)}),128))])])]))]))}};export{Q as default};
