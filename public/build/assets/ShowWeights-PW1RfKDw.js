import{d as m,x as w,r as V,c as n,o as u,a as r,i as x,h as d,u as a,t as p,F as b,f as W,w as f,k as F,T,n as S}from"./app-C7ErYowN.js";import{S as h}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as i}from"./TextInput-RMOPHF5k.js";import{P as q}from"./PrimaryButton-oO0AocDz.js";import{r as U}from"./PlusCircleIcon-DetiKQS5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"flex items-center justify-between mb-4"},C={key:0},O={class:"overflow-x-auto"},P={class:"mt-8 border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},A={class:"overflow-x-auto"},B={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},N={class:"bg-gray-50 dark:bg-gray-700"},D={class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"},E={class:"w-60 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},$={class:"w-40 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},z={class:"w-60 px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},L={key:0,class:"bg-gray-50 dark:bg-gray-700 border-b border-gray-300 dark:border-gray-600"},G={class:"px-4 py-2"},H={class:"px-3 py-2"},I={class:"px-5 py-2"},J={class:"flex items-center space-x-6"},ee={__name:"ShowWeights",props:{section:{type:Object,required:!0},course:{type:Object,required:!0},semester:{type:Object,required:!0},weights:{type:Array,required:!0},instructor:{type:Object,required:!0},redirectTo:{type:String,required:!1}},setup(g){const s=g,k=m(()=>s.weights.reduce((l,e)=>l+(parseFloat(e.point)||0),0)),o=w({name:"",point:"",description:"",course_id:s.course.id,section_id:s.section.id,semester_id:s.semester.id}),c=V(!1),v=()=>{const l=s.weights.reduce((t,y)=>t+parseFloat(y.point||0),0),e=parseFloat(o.point||0);if(l+e>100){h.fire("Error","Total weight cannot exceed 100.","error");return}o.post(route("weights.store",{redirectTo:s.redirectTo??route("assessments.section_course",{course:s.course.id,section:s.section.id}),params:{section:s.section.id,course:s.course.id}}),{onSuccess:()=>{h.fire("Added!","Weight added successfully.","success"),c.value=!1,o.reset()}})},_=m(()=>s.weights.reduce((e,t)=>e+parseFloat(t.point||0),0)>=100);return(l,e)=>(u(),n(b,null,[r("div",j,[e[8]||(e[8]=r("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Assessment Weights ",-1)),(!s.section.grades||s.section.grades.filter(t=>t.course_id===s.course.id).length===0)&&!_.value?(u(),n("div",C,[r("button",{onClick:e[0]||(e[0]=t=>c.value=!c.value),class:"flex items-center space-x-6 text-indigo-600 hover:text-indigo-800 transition"},[d(a(U),{class:"w-8 h-8"}),e[7]||(e[7]=r("span",{class:"hidden sm:inline"},"Add Weight",-1))])])):x("",!0)]),r("div",O,[r("div",P,[r("div",A,[r("table",B,[r("thead",null,[r("tr",N,[e[9]||(e[9]=r("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Weight ",-1)),r("th",D," Point ( "+p(k.value)+"/ 100%) ",1),e[10]||(e[10]=r("th",{class:"w-80 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Description ",-1))])]),r("tbody",null,[(u(!0),n(b,null,W(g.weights,(t,y)=>(u(),n("tr",{key:t.id,class:S([y%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","border-b border-gray-300 dark:border-gray-600"])},[r("td",E,p(t.name),1),r("td",$,p(t.point),1),r("td",z,p(t.description),1)],2))),128)),d(T,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:f(()=>[c.value?(u(),n("tr",L,[d(i,{modelValue:a(o).course_id,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).course_id=t),type:"text",value:s.course.id,readonly:"",hidden:""},null,8,["modelValue","value"]),d(i,{modelValue:a(o).section_id,"onUpdate:modelValue":e[2]||(e[2]=t=>a(o).section_id=t),type:"text",value:s.section.id,readonly:"",hidden:""},null,8,["modelValue","value"]),d(i,{modelValue:a(o).semester_id,"onUpdate:modelValue":e[3]||(e[3]=t=>a(o).semester_id=t),type:"text",value:s.semester.id,readonly:"",hidden:""},null,8,["modelValue","value"]),r("td",G,[d(i,{modelValue:a(o).name,"onUpdate:modelValue":e[4]||(e[4]=t=>a(o).name=t),type:"text",placeholder:"Title",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"])]),r("td",H,[d(i,{modelValue:a(o).point,"onUpdate:modelValue":e[5]||(e[5]=t=>a(o).point=t),type:"number",placeholder:"Weight Point",min:"0",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"])]),r("td",I,[r("div",J,[d(i,{modelValue:a(o).description,"onUpdate:modelValue":e[6]||(e[6]=t=>a(o).description=t),type:"text",placeholder:"Description",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"]),d(q,{class:"px-4 py-1 h-9 bg-green-500 text-white rounded-md hover:bg-green-600",onClick:v},{default:f(()=>e[11]||(e[11]=[F(" Save ")])),_:1})])])])):x("",!0)]),_:1})])])])])])],64))}};export{ee as default};
