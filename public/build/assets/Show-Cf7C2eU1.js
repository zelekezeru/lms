import{_ as B}from"./AppLayout-DT2747SC.js";import{r as V,x as A,q as D,d as b,o as u,w as x,a as t,t as i,g as m,u as a,S as v,i as f,n as h,c as y,F as T,e as M,h as k,W as N}from"./app-2tfRiCxz.js";import{S as c}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{s as Y}from"./index-pyMKxjHz.js";import{s as w}from"./index-CD_K2U2U.js";import{r as z}from"./CheckCircleIcon-BKxulw57.js";import{r as $}from"./XCircleIcon-DxKjlh1j.js";import{r as U}from"./PencilIcon-DJWOlhPF.js";import{r as E}from"./TrashIcon-BYtOS9ra.js";import"./ChevronDownIcon-bSPOPCbw.js";import"./AcademicCapIcon-DsfuY90c.js";import"./CogIcon-Dlinqc3T.js";import"./ClockIcon-BHny540Y.js";import"./PlusIcon-CXI6cx-P.js";import"./LanguageToggle-CoeNEM7C.js";import"./index-dAxwNK-8.js";import"./index-DVgjx7yL.js";import"./index-DqWD3Gz6.js";import"./index-CAvIJ2M0.js";import"./index-DF4HFo_2.js";import"./index-BeYBTb88.js";import"./index-D303QjTI.js";const L={class:"max-w-7xl mx-auto p-6"},O={class:"text-3xl font-bold text-center text-gray-900 dark:text-gray-100 mb-10"},W={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-xl shadow p-6 space-y-10"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},F={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},j={class:"mt-1 text-lg font-semibold text-gray-800 dark:text-gray-100"},R={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},I={class:"mt-1 text-lg font-semibold text-blue-600 hover:underline"},P={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},G={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},H={class:"mt-1 text-lg font-semibold text-gray-800 dark:text-gray-100"},J={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},K={class:"mt-1 text-lg font-semibold text-gray-800 dark:text-gray-100"},Q={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},X={class:"border-t pt-6 dark:border-gray-700"},Z={class:"space-y-10"},ee={key:0,class:"text-gray-500 italic dark:text-gray-400"},te={key:1,class:"space-y-6"},se={class:"text-base font-semibold mb-4 text-gray-800 dark:text-gray-100"},re={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},de={class:"text-center mt-4"},ae={class:"flex justify-end pt-4 gap-5"},De={__name:"Show",props:{semester:{type:Object,required:!0},studyModes:{type:Array,required:!0}},setup(d){const l=d,g=V(l.semester.studyModes.map(r=>r.id)),o=A({study_modes:l.semester.studyModes.reduce((r,e)=>(r[e.id]={start_date:e.semester_start_date,end_date:e.semester_end_date},r),{})});D(g,r=>{o.study_modes=r.reduce((e,s)=>(e[s]={start_date:o.study_modes[s]?o.study_modes[s].start_date:l.semester.studyModes.find(n=>n.id==s)?l.semester.studyModes.find(n=>n.id==s).semester_start_date:l.semester.start_date,end_date:o.study_modes[s]?o.study_modes[s].end_date:l.semester.studyModes.find(n=>n.id==s)?l.semester.studyModes.find(n=>n.id==s).semester_end_date:l.semester.end_date},e),{})});const p=r=>{const e=r.getTimezoneOffset()*6e4;return new Date(r.valueOf()-e).toISOString().slice(0,-1)},C=()=>{c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, Revert My Changes!"}).then(r=>{r.isConfirmed&&(o.reset(),g.value=[])})},_=()=>{c.fire({title:"Are you sure?",text:"Your Changes Will Be Applied!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, Apply My Changes!"}).then(r=>{r.isConfirmed&&o.post(route("semesters.syncStudyModes",{semester:l.semester.id}),{preserveState:!1,onSuccess:()=>{c.fire("Success!","The semester has been updated.","success")}})})},S=r=>{c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&N.delete(route("semesters.destroy",{semester:r}),{onSuccess:()=>{c.fire("Deleted!","The semester has been deleted.","success")}})})};return(r,e)=>(u(),b(B,null,{default:x(()=>[t("div",L,[t("h1",O,i(d.semester.name)+" - "+i(d.semester.year.name),1),t("div",W,[t("div",q,[t("div",F,[e[2]||(e[2]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Semester Name",-1)),t("div",j,i(d.semester.name),1)]),t("div",R,[e[3]||(e[3]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Academic Year",-1)),t("div",I,[m(a(v),{href:r.route("years.show",{year:d.semester.year.id})},{default:x(()=>[f(i(d.semester.year.name),1)]),_:1},8,["href"])])]),t("div",P,[e[4]||(e[4]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Status",-1)),t("div",{class:h(["mt-1 text-lg font-semibold",d.semester.status==="Active"?"text-green-600":"text-red-600"])},i(d.semester.status),3)]),t("div",G,[e[5]||(e[5]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Start Date",-1)),t("div",H,i(new Date(d.semester.start_date).toLocaleDateString()),1)]),t("div",J,[e[6]||(e[6]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"End Date",-1)),t("div",K,i(new Date(d.semester.end_date).toLocaleDateString()),1)]),t("div",Q,[e[7]||(e[7]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Approval",-1)),t("div",{class:h(["mt-1 text-lg font-semibold",d.semester.is_approved?"text-green-600":"text-red-600"])},i(d.semester.is_approved?"Approved":"Not Approved"),3)])]),t("div",X,[t("div",Z,[t("div",null,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100"}," This semester is applied in... ",-1)),m(a(Y),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),options:d.studyModes,checkmark:"",optionLabel:"name","option-value":"id",filter:"",multiple:"",placeholder:"Select study modes",class:"w-full"},null,8,["modelValue","options"])]),t("div",null,[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100"}," Pick duration in each study mode ",-1)),g.value.length===0?(u(),y("div",ee," No study mode selected ")):(u(),y("div",te,[(u(!0),y(T,null,M(d.studyModes.filter(s=>g.value.includes(s.id)),s=>(u(),y("div",{key:s.id,class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700"},[t("h3",se,i(s.name),1),t("div",re,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"}," Start Date ",-1)),m(a(w),{modelValue:a(o).study_modes[s.id].start_date,"onUpdate:modelValue":n=>{a(o).study_modes[s.id].start_date=p(n)},"show-icon":"",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"}," End Date ",-1)),m(a(w),{modelValue:a(o).study_modes[s.id].end_date,"onUpdate:modelValue":n=>{a(o).study_modes[s.id].end_date=p(n)},"show-icon":"",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]))])]),t("div",de,[t("button",{onClick:_,class:"inline-flex items-center px-5 mr-3 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-sm transition duration-200"},[m(a(z),{class:"w-5 h-5 mr-2 -ml-1"}),e[12]||(e[12]=f(" Apply Changes "))]),t("button",{onClick:C,class:"inline-flex items-center px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-sm transition duration-200"},[m(a($),{class:"w-5 h-5 mr-2 -ml-1"}),e[13]||(e[13]=f(" Cancel Changes "))])])]),t("div",ae,[r.userCan("update-semesters")?(u(),b(a(v),{key:0,href:r.route("semesters.edit",{semester:d.semester.id}),class:"inline-flex items-center space-x-2 text-blue-500 hover:text-blue-700"},{default:x(()=>[m(a(U),{class:"w-5 h-5"}),e[14]||(e[14]=t("span",null,"Edit",-1))]),_:1},8,["href"])):k("",!0),r.userCan("delete-semesters")?(u(),y("button",{key:1,onClick:e[1]||(e[1]=s=>S(d.semester.id)),class:"inline-flex items-center gap-2 text-red-600 hover:text-red-800 font-medium"},[m(a(E),{class:"w-5 h-5"}),e[15]||(e[15]=t("span",null,"Delete Semester",-1))])):k("",!0)])])])]),_:1}))}};export{De as default};
