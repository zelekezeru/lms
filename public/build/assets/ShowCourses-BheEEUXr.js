import{c,o as m,a as t,r as x,x as _,d as y,H as S,i as F,h as i,j as g,u as o,F as q,f as H,w as V,t as n,n as A,S as T,W as U}from"./app-Dktk2Gfx.js";/* empty css                                                                  */import{S as f}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as W}from"./Modal-dnKX6Jvt.js";import{s as M}from"./index-CXFP_yO6.js";import{s as G}from"./index-DnHwV6CR.js";import{r as I}from"./PlusCircleIcon-Cc3OYp2u.js";import"./index-UNK0IQGY.js";import"./index-ByHFji2U.js";import"./index-ByguteE8.js";import"./index-DalBL7CE.js";import"./index-Dfvmb0n6.js";import"./index-Cvpq92RV.js";function L(a,l){return m(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm3 10.5a.75.75 0 0 0 0-1.5H9a.75.75 0 0 0 0 1.5h6Z","clip-rule":"evenodd"})])}const O={class:"flex items-center justify-between mb-4"},Z={class:"space-x-4"},z={key:0,class:"text-center"},Y={key:1,class:"flex flex-col"},J={class:"mt-8 border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},K={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},P={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Q={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},R={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},X={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},tt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},et={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},st={class:"px-4 py-2 text-sm"},rt=["onClick"],ot={class:"px-8 py-6"},dt={class:"text-lg mb-4"},at={class:"flex justify-end"},lt=["disabled"],wt={__name:"ShowCourses",props:{student:{type:Object,required:!0},courses:{type:Array,required:!0},studyModes:{type:Array,required:!1,default:()=>[]}},setup(a){const l=a,u=x(!1),B=x(!1),d=_({course_id:"",section_id:""}),b=_({}),N=y(()=>new Set(l.student.courses.map(s=>s.id)));y(()=>l.courses.filter(s=>!N.value.has(s.id)).map(s=>({...s,label:s.name})));const p=x(l.studyModes[0].id||null),$=y(()=>{const s=l.studyModes.find(e=>e.id===p.value);return(s==null?void 0:s.sections)||[]}),h=()=>{d.reset(),d.clearErrors()},D=()=>{b.reset(),b.clearErrors()},E=()=>{console.log(d.section_id),d.post(route("courses-student.add",{student:l.student.id}),{onSuccess:()=>{f.fire("Added!","Course added successfully.","success"),u.value=!1,h()}})},j=s=>{f.fire({title:"Are you sure?",text:"This action will drop the course from the student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, drop it!"}).then(e=>{e.isConfirmed&&U.post(route("courses-student.drop",{student:l.student.id}),{course_id:s},{onSuccess:()=>{f.fire("Dropped!","Course dropped successfully.","success")}})})};return S(u,s=>{s&&h()}),S(B,s=>{s&&D()}),(s,e)=>(m(),c("div",null,[t("div",O,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"Courses",-1)),t("div",Z,[t("button",{onClick:e[0]||(e[0]=r=>u.value=!0),class:"flex items-center text-green-600 hover:text-green-800"},[i(o(I),{class:"w-6 h-6 mr-1"}),e[6]||(e[6]=g(" Add Course "))])])]),a.student.courses?a.student.courses?(m(),c("div",Y,[t("div",J,[e[11]||(e[11]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Enrolled Courses",-1)),t("table",K,[e[10]||(e[10]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"},"No."),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"},"Name"),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"},"Course Code"),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"},"Credit Hours"),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"},"Grade"),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"},"Status"),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"},"Action")])],-1)),t("tbody",null,[(m(!0),c(q,null,H(a.student.courses,(r,k)=>{var v,w;return m(),c("tr",{key:r.id,class:A(k%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",P,n(k+1),1),t("td",Q,[i(o(T),{href:s.route("courses.show",{course:r.id})},{default:V(()=>[g(n(r.name),1)]),_:2},1032,["href"])]),t("td",R,n(r.code),1),t("td",X,n(r.credit_hours),1),t("td",tt,n(((w=(v=a.student.grades)==null?void 0:v.find(C=>C.course_id===r.id))==null?void 0:w.grade_letter)??"Not Graded"),1),t("td",et,[t("span",{class:A(r.pivot.status==="Enrolled"?"text-green-500":"text-red-500")},n(r.pivot.status),3)]),t("td",st,[t("button",{onClick:C=>j(r.id),class:"flex items-center text-red-600 hover:text-red-800"},[i(o(L),{class:"w-4 h-4 mr-1"}),e[9]||(e[9]=g(" Drop "))],8,rt)])],2)}),128))])])])])):F("",!0):(m(),c("div",z,e[8]||(e[8]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"No course information available.",-1)]))),i(W,{show:u.value,onClose:e[5]||(e[5]=r=>u.value=!1),maxWidth:"4xl"},{default:V(()=>[t("div",ot,[t("h3",dt,"Add Course for "+n(a.student.name),1),i(o(G),{modelValue:o(d).course_id,"onUpdate:modelValue":e[1]||(e[1]=r=>o(d).course_id=r),options:a.courses,optionLabel:"name","option-value":"id",filter:"",placeholder:"Select Course",class:"w-full mb-4"},null,8,["modelValue","options"]),i(o(M),{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=r=>p.value=r),options:l.studyModes,placeholder:"Select Study Mode","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options"]),i(o(M),{modelValue:o(d).section_id,"onUpdate:modelValue":e[3]||(e[3]=r=>o(d).section_id=r),options:$.value,placeholder:"Select Section","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options"]),t("div",at,[t("button",{onClick:E,disabled:o(d).processing,class:"bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded mr-3"},n(o(d).processing?"Adding...":"Add"),9,lt),t("button",{onClick:e[4]||(e[4]=r=>u.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded"},"Cancel")])])]),_:1},8,["show"])]))}};export{wt as default};
