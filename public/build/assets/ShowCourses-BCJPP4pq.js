import{c as n,o as i,a as t,d as k,r as N,x as B,i as v,h as x,k as p,u as o,t as r,F as w,f as _,w as h,n as f,S as C,W as L}from"./app-BrFhRYXM.js";import{S as A}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as O}from"./Modal-CrjbpO2V.js";import{s as E}from"./index-DjSQKStH.js";import{s as P}from"./index-oL0qAXjG.js";import{r as M}from"./PlusCircleIcon-BXkZ72yJ.js";import{r as U}from"./ClockIcon-isYbYpBm.js";import{r as I}from"./BookmarkIcon-8LaBA0t5.js";import{r as W}from"./XCircleIcon-Ct6HvpUi.js";import{r as Z}from"./CheckCircleIcon-CctBry5x.js";import{r as z}from"./EyeIcon-D56eN-_q.js";import"./index-Cf8s0F8X.js";import"./index-rwZxPwlD.js";import"./index-BQCiHZp0.js";import"./index-Bz12CTHG.js";import"./index-Ul63Ihym.js";import"./index-DUoDE9ce.js";function G(d,y){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm3 10.5a.75.75 0 0 0 0-1.5H9a.75.75 0 0 0 0 1.5h6Z","clip-rule":"evenodd"})])}const R={class:"flex items-center justify-between mb-4"},Y={class:"space-x-4"},J={class:"flex items-center gap-3 text-green-600"},K={class:"text-xl font-semibold dark:text-white text-gray-900"},Q={key:0,class:"text-center"},X={key:1,class:"flex flex-col"},tt={class:"mt-10 min-w-[100px] overflow-auto border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},et={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},st={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},rt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},at={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},dt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ot={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},lt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},nt={class:"px-4 py-2 text-sm"},it=["onClick"],xt={class:"flex items-center gap-3 text-green-600"},ut={class:"text-xl font-semibold dark:text-white text-gray-900"},yt={key:0,class:"text-center"},ct={key:1,class:"flex flex-col"},gt={class:"mt-10 min-w-[100px] overflow-auto border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},mt={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},pt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ft={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},bt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},kt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ht={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},vt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},wt={class:"px-4 py-2 text-sm"},_t=["onClick"],Ct={class:"flex items-center gap-3 mt-8 text-green-600"},St={key:0,class:"text-center"},Nt={key:1,class:"flex flex-col"},At={class:"mt-8 min-w-[100px] overflow-auto border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},$t={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},Vt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Bt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Et={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Mt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Gt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},Ft={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Dt={class:"px-4 py-2 text-sm"},Tt=["onClick"],Ht={class:"flex items-center gap-3 mt-8 mb-6 text-green-600"},jt={key:2,class:"text-center"},qt={key:3,class:"flex flex-col"},Lt={class:"mt-8 min-w-[100px] overflow-auto border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},Ot={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},Pt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Ut={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},It={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Wt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Zt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},zt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Rt={class:"px-4 py-2 text-sm"},Yt={class:"flex items-center text-green-600 hover:text-green-800 dark:text-green-300 dark:hover:text-green-400"},Jt={class:"px-8 py-6"},Kt={class:"text-lg font-semibold mb-4"},Qt={class:"flex justify-end"},Xt=["disabled"],be={__name:"ShowCourses",props:{student:{type:Object,required:!0},courses:{type:Array,required:!0},studyModes:{type:Array,required:!1,default:()=>[]},activeSemester:{type:Object,required:!0}},setup(d){const y=d,F=k(()=>y.student.enrollments.filter(a=>a.status=="Enrolled"||a.status=="Completed").map(a=>a.course.id)),D=k(()=>y.courses.filter(a=>!F.value.includes(a.id))),b=N(!1);N(!1);const u=B({course_id:"",section_id:""});B({});const T=k(()=>new Set(y.student.enrollments.filter(a=>a.status=="Enrolled").map(a=>a.course.id)));k(()=>y.courses.filter(a=>!T.value.has(a.id)).map(a=>({...a,label:a.name})));const S=N(y.studyModes[0].id||null);console.log(y.student.enrollments);const $=k(()=>{var s;const a=y.studyModes.find(e=>e.id===S.value);return((s=a==null?void 0:a.sections)==null?void 0:s.filter(e=>e.courses.map(l=>l.id).includes(u.course_id)))||[]}),H=()=>{u.reset(),u.clearErrors()},j=()=>{u.post(route("enrollments-student.add",{student:y.student.id}),{onSuccess:()=>{A.fire("Added!","Course added successfully.","success"),b.value=!1,H()}})},q=a=>{u.course_id=a.course.id,b.value=!0},V=a=>{A.fire({title:"Are you sure?",text:"This action will drop the course from the student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, drop it!"}).then(s=>{s.isConfirmed&&L.post(route("enrollments-student.drop",{student:y.student.id}),{enrollment_id:a},{onSuccess:()=>{A.fire("Dropped!","Course dropped successfully.","success")}})})};return(a,s)=>(i(),n("div",null,[t("div",R,[s[7]||(s[7]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Courses ",-1)),t("div",Y,[t("button",{onClick:s[0]||(s[0]=e=>b.value=!0),class:"flex items-center text-green-600 hover:text-green-800"},[x(o(M),{class:"w-6 h-6 mr-1"}),s[6]||(s[6]=p(" Add Course "))])])]),t("div",null,[t("div",J,[x(o(U),{class:"w-6 h-6"}),t("h2",K," Pending Courses For "+r(d.activeSemester.year.name)+" Semester "+r(d.activeSemester.level),1)]),d.student.enrollments.filter(e=>e.status=="pending")?d.student.enrollments.filter(e=>e.status=="pending")?(i(),n("div",X,[t("div",tt,[t("table",et,[s[10]||(s[10]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(w,null,_(d.student.enrollments.filter(e=>e.status=="pending"),(e,l)=>{var c,g;return i(),n("tr",{key:e.id,class:f(l%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",st,r(l+1),1),t("td",rt,[x(o(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[p(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",at,r(e.course.code),1),t("td",dt,r(e.course.credit_hours),1),t("td",ot,r(((g=(c=d.student.grades)==null?void 0:c.find(m=>m.course_id===e.course.id))==null?void 0:g.grade_letter)??"Not Graded"),1),t("td",lt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",nt,[t("button",{onClick:m=>V(e.id),class:"flex items-center text-red-600 hover:text-red-800"},[x(o(G),{class:"w-4 h-4 mr-1"}),s[9]||(s[9]=p(" Drop "))],8,it)])],2)}),128))])])])])):v("",!0):(i(),n("div",Q,s[8]||(s[8]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No Pending Courses For This Semester. ",-1)])))]),t("div",null,[t("div",xt,[x(o(I),{class:"w-6 h-6"}),t("h2",ut," Enrolled Courses For "+r(d.activeSemester.year.name)+" Semester "+r(d.activeSemester.level),1)]),d.student.enrollments.filter(e=>e.status=="enrolled")?d.student.enrollments.filter(e=>e.status=="enrolled")?(i(),n("div",ct,[t("div",gt,[t("table",mt,[s[13]||(s[13]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(w,null,_(d.student.enrollments.filter(e=>e.status=="enrolled"),(e,l)=>{var c,g;return i(),n("tr",{key:e.id,class:f(l%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",pt,r(l+1),1),t("td",ft,[x(o(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[p(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",bt,r(e.course.code),1),t("td",kt,r(e.course.credit_hours),1),t("td",ht,r(((g=(c=d.student.grades)==null?void 0:c.find(m=>m.course_id===e.course.id))==null?void 0:g.grade_letter)??"Not Graded"),1),t("td",vt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",wt,[t("button",{onClick:m=>V(e.id),class:"flex items-center text-red-600 hover:text-red-800"},[x(o(G),{class:"w-4 h-4 mr-1"}),s[12]||(s[12]=p(" Drop "))],8,_t)])],2)}),128))])])])])):v("",!0):(i(),n("div",yt,s[11]||(s[11]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No Enrolled Courses For This Semester. ",-1)])))]),t("div",Ct,[x(o(W),{class:"w-6 h-6"}),s[14]||(s[14]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Dropped Courses ",-1))]),d.student.enrollments.filter(e=>e.status=="dropped").length==0?(i(),n("div",St,s[15]||(s[15]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"No Dropped Courses.",-1)]))):d.student.enrollments.filter(e=>e.status=="dropped")?(i(),n("div",Nt,[t("div",At,[t("table",$t,[s[17]||(s[17]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(w,null,_(d.student.enrollments.filter(e=>e.status=="dropped"),(e,l)=>{var c,g;return i(),n("tr",{key:e.id,class:f(l%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",Vt,r(l+1),1),t("td",Bt,[x(o(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[p(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",Et,r(e.course.code),1),t("td",Mt,r(e.course.credit_hours),1),t("td",Gt,r(((g=(c=d.student.grades)==null?void 0:c.find(m=>m.course_id===e.course.id))==null?void 0:g.grade_letter)??"Not Graded"),1),t("td",Ft,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",Dt,[t("button",{onClick:m=>q(e),class:"flex items-center text-green-600 hover:text-green-700"},[x(o(M),{class:"w-4 h-4 mr-1"}),s[16]||(s[16]=p(" Add Back "))],8,Tt)])],2)}),128))])])])])):v("",!0),t("div",Ht,[x(o(Z),{class:"w-6 h-6"}),s[18]||(s[18]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Completed Courses ",-1))]),d.student.enrollments.filter(e=>e.status=="completed").length==0?(i(),n("div",jt,s[19]||(s[19]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No completed Courses. ",-1)]))):d.student.enrollments.filter(e=>e.status=="completed")?(i(),n("div",qt,[t("div",Lt,[t("table",Ot,[s[21]||(s[21]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(w,null,_(d.student.enrollments.filter(e=>e.status=="completed"),(e,l)=>{var c,g;return i(),n("tr",{key:e.id,class:f(l%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",Pt,r(l+1),1),t("td",Ut,[x(o(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[p(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",It,r(e.course.code),1),t("td",Wt,r(e.course.credit_hours),1),t("td",Zt,r(((g=(c=d.student.grades)==null?void 0:c.find(m=>m.course_id===e.course.id))==null?void 0:g.grade_letter)??"Not Graded"),1),t("td",zt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",Rt,[t("button",Yt,[x(o(z),{class:"w-4 h-4 mr-1"}),s[20]||(s[20]=p(" View Results "))])])],2)}),128))])])])])):v("",!0),x(O,{show:b.value,onClose:s[5]||(s[5]=e=>b.value=!1)},{default:h(()=>{var e;return[t("div",Jt,[t("h3",Kt," Enroll "+r(d.student.name)+" to "+r(o(u).course_id?(e=d.courses.find(l=>l.id==o(u).course_id))==null?void 0:e.name:"New Course")+" New Course ",1),s[22]||(s[22]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Course ",-1)),s[23]||(s[23]=t("p",{class:"text-sm text-gray-500 mb-2"}," Choose a course the student hasnâ€™t taken yet. ",-1)),x(o(P),{modelValue:o(u).course_id,"onUpdate:modelValue":s[1]||(s[1]=l=>o(u).course_id=l),options:D.value,checkmark:"",optionLabel:"name","option-value":"id",filter:"",placeholder:"Select Course",class:"w-full mb-4"},null,8,["modelValue","options"]),s[24]||(s[24]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Study Mode ",-1)),s[25]||(s[25]=t("p",{class:"text-sm text-gray-500 mb-2"}," Select how the course will be attended (e.g. regular, weekend). ",-1)),x(o(E),{modelValue:S.value,"onUpdate:modelValue":s[2]||(s[2]=l=>S.value=l),options:y.studyModes,placeholder:"Select Study Mode","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options"]),s[26]||(s[26]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Section ",-1)),s[27]||(s[27]=t("p",{class:"text-sm text-gray-500 mb-2"}," Pick the section where the student will take the given course in the given study mode. ",-1)),x(o(E),{modelValue:o(u).section_id,"onUpdate:modelValue":s[3]||(s[3]=l=>o(u).section_id=l),options:$.value,placeholder:`This course is available in (${$.value.length})`,"empty-message":"no available section!","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options","placeholder"]),t("div",Qt,[t("button",{onClick:j,disabled:o(u).processing,class:"bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded mr-3"},r(o(u).processing?"Adding...":"Add"),9,Xt),t("button",{onClick:s[4]||(s[4]=l=>b.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded"}," Cancel ")])])]}),_:1},8,["show"])]))}};export{be as default};
