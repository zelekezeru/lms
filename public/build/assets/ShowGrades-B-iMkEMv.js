import{r as G,h as m,x as F,c as n,o as i,a as e,t as a,F as b,d as f,n as h}from"./app-DWmz0_yw.js";import{S as x}from"./sweetalert2.esm.all-89IKscqO.js";const N={class:"overflow-x-auto px-4 py-6"},q={key:0},A={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900"},B={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold"},P={class:"px-4 py-2"},C={class:"px-4 py-2"},O={class:"px-4 py-2"},j={class:"px-4 py-2 font-semibold"},D={class:"px-4 py-2"},E={colspan:"100%",class:"text-center py-4 bg-gray-50 dark:bg-gray-800"},T={key:1,class:"text-sm text-red-600 dark:text-red-400"},L={key:1},V={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900"},W={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold"},z={class:"px-4 py-2"},H={class:"px-4 py-2"},U={class:"px-4 py-2"},I={class:"px-4 py-2 font-semibold"},J={class:"px-4 py-2"},Q={__name:"ShowGrades",props:{section:{type:Object,required:!0},course:{type:Object,required:!0},semester:{type:Object,required:!0},weights:{type:Array,required:!0},instructor:{type:Object,required:!0}},setup(w){const d=w,k=G({id:1}),u=m(()=>d.weights.reduce((s,t)=>s+(parseFloat(t.point)||0),0)),c=F({grades:[]}),g=s=>{let t=0;return d.weights.forEach(r=>{const o=r.results.find(l=>l.student_id===s);t+=parseFloat((o==null?void 0:o.point)||0)}),t.toFixed(2)},p=s=>(s=parseFloat(s),isNaN(s)?"N/A":s>=94?"A":s>=90?"A-":s>=87?"B+":s>=84?"B":s>=80?"B-":s>=77?"C+":s>=74?"C":s>=70?"C-":s>=67?"D+":s>=64?"D":s>=60?"D-":"F"),v=()=>{const s=d.section.students.map(t=>{const r=g(t.id);return{student_id:t.id,grade_point:r,grade_letter:p(r),grade_description:"",grade_scale:u.value.toString(),grade_complaint:!1,grade_comment:"",changed_grade:null,grade_status:"Pending",changed_by:null,user_id:k.value.id,year_id:d.semester.year_id,semester_id:d.semester.id,section_id:d.section.id,course_id:d.course.id}});c.grades=s,c.post(route("grades.store"),{onSuccess:()=>{x.fire("Success","Grades successfully submitted!","success"),c.reset()},onError:()=>{x.fire("Error","Failed to submit grades.","error")}})},S=m(()=>d.section.students.every(s=>d.weights.every(t=>{var r;return(r=t.results)==null?void 0:r.some(o=>o.student_id===s.id&&o.point!==null&&o.point!==void 0)}))),_=s=>d.section.grades.find(t=>t.student_id===s);return(s,t)=>(i(),n("div",N,[!d.section.grades||d.section.grades.filter(r=>r.course_id===d.course.id).length===0?(i(),n("div",q,[t[3]||(t[3]=e("h2",{class:"text-xl font-bold mb-4"},"Grade Generation Form",-1)),e("table",A,[e("thead",B,[e("tr",null,[t[0]||(t[0]=e("th",{class:"px-4 py-2"},"#",-1)),t[1]||(t[1]=e("th",{class:"px-4 py-2 text-left"},"Student Name",-1)),e("th",P,"Total ("+a(u.value)+" pt)",1),t[2]||(t[2]=e("th",{class:"px-4 py-2"},"Grade",-1))])]),e("tbody",null,[(i(!0),n(b,null,f(d.section.students,(r,o)=>(i(),n("tr",{key:r.id,class:h([o%2===0?"bg-white":"bg-gray-50","text-sm border-b"])},[e("td",C,a(o+1),1),e("td",O,a(r.first_name)+" "+a(r.middle_name),1),e("td",j,a(g(r.id)),1),e("td",D,a(p(g(r.id))),1)],2))),128))]),e("tfoot",null,[e("tr",null,[e("td",E,[S.value?(i(),n("button",{key:0,onClick:v,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded"}," Submit Grades ")):(i(),n("p",T," Please enter all required weight values before submitting grades. "))])])])])])):(i(),n("div",L,[t[7]||(t[7]=e("h2",{class:"text-xl font-bold mb-4"},"Submitted Grades",-1)),e("table",V,[e("thead",W,[e("tr",null,[t[4]||(t[4]=e("th",{class:"px-4 py-2"},"#",-1)),t[5]||(t[5]=e("th",{class:"px-4 py-2 text-left"},"Student Name",-1)),e("th",z,"Total ("+a(u.value)+" pt)",1),t[6]||(t[6]=e("th",{class:"px-4 py-2"},"Grade",-1))])]),e("tbody",null,[(i(!0),n(b,null,f(d.section.students,(r,o)=>{var l,y;return i(),n("tr",{key:r.id,class:h([o%2===0?"bg-white":"bg-gray-50","text-sm border-b"])},[e("td",H,a(o+1),1),e("td",U,a(r.first_name)+" "+a(r.middle_name),1),e("td",I,a(((l=_(r.id))==null?void 0:l.grade_point)??"N/A"),1),e("td",J,a(((y=_(r.id))==null?void 0:y.grade_letter)??"N/A"),1)],2)}),128))])])]))]))}};export{Q as default};
