import{r as h,x as D,m as U,q as N,C as R,c as n,o as d,a as e,g,t as r,w as f,i as u,n as p,l as k,az as _,h as y,F as E,e as O,T as q,u as i,v as Y}from"./app-DJAR-Nr4.js";import{s as M}from"./index-CqKKFB4_.js";import{P as C}from"./PrimaryButton-BvEIKCDL.js";import{s as G}from"./index-9sPmURnV.js";import"./index-TQiORoem.js";import"./index-DhgSgamN.js";import"./index-Biys6iZK.js";import"./index-DoqVd6mu.js";import"./index-B6QgUJsk.js";import"./index-BYA3bt35.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BxF2klpy.js";import"./index-CzyfcID4.js";import"./index-BlwcUPrx.js";const J={class:"max-w-9xl mx-auto py-10 px-0 space-y-8"},K={class:"text-center"},Q={class:"text-2xl font-bold text-gray-800 dark:text-white"},W={key:"details",class:"bg-white dark:bg-gray-800 p-6 rounded shadow"},X={class:"grid grid-cols-1 sm:grid-cols-2 gap-y-2 gap-x-6 text-sm text-gray-600 dark:text-gray-300"},Z={class:"mt-6"},ee={key:"attendance",class:"bg-white dark:bg-gray-800 rounded shadow"},te={class:"p-2"},se={class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},ae={class:"mb-4"},re={class:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2"},le={class:"flex flex-wrap gap-2 sm:gap-4"},oe={key:0,class:"w-2 h-2 bg-white rounded-full"},ne={key:0,class:"w-2 h-2 bg-white rounded-full"},de={key:0,class:"w-2 h-2 bg-white rounded-full"},ie={class:"overflow-x-auto"},ue={class:"w-full text-sm text-left text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700 rounded"},me={class:"px-4 py-2"},pe={class:"px-1 py-2 text-center cursor-pointer w-[60px] sm:min-w-[35px]"},ce=["name","onUpdate:modelValue"],ge={key:0,class:"w-2 h-2 bg-white rounded-full"},ye={class:"px-1 py-2 text-center cursor-pointer w-[60px] sm:min-w-[35px]"},xe=["name","onUpdate:modelValue"],be={key:0,class:"w-2 h-2 bg-white rounded-full"},ve={class:"px-1 py-2 text-center cursor-pointer w-[60px] sm:min-w-[35px]"},fe=["name","onUpdate:modelValue"],ke={key:0,class:"w-2 h-2 bg-white rounded-full"},we={class:"mt-4 flex gap-2"},he={key:"list"},_e={class:"flex justify-end mb-4"},Ae={class:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-300 dark:border-gray-600"},Ce={class:"w-full min-w-[500px] table-fixed"},Ve={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},Se={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},Te={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},je={class:"rounded-xl p-2 bg-yellow-400"},De={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300 flex gap-2"},Ue=["onClick"],Ne=["onClick"],Ee={key:1},Oe={key:0,class:"bg-gray-100 dark:bg-gray-700 border-t border-gray-300 dark:border-gray-600"},qe={class:"px-1 py-2"},Me={key:0,class:"text-red-500 text-xs mt-1"},Pe={class:"px-4 py-2"},Be={key:0,class:"text-red-500 text-xs mt-1"},$e={class:"px-4 py-2"},Fe={key:0,class:"text-red-500 text-xs mt-1"},Ie={class:"px-4 py-2 sm:items-center gap-2"},st={__name:"ClassSessions",props:{section:{required:!0,type:Object},course:{required:!0,type:Object},instructor:{required:!0,type:Object},activeSemester:{required:!0,type:Object},classSessions:{required:!0,type:Array},students:{required:!0,type:Array},rooms:{required:!0,type:Array}},setup(w){const b=w,A=h(!1),V=h(!1),S=h(!1),c=h(null),m=h("");function P(){A.value=!A.value}function B(o){c.value=o,V.value=!0,S.value=!1}function $(o){c.value=o,S.value=!0,V.value=!1,b.students.forEach(t=>{t.id in a.value||(a.value[t.id]="")})}function T(){c.value=null,V.value=!1,S.value=!1}const l=D({section_id:b.section.id,course_id:b.course.id,semester_id:b.activeSemester.id,start_date_time:null,end_time:null,type:null,class_about:""}),F=U(()=>{if(!l.start_date_time)return null;const o=new Date(l.start_date_time);return o.setHours(0,0,0,0),o}),I=U(()=>{if(!l.start_date_time)return null;const o=new Date(l.start_date_time);return o.setHours(23,59,59,999),o});function L(){l.post(route("classSessions.store"),{onSuccess:()=>{A.value=!1,l.reset("room_id","date_time","class_about")}})}const a=h({});N(c,o=>{var t;((t=o==null?void 0:o.attendances)==null?void 0:t.length)>0?(a.value={},o.attendances.forEach(x=>{a.value[x.studentId]=x.status})):(a.value={},b.students.forEach(x=>{a.value[x.id]=""}))});function z(){const o={class_session_id:c.value.id,records:Object.entries(a.value).map(([t,x])=>({student_id:parseInt(t),status:x}))};D(o).post(route("attendances.store"),{onSuccess:()=>{T()}})}return N(m,o=>{b.students.forEach(t=>{a.value[t.id]=o})}),R(()=>{b.students.forEach(o=>{o.id in a.value||(a.value[o.id]="")})}),(o,t)=>(d(),n("div",J,[e("div",K,[e("h1",Q," Your Class Session for "+r(w.activeSemester.year.name)+" Semester - "+r(w.activeSemester.level)+" In This Section ",1)]),g(q,{mode:"out-in","enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-75","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-75"},{default:f(()=>{var x;return[V.value?(d(),n("div",W,[t[15]||(t[15]=e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"}," Class Session Overview ",-1)),e("div",X,[e("p",null,[t[7]||(t[7]=e("strong",null,"Date:",-1)),u(" "+r(c.value.date),1)]),e("p",null,[t[8]||(t[8]=e("strong",null,"Start Time:",-1)),u(" "+r(c.value.startTime),1)]),e("p",null,[t[9]||(t[9]=e("strong",null,"End Time:",-1)),u(" "+r(c.value.endTime),1)]),e("p",null,[t[10]||(t[10]=e("strong",null,"Type:",-1)),u(" "+r(c.value.type),1)]),e("p",null,[t[11]||(t[11]=e("strong",null,"Status:",-1)),u(" "+r(c.value.status),1)]),e("p",null,[t[12]||(t[12]=e("strong",null,"Room:",-1)),u(" "+r(((x=c.value.room)==null?void 0:x.name)||"N/A"),1)]),e("p",null,[t[13]||(t[13]=e("strong",null,"About:",-1)),u(" "+r(c.value.classAbout||"N/A"),1)])]),e("div",Z,[g(C,{onClick:T},{default:f(()=>t[14]||(t[14]=[u("Back")])),_:1,__:[14]})])])):S.value?(d(),n("div",ee,[e("div",te,[e("h2",se," Take Attendance For "+r(c.value.date)+" Session ",1),e("div",ae,[e("h3",re," Mark All Students As: "+r(m.value),1),e("div",le,[e("label",{class:p(["inline-flex items-center gap-2 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-green-800 dark:text-green-100 rounded cursor-pointer",{"!bg-green-500 !text-white":m.value==="present"}])},[k(e("input",{type:"radio",class:"sr-only",name:"markAllAs",value:"present","onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s)},null,512),[[_,m.value]]),e("div",{class:p(["w-5 h-5 border-2 border-gray-500 rounded-full flex items-center justify-center",m.value==="present"?"bg-green-500":"bg-white"])},[m.value==="present"?(d(),n("div",oe)):y("",!0)],2),t[16]||(t[16]=u(" Present "))],2),e("label",{class:p(["inline-flex items-center gap-2 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-red-800 dark:text-red-100 rounded cursor-pointer",{"!bg-red-500 !text-white":m.value==="absent"}])},[k(e("input",{type:"radio",class:"sr-only",name:"markAllAs",value:"absent","onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s)},null,512),[[_,m.value]]),e("div",{class:p(["w-5 h-5 border-2 border-gray-500 rounded-full flex items-center justify-center",m.value==="absent"?"bg-red-500":"bg-white"])},[m.value==="absent"?(d(),n("div",ne)):y("",!0)],2),t[17]||(t[17]=u(" Absent "))],2),e("label",{class:p(["inline-flex items-center gap-2 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-yellow-800 dark:text-yellow-100 rounded cursor-pointer",{"!bg-yellow-500 !text-white":m.value==="permission"}])},[k(e("input",{type:"radio",class:"sr-only",name:"markAllAs",value:"permission","onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s)},null,512),[[_,m.value]]),e("div",{class:p(["w-5 h-5 border-2 border-gray-500 rounded-full flex items-center justify-center",m.value==="permission"?"bg-yellow-500":"bg-white"])},[m.value==="permission"?(d(),n("div",de)):y("",!0)],2),t[18]||(t[18]=u(" Permission "))],2)])])]),e("div",ie,[e("table",ue,[t[19]||(t[19]=e("thead",{class:"bg-gray-100 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-4 py-2 min-w-[120px]"},"Student"),e("th",{class:"px-2 py-2 text-center min-w-[35px] sm:min-w-[35px]"},[e("span",{class:"block sm:hidden"},"P"),e("span",{class:"hidden sm:block"},"Present")]),e("th",{class:"px-2 py-2 text-center min-w-[35px] sm:min-w-[35px]"},[e("span",{class:"block sm:hidden"},"A"),e("span",{class:"hidden sm:block"},"Absent")]),e("th",{class:"px-2 py-2 text-center min-w-[35px] sm:min-w-[35px]"},[e("span",{class:"block sm:hidden"},"Per"),e("span",{class:"hidden sm:block"},"Permission")])])],-1)),e("tbody",null,[(d(!0),n(E,null,O(w.students,s=>(d(),n("tr",{key:s.id,class:"border-t border-gray-200 dark:border-gray-700"},[e("td",me,r(s.firstName)+" "+r(s.middleName)+" "+r(s.lastName),1),e("td",pe,[e("label",{class:p(["inline-flex items-center justify-center w-full bg-gray-200 dark:bg-gray-700 py-4 rounded-lg cursor-pointer",{"!bg-green-500":a.value[s.id]==="present"}])},[k(e("input",{type:"radio",class:"sr-only",name:`attendance_${s.id}`,value:"present","onUpdate:modelValue":v=>a.value[s.id]=v},null,8,ce),[[_,a.value[s.id]]]),e("div",{class:p(["w-5 h-5 border-2 border-gray-500 rounded-full flex items-center justify-center",a.value[s.id]==="present"?"bg-green-500":"bg-white"])},[a.value[s.id]==="present"?(d(),n("div",ge)):y("",!0)],2)],2)]),e("td",ye,[e("label",{class:p(["inline-flex items-center justify-center w-full bg-gray-200 dark:bg-gray-700 py-4 rounded-lg cursor-pointer",{"!bg-red-500":a.value[s.id]==="absent"}])},[k(e("input",{type:"radio",class:"sr-only",name:`attendance_${s.id}`,value:"absent","onUpdate:modelValue":v=>a.value[s.id]=v},null,8,xe),[[_,a.value[s.id]]]),e("div",{class:p(["w-5 h-5 border-2 border-gray-500 rounded-full flex items-center justify-center",a.value[s.id]==="absent"?"bg-red-500":"bg-white"])},[a.value[s.id]==="absent"?(d(),n("div",be)):y("",!0)],2)],2)]),e("td",ve,[e("label",{class:p(["inline-flex items-center justify-center w-full bg-gray-200 dark:bg-gray-700 py-4 rounded-lg cursor-pointer",{"!bg-yellow-500":a.value[s.id]==="permission"}])},[k(e("input",{type:"radio",class:"sr-only",name:`attendance_${s.id}`,value:"permission","onUpdate:modelValue":v=>a.value[s.id]=v},null,8,fe),[[_,a.value[s.id]]]),e("div",{class:p(["w-5 h-5 border-2 border-gray-500 rounded-full flex items-center justify-center",a.value[s.id]==="permission"?"bg-yellow-500":"bg-white"])},[a.value[s.id]==="permission"?(d(),n("div",ke)):y("",!0)],2)],2)])]))),128))])])]),e("div",we,[g(C,{onClick:z},{default:f(()=>t[20]||(t[20]=[u("Submit")])),_:1,__:[20]}),g(C,{onClick:T,class:"bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-white"},{default:f(()=>t[21]||(t[21]=[u("Cancel")])),_:1,__:[21]})])])):(d(),n("div",he,[e("div",_e,[g(C,{onClick:P},{default:f(()=>[u(r(A.value?"Cancel":"Add Class Session"),1)]),_:1})]),e("div",Ae,[e("table",Ce,[t[29]||(t[29]=e("thead",{class:"bg-gray-100 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"text-left px-4 py-2 font-medium text-sm text-gray-800 dark:text-gray-200"}," Date @Start Time "),e("th",{class:"text-left px-4 py-2 font-medium text-sm text-gray-800 dark:text-gray-200 w-24"}," Type "),e("th",{class:"text-left px-4 py-2 font-medium text-sm text-gray-800 dark:text-gray-200 w-36"}," Status "),e("th",{class:"text-left px-4 py-2 font-medium text-sm text-gray-800 dark:text-gray-200"}," Actions ")])],-1)),e("tbody",null,[w.classSessions.length>0?(d(!0),n(E,{key:0},O(w.classSessions,(s,v)=>{var j;return d(),n("tr",{key:s.id,class:p([v%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","border-b border-gray-300 dark:border-gray-600"])},[e("td",Ve,r(s.date)+" @"+r(s.startTime),1),e("td",Se,r(s.type),1),e("td",Te,[e("span",je,r(s.status),1)]),e("td",De,[e("button",{onClick:H=>$(s),class:p(["flex items-center justify-center px-3 py-1 text-xs font-medium text-gray-800 dark:text-gray-200 bg-gray-200 dark:bg-gray-600 rounded hover:bg-gray-300 dark:hover:bg-gray-500",{"bg-green-500 hover:bg-green-600 dark:bg-green-600 dark:hover:bg-green-700":s.attendances.length==0}])},[t[22]||(t[22]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)),u(" "+r(((j=s.attendances)==null?void 0:j.length)>0?"Update Attendance":"Take Attendance"),1)],10,Ue),e("button",{onClick:H=>B(s),class:"flex items-center justify-center px-3 py-1 text-xs font-medium text-gray-800 dark:text-gray-200 bg-gray-200 dark:bg-gray-600 rounded hover:bg-gray-300 dark:hover:bg-gray-500"},t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10l4.553 2.276A2 2 0 0119 14.618V20a2 2 0 01-2 2h-8a2 2 0 01-2-2v-5.382a2 2 0 01.447-1.342L9 10m6-6h.01"})],-1),u(" Details ")]),8,Ne)])],2)}),128)):(d(),n("tr",Ee,t[24]||(t[24]=[e("td",{colspan:"3",class:"text-center px-4 py-6 text-sm text-gray-500 dark:text-gray-300"}," No sessions set. ",-1)]))),g(q,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"-translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"-translate-y-2 opacity-0"},{default:f(()=>[A.value?(d(),n("tr",Oe,[e("td",qe,[t[25]||(t[25]=e("div",null,"Start date and time",-1)),g(i(M),{modelValue:i(l).start_date_time,"onUpdate:modelValue":t[3]||(t[3]=s=>i(l).start_date_time=s),showTime:"",placeholder:"Select Start Date & Time",class:"w-full"},null,8,["modelValue"]),t[26]||(t[26]=u(" - ")),t[27]||(t[27]=e("div",null,"End time",-1)),g(i(M),{modelValue:i(l).end_time,"onUpdate:modelValue":t[4]||(t[4]=s=>i(l).end_time=s),showTime:"",minDate:F.value,maxDate:I.value,placeholder:"Select End Time",class:"w-full"},null,8,["modelValue","minDate","maxDate"]),i(l).errors.date_time?(d(),n("div",Me,r(i(l).errors.date_time),1)):y("",!0)]),e("td",Pe,[g(i(G),{modelValue:i(l).type,"onUpdate:modelValue":t[5]||(t[5]=s=>i(l).type=s),options:[{label:"In-person",value:"in-person"},{label:"Online",value:"online"}],"option-label":"label","option-value":"value",placeholder:"Select Type",class:"w-full"},null,8,["modelValue"]),i(l).errors.type?(d(),n("div",Be,r(i(l).errors.type),1)):y("",!0)]),e("td",$e,[k(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>i(l).is_complete=s),type:"checkbox"},null,512),[[Y,i(l).is_complete]]),t[28]||(t[28]=e("label",{for:"isCompleted"},"Is Completed",-1)),i(l).errors.is_complete?(d(),n("div",Fe,r(i(l).errors.is_complete),1)):y("",!0)]),e("td",Ie,[g(C,{class:"mt-2 sm:mt-0",disabled:i(l).processing,onClick:L},{default:f(()=>[u(r(i(l).processing?"Saving...":"Save"),1)]),_:1},8,["disabled"])])])):y("",!0)]),_:1})])])])]))]}),_:1})]))}};export{st as default};
