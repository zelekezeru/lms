import{c as n,o,a as t,b as U,r as v,C as G,d as B,w as C,t as a,F as _,e as w,n as $,f as M,g as A,v as S,h as N,i as y,u as i,T as E,j as F,P as L,W as z}from"./app-E41KnvMz.js";import{A as Y}from"./AppLayout-Dveg3AGs.js";import{S as h}from"./sweetalert2.esm.all-B0Dix5B2.js";/* empty css                        */import{_ as k}from"./TextInput-B5Xe7Q1_.js";import{P as J}from"./PrimaryButton-BpoCAYrn.js";import{r as K}from"./CogIcon-ti6x-lAX.js";import{r as Q}from"./PencilIcon-BHpN7tCR.js";import{r as Z}from"./PlusCircleIcon-Zcuocycx.js";import"./XMarkIcon-DauyK3SM.js";/* empty css                                                                  */import"./_plugin-vue_export-helper-DlAUqK2U.js";function X(u,d){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M8.603 3.799A4.49 4.49 0 0 1 12 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 0 1 3.498 1.307 4.491 4.491 0 0 1 1.307 3.497A4.49 4.49 0 0 1 21.75 12a4.49 4.49 0 0 1-1.549 3.397 4.491 4.491 0 0 1-1.307 3.497 4.491 4.491 0 0 1-3.497 1.307A4.49 4.49 0 0 1 12 21.75a4.49 4.49 0 0 1-3.397-1.549 4.49 4.49 0 0 1-3.498-1.306 4.491 4.491 0 0 1-1.307-3.498A4.49 4.49 0 0 1 2.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 0 1 1.307-3.497 4.49 4.49 0 0 1 3.497-1.307Zm7.007 6.387a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function I(u,d){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z","clip-rule":"evenodd"}),t("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})])}function ee(u,d){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M2.25 2.25a.75.75 0 0 0 0 1.5H3v10.5a3 3 0 0 0 3 3h1.21l-1.172 3.513a.75.75 0 0 0 1.424.474l.329-.987h8.418l.33.987a.75.75 0 0 0 1.422-.474l-1.17-3.513H18a3 3 0 0 0 3-3V3.75h.75a.75.75 0 0 0 0-1.5H2.25Zm6.04 16.5.5-1.5h6.42l.5 1.5H8.29Zm7.46-12a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0v-6Zm-3 2.25a.75.75 0 0 0-1.5 0v3.75a.75.75 0 0 0 1.5 0V9Zm-3 2.25a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0v-1.5Z","clip-rule":"evenodd"})])}const te={class:"max-w-5xl mx-auto p-6"},re={class:"text-3xl font-semibold mb-6 text-gray-900 dark:text-gray-100 text-center"},se={class:"flex justify-center space-x-4 mb-6 border-b border-gray-200 dark:border-gray-700"},ae=["onClick"],oe={class:"bg-white dark:bg-gray-800 shadow rounded-xl p-6 border dark:border-gray-700"},le={class:"grid grid-cols-2 gap-2"},ne={class:"flex flex-col"},de={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},ie={class:"flex flex-col"},ue={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},ce={class:"flex flex-col"},ge={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},ye={class:"flex flex-col"},xe={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},me={class:"flex flex-col"},pe={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},fe={class:"overflow-x-auto"},be={class:"mt-4 border-t border-b border-gray-300 dark:border-gray-600 pt-2 pb-4"},ve={class:"overflow-x-auto"},he={key:0,class:"overflow-x-auto mt-6"},ke={class:"min-w-full divide-y divide-gray-200 border rounded shadow-sm bg-white dark:bg-gray-900"},_e={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold text-gray-700 dark:text-gray-200"},we={class:"flex items-center justify-between"},Ve=["onClick"],Ce={class:"px-4 py-2 text-left"},Ae={class:"px-4 py-2 border-gray-300 dark:border-gray-600"},Se={class:"px-4 py-2"},Ne={key:0},Pe=["value","onInput"],We={key:1},Be={key:0,class:"text-gray-900 dark:text-gray-100"},$e={key:1,class:"text-gray-400"},Fe={class:"px-4 py-2 border-gray-300 dark:border-gray-600"},Ze={class:"px-4 py-2 border-gray-300 dark:border-gray-600"},je={colspan:"100%",class:"px-4 py-3 text-center bg-gray-50 dark:bg-gray-800 border-t border-gray-300 dark:border-gray-600"},De={class:"relative group inline-block"},He={class:"flex items-center justify-between mb-4"},Te={class:"overflow-x-auto"},Re={class:"mt-8 border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},qe={class:"overflow-x-auto"},Oe={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},Ue={class:"bg-gray-50 dark:bg-gray-700"},Ge={class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"},Me={class:"w-60 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},Ee={class:"w-40 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},Le={class:"w-60 px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ze={key:0,class:"bg-gray-50 dark:bg-gray-700 border-b border-gray-300 dark:border-gray-600"},Ye={class:"px-4 py-2"},Je={class:"px-3 py-2"},Ke={class:"px-5 py-2"},Qe={class:"flex items-center space-x-6"},Xe={class:"grid grid-cols-2 gap-2"},Ie={class:"flex flex-col"},et={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},tt={class:"flex flex-col"},xt={__name:"SectionCourse",props:{section:{type:Object,required:!0},course:{type:Object,required:!0},semester:{type:Object,required:!0},weights:{type:Array,required:!0},instructor:{type:Object,required:!0}},setup(u){const d=u,P=U(()=>d.weights.reduce((s,e)=>s+(parseFloat(e.point)||0),0)),j=[{key:"details",label:"Details",icon:K},{key:"results",label:"results",icon:I},{key:"weights",label:"weights",icon:ee},{key:"grades",label:"Grades",icon:X}];v({data:[],meta:{current_page:1,per_page:10}});const g=G({name:"",point:"",description:"",course_id:d.course.id,section_id:d.section.id,semester_id:d.semester.id}),f=v("details");v(!1);const V=v(!1),b=v(null),m=v({}),D=s=>{b.value=s,m.value[s]||(m.value[s]={}),setTimeout(()=>{const e=document.querySelector(`[data-weight-id="${s}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)},W=s=>{let e=0;return d.weights.forEach(r=>{var c;if(b.value===r.id){const l=parseFloat((c=m.value[r.id])==null?void 0:c[s]);isNaN(l)||(e+=l)}else{const l=r.results.find(x=>x.student_id===s);if(l){const x=parseFloat(l.point);isNaN(x)||(e+=x)}}}),e.toFixed(2)},H=s=>{const e=parseFloat(W(s));return isNaN(e)?"N/A":e>=94?"A (4.0)":e>=90?"A- (3.7)":e>=87?"B+ (3.3)":e>=84?"B (3.0)":e>=80?"B- (2.7)":e>=77?"C+ (2.3)":e>=74?"C (2.0)":e>=70?"C- (1.7)":e>=67?"D+ (1.3)":e>=64?"D (1.0)":e>=60?"D- (0.7)":"F (0.0)"},T=(s,e)=>{var c;if(((c=m.value[e])==null?void 0:c[s])!==void 0)return m.value[e][s];const r=d.weights.find(l=>l.id===e);if(r&&r.results){const l=r.results.find(x=>x.student_id===s);return l?l.point:""}return""},R=(s,e,r)=>{m.value[e]||(m.value[e]={}),m.value[e][s]=r},q=()=>{const s=b.value,e=d.weights.find(l=>l.id===s);if(!s||!m.value[s]){h.fire({icon:"warning",title:"No active weight",text:"Please activate a weight column before submitting."});return}const r=m.value[s],c=[];for(const[l,x]of Object.entries(r)){const p=parseFloat(x);if(isNaN(p)||p<0||p>e.point){h.fire({icon:"error",title:"Invalid Input",text:`Please enter a valid point between 0 and ${e.point} for all students.`});return}c.push({weight_id:s,student_id:parseInt(l),point:p})}if(c.length===0){h.fire({icon:"info",title:"Nothing to Submit",text:"You haven't entered any valid results."});return}z.post(route("results.store"),{results:c},{onSuccess:()=>{h.fire({icon:"success",title:"Saved!",text:`Results for "${e.name}" saved successfully.`,timer:2e3,showConfirmButton:!1}),b.value=null},onError:()=>{h.fire({icon:"error",title:"Error",text:"Something went wrong while saving. Please try again."})}})},O=()=>{g.post(route("weights.store",{redirectTo:route("assessments.section_course",{course:d.course.id,section:d.section.id}),params:{section:d.section.id,course:d.course.id}}),{onSuccess:()=>{h.fire("Added!","Weight added successfully.","success"),V.value=!1,g.reset()}})};return(s,e)=>(o(),B(Y,null,{default:C(()=>[t("div",te,[t("h1",re,a(u.section.name)+" - "+a(u.course.name)+" Course Assessments ",1),t("nav",se,[(o(),n(_,null,w(j,r=>t("button",{key:r.key,onClick:c=>f.value=r.key,class:$(["flex items-center px-4 py-2 space-x-2 text-sm font-medium transition",f.value===r.key?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"])},[(o(),B(M(r.icon),{class:"w-5 h-5"})),t("span",null,a(r.label),1)],10,ae)),64))]),t("div",oe,[A(t("div",le,[t("div",ne,[e[7]||(e[7]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Section",-1)),t("span",de,a(u.section.name),1)]),t("div",ie,[e[8]||(e[8]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Program name",-1)),t("span",ue,a(u.section.program.name),1)]),t("div",ce,[e[9]||(e[9]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Course",-1)),t("span",ge,a(u.course.name),1)]),t("div",ye,[e[10]||(e[10]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Instructor",-1)),t("span",xe,a(u.instructor.user.name),1)]),t("div",me,[e[11]||(e[11]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Credit Hours",-1)),t("span",pe,a(u.course.credit_hours),1)])],512),[[S,f.value==="details"]]),A(t("div",null,[e[15]||(e[15]=t("div",{class:"flex items-center justify-center mb-2"},[t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Assessment Results ")],-1)),t("div",fe,[t("div",be,[t("div",ve,[f.value==="results"?(o(),n("div",he,[t("table",ke,[t("thead",_e,[t("tr",null,[e[12]||(e[12]=t("th",{class:"px-4 py-2 text-left"},"#",-1)),e[13]||(e[13]=t("th",{class:"px-4 py-2 text-left"},"Student",-1)),(o(!0),n(_,null,w(d.weights,r=>(o(),n("th",{key:r.id,class:"px-4 py-2 text-center"},[t("div",we,[t("span",null,a(r.name)+" ("+a(r.point)+"pt)",1),b.value?N("",!0):(o(),n("button",{key:0,onClick:c=>D(r.id),class:"ml-2 text-xs text-white bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded"},[y(i(Q),{class:"w-5 h-5"})],8,Ve))])]))),128)),t("th",Ce,"Total ("+a(P.value)+"pt)",1),e[14]||(e[14]=t("th",{class:"px-4 py-2 text-left"},"Grade",-1))])]),t("tbody",null,[(o(!0),n(_,null,w(u.section.students,(r,c)=>(o(),n("tr",{key:r.id,class:"border-t border-gray-200 dark:border-gray-700"},[t("td",Ae,a(c+1),1),t("td",Se,a(r.first_name)+" "+a(r.middle_name),1),(o(!0),n(_,null,w(d.weights,l=>{var x;return o(),n("td",{key:l.id,class:"px-4 py-2 text-center border-gray-300 dark:border-gray-600"},[b.value===l.id?(o(),n("span",Ne,[t("input",{type:"number",step:"0.01",min:"0",max:"100",class:"px-1 py-0.5 h-7 rounded-md dark:bg-gray-800 dark:text-gray-100 text-center",value:T(r.id,l.id),onInput:p=>R(r.id,l.id,p.target.value)},null,40,Pe)])):(o(),n("span",We,[l.results.some(p=>p.student_id===r.id)?(o(),n("span",Be,a((x=l.results.find(p=>p.student_id===r.id))==null?void 0:x.point),1)):(o(),n("span",$e,"N/A"))]))])}),128)),t("td",Fe,a(W(r.id)),1),t("td",Ze,a(H(r.id)),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",je,[t("div",De,[b.value?(o(),n("button",{key:0,onClick:q,class:"text-sm px-4 py-2 rounded text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Save Results ")):N("",!0)])])])])])])):N("",!0)])])])],512),[[S,f.value==="results"]]),A(t("div",null,[t("div",He,[e[17]||(e[17]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Assessment Weights ",-1)),t("button",{onClick:e[0]||(e[0]=r=>V.value=!V.value),class:"flex items-center space-x-6 text-indigo-600 hover:text-indigo-800 transition"},[y(i(Z),{class:"w-8 h-8"}),e[16]||(e[16]=t("span",{class:"hidden sm:inline"},"Add Weight",-1))])]),t("div",Te,[t("div",Re,[t("div",qe,[t("table",Oe,[t("thead",null,[t("tr",Ue,[e[18]||(e[18]=t("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Weight ",-1)),t("th",Ge," Point ( "+a(P.value)+"/ 100%) ",1),e[19]||(e[19]=t("th",{class:"w-80 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Description ",-1))])]),t("tbody",null,[(o(!0),n(_,null,w(u.weights,(r,c)=>(o(),n("tr",{key:r.id,class:$([c%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","border-b border-gray-300 dark:border-gray-600"])},[t("td",Me,a(r.name),1),t("td",Ee,a(r.point),1),t("td",Le,a(r.description),1)],2))),128)),y(E,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:C(()=>[V.value?(o(),n("tr",ze,[y(k,{modelValue:i(g).course_id,"onUpdate:modelValue":e[1]||(e[1]=r=>i(g).course_id=r),type:"text",value:d.course.id,readonly:"",hidden:""},null,8,["modelValue","value"]),y(k,{modelValue:i(g).section_id,"onUpdate:modelValue":e[2]||(e[2]=r=>i(g).section_id=r),type:"text",value:d.section.id,readonly:"",hidden:""},null,8,["modelValue","value"]),y(k,{modelValue:i(g).semester_id,"onUpdate:modelValue":e[3]||(e[3]=r=>i(g).semester_id=r),type:"text",value:d.semester.id,readonly:"",hidden:""},null,8,["modelValue","value"]),t("td",Ye,[y(k,{modelValue:i(g).name,"onUpdate:modelValue":e[4]||(e[4]=r=>i(g).name=r),type:"text",placeholder:"Title",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"])]),t("td",Je,[y(k,{modelValue:i(g).point,"onUpdate:modelValue":e[5]||(e[5]=r=>i(g).point=r),type:"number",placeholder:"Weight Point",min:"0",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"])]),t("td",Ke,[t("div",Qe,[y(k,{modelValue:i(g).description,"onUpdate:modelValue":e[6]||(e[6]=r=>i(g).description=r),type:"text",placeholder:"Description",class:"w-full px-2 py-1 h-9 border rounded-md dark:bg-gray-800 dark:text-gray-100"},null,8,["modelValue"]),y(J,{class:"px-4 py-1 h-9 bg-green-500 text-white rounded-md hover:bg-green-600",onClick:O},{default:C(()=>e[20]||(e[20]=[F(" Save ")])),_:1})])])])):N("",!0)]),_:1})])])])])])],512),[[S,f.value==="weights"]]),A(t("div",Xe,[t("div",Ie,[e[21]||(e[21]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Grades",-1)),t("span",et,a(u.section.grades),1)]),t("div",tt,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Actions",-1)),y(i(L),{href:s.route("grades.create",{section:u.section.id}),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:C(()=>[y(i(Z),{class:"w-5 h-5 mr-2"}),e[22]||(e[22]=F(" Add Grade "))]),_:1},8,["href"])])],512),[[S,f.value==="grades"]])])])]),_:1}))}};export{xt as default};
