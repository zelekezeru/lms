import{c as l,o as n,a as t,d as k,r as C,x as E,i as _,h as x,k as p,u as o,F as h,f as v,w,m as $,t as a,s as B,n as b,S,W as U}from"./app-BL6-tqt2.js";import{S as N}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as I}from"./Modal-BuJ6TQba.js";import{s as L}from"./index-BAmXUwvN.js";import{r as V}from"./PlusCircleIcon-B13ccyiW.js";import{r as O}from"./BookmarkIcon-B-DlMk1U.js";import{r as W}from"./XCircleIcon-BF1iGDOF.js";import{r as Z}from"./CheckCircleIcon-D0-bKTJd.js";import{r as z}from"./EyeIcon-BJXj7OSY.js";import"./index-CB-btySY.js";import"./index-qLQr3bSV.js";import"./index-l8oOmhTG.js";import"./index-OHtlf0wv.js";import"./index-BHl0PnkA.js";import"./index-DVXESIR3.js";function P(i,y){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm3 10.5a.75.75 0 0 0 0-1.5H9a.75.75 0 0 0 0 1.5h6Z","clip-rule":"evenodd"})])}const R={class:"flex items-center justify-between mb-4"},Y={class:"space-x-4"},J={class:"flex items-center gap-3 text-green-600"},K={key:0,class:"text-center"},Q={key:1,class:"flex flex-col"},X={class:"mt-10 min-w-[100px] overflow-auto border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},tt={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},et={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},st={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},rt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},dt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},at={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},ot={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},lt={class:"px-4 py-2 text-sm"},nt=["onClick"],it={class:"flex items-center gap-3 mt-8 text-green-600"},ut={key:2,class:"text-center"},xt={key:3,class:"flex flex-col"},yt={class:"mt-8 min-w-[100px] overflow-auto border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},gt={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},mt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ct={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},pt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ft={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},bt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},kt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ht={class:"px-4 py-2 text-sm"},vt=["onClick"],wt={class:"flex items-center gap-3 mt-8 mb-6 text-green-600"},Ct={key:4,class:"text-center"},_t={key:5,class:"flex flex-col"},St={class:"mt-8 min-w-[100px] overflow-auto border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},Nt={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},At={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Et={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},$t={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Bt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Vt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},Dt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Mt={class:"px-4 py-2 text-sm"},Gt={class:"flex items-center text-green-600 hover:text-green-800 dark:text-green-300 dark:hover:text-green-400"},Tt={class:"px-8 py-6 bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 rounded-md"},Ft={class:"text-lg font-semibold mb-4"},Ht=["value"],jt=["value"],qt={class:"flex justify-end mt-4"},Ut=["disabled"],re={__name:"ShowCourses",props:{student:{type:Object,required:!0},courses:{type:Array,required:!0},studyModes:{type:Array,required:!1,default:()=>[]}},setup(i){const y=i,D=k(()=>y.student.enrollments.filter(r=>r.status=="Enrolled"||r.status=="Completed").map(r=>r.course.id)),M=k(()=>y.courses.filter(r=>!D.value.includes(r.id))),f=C(!1);C(!1);const u=E({course_id:null,section_id:null});E({});const G=k(()=>new Set(y.student.enrollments.filter(r=>r.status=="Enrolled").map(r=>r.course.id)));k(()=>y.courses.filter(r=>!G.value.has(r.id)).map(r=>({...r,label:r.name})));const T=C(y.studyModes[0].id||null),A=k(()=>{var e;const r=y.studyModes.find(s=>s.id===T.value);return((e=r==null?void 0:r.sections)==null?void 0:e.filter(s=>s.courses.map(d=>d.id).includes(u.course_id)))||[]}),F=()=>{u.reset(),u.clearErrors()},H=()=>{u.post(route("enrollments-student.add",{student:y.student.id}),{onSuccess:()=>{N.fire("Added!","Course added successfully.","success"),f.value=!1,F()}})},j=r=>{u.course_id=r.course.id,f.value=!0},q=r=>{N.fire({title:"Are you sure?",text:"This action will drop the course from the student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, drop it!"}).then(e=>{e.isConfirmed&&U.post(route("enrollments-student.drop",{student:y.student.id}),{enrollment_id:r},{onSuccess:()=>{N.fire("Dropped!","Course dropped successfully.","success")}})})};return(r,e)=>(n(),l("div",null,[t("div",R,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Courses ",-1)),t("div",Y,[t("button",{onClick:e[0]||(e[0]=s=>f.value=!0),class:"flex items-center text-green-600 hover:text-green-800"},[x(o(V),{class:"w-6 h-6 mr-1"}),e[6]||(e[6]=p(" Add Course "))])])]),t("div",J,[x(o(O),{class:"w-6 h-6"}),e[8]||(e[8]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Enrolled Courses ",-1))]),i.student.enrollments.filter(s=>s.status=="Enrolled")?i.student.enrollments.filter(s=>s.status=="Enrolled")?(n(),l("div",Q,[t("div",X,[t("table",tt,[e[11]||(e[11]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(n(!0),l(h,null,v(i.student.enrollments.filter(s=>s.status=="Enrolled"),(s,d)=>{var g,m;return n(),l("tr",{key:s.id,class:b(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",et,a(d+1),1),t("td",st,[x(o(S),{href:r.route("courses.show",{course:s.course.id})},{default:w(()=>[p(a(s.course.name),1)]),_:2},1032,["href"])]),t("td",rt,a(s.course.code),1),t("td",dt,a(s.course.credit_hours),1),t("td",at,a(((m=(g=i.student.grades)==null?void 0:g.find(c=>c.course_id===s.course.id))==null?void 0:m.grade_letter)??"Not Graded"),1),t("td",ot,[t("span",{class:b(s.status==="Enrolled"?"text-green-500":"text-red-500")},a(s.status),3)]),t("td",lt,[t("button",{onClick:c=>q(s.id),class:"flex items-center text-red-600 hover:text-red-800"},[x(o(P),{class:"w-4 h-4 mr-1"}),e[10]||(e[10]=p(" Drop "))],8,nt)])],2)}),128))])])])])):_("",!0):(n(),l("div",K,e[9]||(e[9]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No Enrolled Courses For This Semester. ",-1)]))),t("div",it,[x(o(W),{class:"w-6 h-6"}),e[12]||(e[12]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Dropped Courses ",-1))]),i.student.enrollments.filter(s=>s.status=="Dropped").length==0?(n(),l("div",ut,e[13]||(e[13]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"No Dropped Courses.",-1)]))):i.student.enrollments.filter(s=>s.status=="Dropped")?(n(),l("div",xt,[t("div",yt,[t("table",gt,[e[15]||(e[15]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(n(!0),l(h,null,v(i.student.enrollments.filter(s=>s.status=="Dropped"),(s,d)=>{var g,m;return n(),l("tr",{key:s.id,class:b(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",mt,a(d+1),1),t("td",ct,[x(o(S),{href:r.route("courses.show",{course:s.course.id})},{default:w(()=>[p(a(s.course.name),1)]),_:2},1032,["href"])]),t("td",pt,a(s.course.code),1),t("td",ft,a(s.course.credit_hours),1),t("td",bt,a(((m=(g=i.student.grades)==null?void 0:g.find(c=>c.course_id===s.course.id))==null?void 0:m.grade_letter)??"Not Graded"),1),t("td",kt,[t("span",{class:b(s.status==="Enrolled"?"text-green-500":"text-red-500")},a(s.status),3)]),t("td",ht,[t("button",{onClick:c=>j(s),class:"flex items-center text-green-600 hover:text-green-700"},[x(o(V),{class:"w-4 h-4 mr-1"}),e[14]||(e[14]=p(" Add Back "))],8,vt)])],2)}),128))])])])])):_("",!0),t("div",wt,[x(o(Z),{class:"w-6 h-6"}),e[16]||(e[16]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Completed Courses ",-1))]),i.student.enrollments.filter(s=>s.status=="Completed").length==0?(n(),l("div",Ct,e[17]||(e[17]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No completed Courses. ",-1)]))):i.student.enrollments.filter(s=>s.status=="completed")?(n(),l("div",_t,[t("div",St,[t("table",Nt,[e[19]||(e[19]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(n(!0),l(h,null,v(i.student.enrollments.filter(s=>s.status=="Completed"),(s,d)=>{var g,m;return n(),l("tr",{key:s.id,class:b(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",At,a(d+1),1),t("td",Et,[x(o(S),{href:r.route("courses.show",{course:s.course.id})},{default:w(()=>[p(a(s.course.name),1)]),_:2},1032,["href"])]),t("td",$t,a(s.course.code),1),t("td",Bt,a(s.course.credit_hours),1),t("td",Vt,a(((m=(g=i.student.grades)==null?void 0:g.find(c=>c.course_id===s.course.id))==null?void 0:m.grade_letter)??"Not Graded"),1),t("td",Dt,[t("span",{class:b(s.status==="Enrolled"?"text-green-500":"text-red-500")},a(s.status),3)]),t("td",Mt,[t("button",Gt,[x(o(z),{class:"w-4 h-4 mr-1"}),e[18]||(e[18]=p(" View Results "))])])],2)}),128))])])])])):_("",!0),x(I,{show:f.value,onClose:e[5]||(e[5]=s=>f.value=!1)},{default:w(()=>{var s;return[t("div",Tt,[t("h3",Ft," Enroll "+a(i.student.name)+" to "+a(o(u).course_id?(s=i.courses.find(d=>d.id==o(u).course_id))==null?void 0:s.name:"New Course"),1),e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Course ",-1)),e[23]||(e[23]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-2"}," Choose a course the student hasn’t taken yet. ",-1)),$(t("select",{"onUpdate:modelValue":e[1]||(e[1]=d=>o(u).course_id=d),class:"w-full mb-4 px-3 py-2 border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 rounded-md shadow-sm focus:ring focus:ring-indigo-500 transition"},[e[20]||(e[20]=t("option",{value:null,disabled:""},"Select Course",-1)),(n(!0),l(h,null,v(M.value,d=>(n(),l("option",{key:d.id,value:d.id},a(d.name),9,Ht))),128))],512),[[B,o(u).course_id]]),e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Study Mode ",-1)),e[25]||(e[25]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-2"}," Select how the course will be attended (e.g. regular, weekend). ",-1)),$(t("select",{"onUpdate:modelValue":e[2]||(e[2]=d=>o(u).course_id=d),class:"w-full mb-4 px-3 py-2 border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 rounded-md shadow-sm focus:ring focus:ring-indigo-500 transition"},[e[21]||(e[21]=t("option",{value:null,disabled:""},"Select Study Mode",-1)),(n(!0),l(h,null,v(y.studyModes,d=>(n(),l("option",{key:d.id,value:d.id},a(d.name),9,jt))),128))],512),[[B,o(u).course_id]]),e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Section ",-1)),e[27]||(e[27]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-2"}," Pick the section where the student will take the given course in the given study mode. ",-1)),x(o(L),{modelValue:o(u).section_id,"onUpdate:modelValue":e[3]||(e[3]=d=>o(u).section_id=d),options:A.value,placeholder:`This course is available in (${A.value.length})`,"empty-message":"no available section!","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options","placeholder"]),t("div",qt,[t("button",{onClick:H,disabled:o(u).processing,class:"bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded mr-3 transition"},a(o(u).processing?"Adding...":"Add"),9,Ut),t("button",{onClick:e[4]||(e[4]=d=>f.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded transition"}," Cancel ")])])]}),_:1},8,["show"])]))}};export{re as default};
