import{r as G,h as m,x as F,c as i,o as n,a as e,t as o,F as b,d as f,n as h}from"./app-CP-sxbNV.js";import{S as x}from"./sweetalert2.esm.all-89IKscqO.js";const N={class:"overflow-x-auto px-4 py-6"},q={key:0},L={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900"},A={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold"},B={class:"px-4 py-2"},O={class:"px-4 py-2"},P={class:"px-4 py-2"},j={class:"px-4 py-2 font-semibold"},C={class:"px-4 py-2"},D={colspan:"100%",class:"text-center py-4 bg-gray-50 dark:bg-gray-800"},E={key:1,class:"text-sm text-red-600 dark:text-red-400"},T={key:1},V={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900"},W={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold"},z={class:"px-4 py-2"},H={class:"px-4 py-2"},U={class:"px-4 py-2"},I={class:"px-4 py-2 font-semibold"},J={class:"px-4 py-2"},Q={__name:"ShowGrades",props:{section:{type:Object,required:!0},course:{type:Object,required:!0},semester:{type:Object,required:!0},weights:{type:Array,required:!0},instructor:{type:Object,required:!0},studentsList:{type:Object,required:!0}},setup(w){const d=w,k=G({id:1}),u=m(()=>d.weights.reduce((s,t)=>s+(parseFloat(t.point)||0),0)),c=F({grades:[]}),g=s=>{let t=0;return d.weights.forEach(r=>{const a=r.results.find(l=>l.student_id===s);t+=parseFloat((a==null?void 0:a.point)||0)}),t.toFixed(2)},p=s=>(s=parseFloat(s),isNaN(s)?"N/A":s>=94?"A":s>=90?"A-":s>=87?"B+":s>=84?"B":s>=80?"B-":s>=77?"C+":s>=74?"C":s>=70?"C-":s>=67?"D+":s>=64?"D":s>=60?"D-":"F"),v=()=>{const s=d.studentsList.map(t=>{const r=g(t.id);return{student_id:t.id,grade_point:r,grade_letter:p(r),grade_description:"",grade_scale:u.value.toString(),grade_complaint:!1,grade_comment:"",changed_grade:null,grade_status:"Pending",changed_by:null,user_id:k.value.id,year_id:d.semester.year_id,semester_id:d.semester.id,section_id:d.section.id,course_id:d.course.id}});c.grades=s,c.post(route("grades.store"),{onSuccess:()=>{x.fire("Success","Grades successfully submitted!","success"),c.reset()},onError:()=>{x.fire("Error","Failed to submit grades.","error")}})},S=m(()=>d.studentsList.every(s=>d.weights.every(t=>{var r;return(r=t.results)==null?void 0:r.some(a=>a.student_id===s.id&&a.point!==null&&a.point!==void 0)}))),_=s=>d.section.grades.find(t=>t.student_id===s);return(s,t)=>(n(),i("div",N,[!d.section.grades||d.section.grades.filter(r=>r.course_id===d.course.id).length===0?(n(),i("div",q,[t[3]||(t[3]=e("h2",{class:"text-xl font-bold mb-4"},"Grade Generation Form",-1)),e("table",L,[e("thead",A,[e("tr",null,[t[0]||(t[0]=e("th",{class:"px-4 py-2"},"#",-1)),t[1]||(t[1]=e("th",{class:"px-4 py-2 text-left"},"Student Name",-1)),e("th",B,"Total ("+o(u.value)+" pt)",1),t[2]||(t[2]=e("th",{class:"px-4 py-2"},"Grade",-1))])]),e("tbody",null,[(n(!0),i(b,null,f(d.studentsList,(r,a)=>(n(),i("tr",{key:r.id,class:h([a%2===0?"bg-white":"bg-gray-50","text-sm border-b"])},[e("td",O,o(a+1),1),e("td",P,o(r.first_name)+" "+o(r.middle_name),1),e("td",j,o(g(r.id)),1),e("td",C,o(p(g(r.id))),1)],2))),128))]),e("tfoot",null,[e("tr",null,[e("td",D,[S.value?(n(),i("button",{key:0,onClick:v,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded"}," Submit Grades ")):(n(),i("p",E," Please enter all required weight values before submitting grades. "))])])])])])):(n(),i("div",T,[t[7]||(t[7]=e("h2",{class:"text-xl font-bold mb-4"},"Submitted Grades",-1)),e("table",V,[e("thead",W,[e("tr",null,[t[4]||(t[4]=e("th",{class:"px-4 py-2"},"#",-1)),t[5]||(t[5]=e("th",{class:"px-4 py-2 text-left"},"Student Name",-1)),e("th",z,"Total ("+o(u.value)+" pt)",1),t[6]||(t[6]=e("th",{class:"px-4 py-2"},"Grade",-1))])]),e("tbody",null,[(n(!0),i(b,null,f(d.studentsList,(r,a)=>{var l,y;return n(),i("tr",{key:r.id,class:h([a%2===0?"bg-white":"bg-gray-50","text-sm border-b"])},[e("td",H,o(a+1),1),e("td",U,o(r.first_name)+" "+o(r.middle_name),1),e("td",I,o(((l=_(r.id))==null?void 0:l.grade_point)??"N/A"),1),e("td",J,o(((y=_(r.id))==null?void 0:y.grade_letter)??"N/A"),1)],2)}),128))])])]))]))}};export{Q as default};
