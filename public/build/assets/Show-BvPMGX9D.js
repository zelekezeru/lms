import{_ as S}from"./AppLayout-ac7lZFT-.js";import{r as B,x as V,q as D,d as b,o as u,w as x,a as t,t as i,g as m,u as o,S as h,i as p,n as A,c as y,F as T,e as M,h as v,W as N}from"./app-DUpuGMW7.js";import{S as c}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{s as Y}from"./index-xlQ8wuPF.js";import{s as k}from"./index-W-zkL_xk.js";import{r as z}from"./CheckCircleIcon-BZAV7eGs.js";import{r as $}from"./XCircleIcon-DHb2E-Y-.js";import{r as U}from"./PencilIcon-BCMqoEh1.js";import{r as E}from"./TrashIcon-D0fc0TZq.js";import"./ChevronDownIcon-P2bKzKKX.js";import"./AcademicCapIcon-DqZR7Ksu.js";import"./CogIcon-BRkh16qR.js";import"./ClockIcon-CAaTPcSV.js";import"./PlusIcon-BDQN_tFT.js";import"./LanguageToggle-BelgwU2H.js";import"./index-DsCgMSR2.js";import"./index-D20UFSOr.js";import"./index-Dn_IohPg.js";import"./index-e-ky9dHk.js";import"./index-CyXN4d0R.js";import"./index-B-eTIhaI.js";import"./index-DmEjII32.js";const L={class:"max-w-7xl mx-auto p-6"},O={class:"text-3xl font-bold text-center text-gray-900 dark:text-gray-100 mb-10"},W={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-xl shadow p-6 space-y-10"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},F={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},j={class:"mt-1 text-lg font-semibold text-gray-800 dark:text-gray-100"},R={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},I={class:"mt-1 text-lg font-semibold text-blue-600 hover:underline"},P={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},G={class:"mt-1 text-lg font-semibold text-gray-800 dark:text-gray-100"},H={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},J={class:"mt-1 text-lg font-semibold text-gray-800 dark:text-gray-100"},K={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900"},Q={class:"border-t pt-6 dark:border-gray-700"},X={class:"space-y-10"},Z={key:0,class:"text-gray-500 italic dark:text-gray-400"},ee={key:1,class:"space-y-6"},te={class:"text-base font-semibold mb-4 text-gray-800 dark:text-gray-100"},se={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},re={class:"text-center mt-4"},de={class:"flex justify-end pt-4 gap-5"},De={__name:"Show",props:{semester:{type:Object,required:!0},studyModes:{type:Array,required:!0}},setup(d){const l=d,g=B(l.semester.studyModes.map(r=>r.id)),a=V({study_modes:l.semester.studyModes.reduce((r,e)=>(r[e.id]={start_date:e.semester_start_date,end_date:e.semester_end_date},r),{})});D(g,r=>{a.study_modes=r.reduce((e,s)=>(e[s]={start_date:a.study_modes[s]?a.study_modes[s].start_date:l.semester.studyModes.find(n=>n.id==s)?l.semester.studyModes.find(n=>n.id==s).semester_start_date:l.semester.start_date,end_date:a.study_modes[s]?a.study_modes[s].end_date:l.semester.studyModes.find(n=>n.id==s)?l.semester.studyModes.find(n=>n.id==s).semester_end_date:l.semester.end_date},e),{})});const f=r=>{const e=r.getTimezoneOffset()*6e4;return new Date(r.valueOf()-e).toISOString().slice(0,-1)},w=()=>{c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, Revert My Changes!"}).then(r=>{r.isConfirmed&&(a.reset(),g.value=[])})},C=()=>{c.fire({title:"Are you sure?",text:"Your Changes Will Be Applied!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, Apply My Changes!"}).then(r=>{r.isConfirmed&&a.post(route("semesters.syncStudyModes",{semester:l.semester.id}),{preserveState:!1,onSuccess:()=>{c.fire("Success!","The semester has been updated.","success")}})})},_=r=>{c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&N.delete(route("semesters.destroy",{semester:r}),{onSuccess:()=>{c.fire("Deleted!","The semester has been deleted.","success")}})})};return(r,e)=>(u(),b(S,null,{default:x(()=>[t("div",L,[t("h1",O,i(d.semester.name)+" - "+i(d.semester.year.name),1),t("div",W,[t("div",q,[t("div",F,[e[2]||(e[2]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Semester Name",-1)),t("div",j,i(d.semester.name),1)]),t("div",R,[e[3]||(e[3]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Academic Year",-1)),t("div",I,[m(o(h),{href:r.route("years.show",{year:d.semester.year.id})},{default:x(()=>[p(i(d.semester.year.name),1)]),_:1},8,["href"])])]),t("div",P,[e[4]||(e[4]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Start Date",-1)),t("div",G,i(new Date(d.semester.start_date).toLocaleDateString()),1)]),t("div",H,[e[5]||(e[5]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"End Date",-1)),t("div",J,i(new Date(d.semester.end_date).toLocaleDateString()),1)]),t("div",K,[e[6]||(e[6]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Approval",-1)),t("div",{class:A(["mt-1 text-lg font-semibold",d.semester.is_approved?"text-green-600":"text-red-600"])},i(d.semester.is_approved?"Approved":"Not Approved"),3)])]),t("div",Q,[t("div",X,[t("div",null,[e[7]||(e[7]=t("h2",{class:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100"}," This semester is applied in... ",-1)),m(o(Y),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),options:d.studyModes,checkmark:"",optionLabel:"name","option-value":"id",filter:"",multiple:"",placeholder:"Select study modes",class:"w-full"},null,8,["modelValue","options"])]),t("div",null,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100"}," Pick duration in each study mode ",-1)),g.value.length===0?(u(),y("div",Z," No study mode selected ")):(u(),y("div",ee,[(u(!0),y(T,null,M(d.studyModes.filter(s=>g.value.includes(s.id)),s=>(u(),y("div",{key:s.id,class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700"},[t("h3",te,i(s.name),1),t("div",se,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"}," Start Date ",-1)),m(o(k),{modelValue:o(a).study_modes[s.id].start_date,"onUpdate:modelValue":n=>{o(a).study_modes[s.id].start_date=f(n)},"show-icon":"",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"}," End Date ",-1)),m(o(k),{modelValue:o(a).study_modes[s.id].end_date,"onUpdate:modelValue":n=>{o(a).study_modes[s.id].end_date=f(n)},"show-icon":"",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]))])]),t("div",re,[t("button",{onClick:C,class:"inline-flex items-center px-5 mr-3 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-sm transition duration-200"},[m(o(z),{class:"w-5 h-5 mr-2 -ml-1"}),e[11]||(e[11]=p(" Apply Changes "))]),t("button",{onClick:w,class:"inline-flex items-center px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-sm transition duration-200"},[m(o($),{class:"w-5 h-5 mr-2 -ml-1"}),e[12]||(e[12]=p(" Cancel Changes "))])])]),t("div",de,[r.userCan("update-semesters")?(u(),b(o(h),{key:0,href:r.route("semesters.edit",{semester:d.semester.id}),class:"inline-flex items-center space-x-2 text-blue-500 hover:text-blue-700"},{default:x(()=>[m(o(U),{class:"w-5 h-5"}),e[13]||(e[13]=t("span",null,"Edit",-1))]),_:1},8,["href"])):v("",!0),r.userCan("delete-semesters")?(u(),y("button",{key:1,onClick:e[1]||(e[1]=s=>_(d.semester.id)),class:"inline-flex items-center gap-2 text-red-600 hover:text-red-800 font-medium"},[m(o(E),{class:"w-5 h-5"}),e[14]||(e[14]=t("span",null,"Delete Semester",-1))])):v("",!0)])])])]),_:1}))}};export{De as default};
