import{c as n,o as i,a as t,m as k,r as N,x as B,h as v,g as x,i as g,u as l,t as r,F as _,e as w,w as h,n as f,S as C,W as I}from"./app-oxZXhdOW.js";import{S as A}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as L}from"./Modal-SzUZ4wQu.js";import{s as M}from"./index-h2zUZAih.js";import{s as O}from"./index-gWakqisN.js";import{r as G}from"./PlusCircleIcon-BusPPSJG.js";import{r as U}from"./ClockIcon-DA_QDRQn.js";import{r as W}from"./BookmarkIcon-BPXX7AFX.js";import{r as Z}from"./XCircleIcon-DYs-DiN7.js";import{r as z}from"./CheckCircleIcon-D5boS5Cs.js";import"./index-DrkAZooi.js";import"./index-bSZUspVt.js";import"./index-iPN-rL7A.js";import"./index-DzCLsYWF.js";import"./index-BN6OOifn.js";import"./index-B2wRUQhw.js";function E(o,m){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm3 10.5a.75.75 0 0 0 0-1.5H9a.75.75 0 0 0 0 1.5h6Z","clip-rule":"evenodd"})])}const Y={class:"flex items-center justify-between mb-4"},J={class:"space-x-4"},K={class:"mb-8 border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},P={class:"flex items-center gap-3 text-green-600"},Q={class:"text-xl font-semibold dark:text-white text-gray-900"},R={key:0,class:"text-center"},X={key:1,class:"flex flex-col"},tt={class:"mt-10 min-w-[100px] overflow-auto border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},et={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},st={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},rt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},at={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},dt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ot={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},lt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},nt={class:"px-4 py-2 text-sm"},it=["onClick"],xt={class:"border-t border-gray-300 dark:border-gray-600 pt-4 pb-4"},ut={class:"flex items-center gap-3 text-green-600"},yt={class:"text-xl font-semibold dark:text-white text-gray-900"},ct={key:0,class:"text-center"},gt={key:1,class:"flex flex-col"},mt={class:"mt-5 min-w-[100px] overflow-auto border-gray-300 dark:border-gray-600 pt-4 pb-4"},pt={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},ft={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},bt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},ht={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},kt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},vt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},_t={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},wt={class:"px-4 py-2 text-sm"},Ct=["onClick"],St={class:"flex items-center gap-3 mt-8 text-green-600"},Nt={key:0,class:"text-center"},At={key:1,class:"flex flex-col"},$t={class:"mt-8 min-w-[100px] overflow-auto border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},Vt={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},Bt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Mt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Gt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Et={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Ft={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},Dt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Tt={class:"px-4 py-2 text-sm"},Ht=["onClick"],jt={class:"flex items-center gap-3 mt-8 mb-6 text-green-600"},qt={key:2,class:"text-center"},It={key:3,class:"flex flex-col"},Lt={class:"mt-8 min-w-[100px] overflow-auto border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},Ot={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},Ut={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Wt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Zt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},zt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Yt={class:"px-4 py-2 text-sm font-bold text-gray-600 dark:text-gray-300"},Jt={class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-300"},Kt={class:"px-8 py-6"},Pt={class:"text-lg text-center font-light mb-4"},Qt={class:"font-bold"},Rt={class:"font-bold underline"},Xt={class:"text-red-400"},te={class:"text-red-400"},ee={class:"text-sm"},se={class:"flex justify-end"},re=["disabled"],ve={__name:"ShowCourses",props:{student:{type:Object,required:!0},courses:{type:Array,required:!0},studyModes:{type:Array,required:!1,default:()=>[]},activeSemester:{type:Object,required:!0}},setup(o){const m=o,F=k(()=>m.student.enrollments.filter(a=>a.status=="enrolled"||a.status=="completed").map(a=>a.course.id)),D=k(()=>m.courses.filter(a=>!F.value.includes(a.id))),b=N(!1);N(!1);const u=B({course_id:"",section_id:""});B({});const T=k(()=>new Set(m.student.enrollments.filter(a=>a.status=="enrolled").map(a=>a.course.id)));k(()=>m.courses.filter(a=>!T.value.has(a.id)).map(a=>({...a,label:a.name})));const S=N(m.studyModes[0].id||null),$=k(()=>{var s;const a=m.studyModes.find(e=>e.id===S.value);return((s=a==null?void 0:a.sections)==null?void 0:s.filter(e=>(Array.isArray(e.courses)?e.courses:[]).map(y=>y.id).includes(u.course_id)))||[]}),H=()=>{u.reset(),u.clearErrors()},j=()=>{u.post(route("enrollments-student.add",{student:m.student.id}),{onSuccess:()=>{A.fire("Added!","Course added successfully.","success"),b.value=!1,H()}})},q=a=>{u.course_id=a.course.id,b.value=!0},V=a=>{A.fire({title:"Are you sure?",text:"This action will drop the course from the student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, drop it!"}).then(s=>{s.isConfirmed&&I.post(route("enrollments-student.drop",{student:m.student.id}),{enrollment_id:a},{onSuccess:()=>{A.fire("Dropped!","Course dropped successfully.","success")}})})};return(a,s)=>(i(),n("div",null,[t("div",Y,[s[7]||(s[7]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Courses ",-1)),t("div",J,[t("button",{onClick:s[0]||(s[0]=e=>b.value=!0),class:"flex items-center text-green-600 hover:text-green-800"},[x(l(G),{class:"w-6 h-6 mr-1"}),s[6]||(s[6]=g(" Add Course "))])])]),t("div",K,[t("div",P,[x(l(U),{class:"w-6 h-6"}),t("h2",Q," Pending Courses For "+r(o.activeSemester.year.name)+" Semester "+r(o.activeSemester.level),1)]),o.student.enrollments.filter(e=>e.status=="pending").length==0?(i(),n("div",R,s[8]||(s[8]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No Pending Courses For This Semester. ",-1)]))):o.student.enrollments.filter(e=>e.status=="pending").length>0?(i(),n("div",X,[t("div",tt,[t("table",et,[s[10]||(s[10]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(_,null,w(o.student.enrollments.filter(e=>e.status=="pending"),(e,d)=>{var y,c;return i(),n("tr",{key:e.id,class:f(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",st,r(d+1),1),t("td",rt,[x(l(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[g(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",at,r(e.course.code),1),t("td",dt,r(e.course.credit_hours),1),t("td",ot,r(((c=(y=o.student.grades)==null?void 0:y.find(p=>p.course_id===e.course.id))==null?void 0:c.grade_letter)??"Not Graded"),1),t("td",lt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",nt,[t("button",{onClick:p=>V(e.id),class:"flex items-center text-red-600 hover:text-red-800"},[x(l(E),{class:"w-4 h-4 mr-1"}),s[9]||(s[9]=g(" Drop "))],8,it)])],2)}),128))])])])])):v("",!0)]),t("div",xt,[t("div",ut,[x(l(W),{class:"w-6"}),t("h2",yt," Enrolled Courses For "+r(o.activeSemester.year.name)+" Semester "+r(o.activeSemester.level),1)]),o.student.enrollments.filter(e=>e.status=="enrolled").length==0?(i(),n("div",ct,s[11]||(s[11]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No Enrolled Courses For This Semester. ",-1)]))):o.student.enrollments.filter(e=>e.status=="enrolled").length>0?(i(),n("div",gt,[t("div",mt,[t("table",pt,[s[13]||(s[13]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(_,null,w(o.student.enrollments.filter(e=>e.status=="enrolled"),(e,d)=>{var y,c;return i(),n("tr",{key:e.id,class:f(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",ft,r(d+1),1),t("td",bt,[x(l(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[g(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",ht,r(e.course.code),1),t("td",kt,r(e.course.credit_hours),1),t("td",vt,r(((c=(y=o.student.grades)==null?void 0:y.find(p=>p.course_id===e.course.id))==null?void 0:c.grade_letter)??"Not Graded"),1),t("td",_t,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",wt,[t("button",{onClick:p=>V(e.id),class:"flex items-center text-red-600 hover:text-red-800"},[x(l(E),{class:"w-4 h-4 mr-1"}),s[12]||(s[12]=g(" Drop "))],8,Ct)])],2)}),128))])])])])):v("",!0)]),t("div",St,[x(l(Z),{class:"w-6 h-6"}),s[14]||(s[14]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Dropped Courses ",-1))]),o.student.enrollments.filter(e=>e.status=="dropped").length==0?(i(),n("div",Nt,s[15]||(s[15]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"No Dropped Courses.",-1)]))):o.student.enrollments.filter(e=>e.status=="dropped")?(i(),n("div",At,[t("div",$t,[t("table",Vt,[s[17]||(s[17]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Action ")])],-1)),t("tbody",null,[(i(!0),n(_,null,w(o.student.enrollments.filter(e=>e.status=="dropped"),(e,d)=>{var y,c;return i(),n("tr",{key:e.id,class:f(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",Bt,r(d+1),1),t("td",Mt,[x(l(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[g(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",Gt,r(e.course.code),1),t("td",Et,r(e.course.credit_hours),1),t("td",Ft,r(((c=(y=o.student.grades)==null?void 0:y.find(p=>p.course_id===e.course.id))==null?void 0:c.grade_letter)??"Not Graded"),1),t("td",Dt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)]),t("td",Tt,[t("button",{onClick:p=>q(e),class:"flex items-center text-green-600 hover:text-green-700"},[x(l(G),{class:"w-4 h-4 mr-1"}),s[16]||(s[16]=g(" Add Back "))],8,Ht)])],2)}),128))])])])])):v("",!0),t("div",jt,[x(l(z),{class:"w-6 h-6"}),s[18]||(s[18]=t("h2",{class:"text-xl font-semibold dark:text-white text-gray-900"}," Completed Courses ",-1))]),o.student.enrollments.filter(e=>e.status=="completed").length==0?(i(),n("div",qt,s[19]||(s[19]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No completed Courses. ",-1)]))):o.student.enrollments.filter(e=>e.status=="completed")?(i(),n("div",It,[t("div",Lt,[t("table",Ot,[s[20]||(s[20]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," No. "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Name "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Course Code "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Credit Hours "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Grade "),t("th",{class:"px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200"}," Status ")])],-1)),t("tbody",null,[(i(!0),n(_,null,w(o.student.enrollments.filter(e=>e.status=="completed"),(e,d)=>{var y,c;return i(),n("tr",{key:e.id,class:f(d%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700")},[t("td",Ut,r(d+1),1),t("td",Wt,[x(l(C),{href:a.route("courses.show",{course:e.course.id})},{default:h(()=>[g(r(e.course.name),1)]),_:2},1032,["href"])]),t("td",Zt,r(e.course.code),1),t("td",zt,r(e.course.credit_hours),1),t("td",Yt,r(((c=(y=o.student.grades)==null?void 0:y.find(p=>p.course_id===e.course.id))==null?void 0:c.grade_letter)??"Not Graded"),1),t("td",Jt,[t("span",{class:f(e.status==="enrolled"?"text-green-500":"text-red-500")},r(e.status),3)])],2)}),128))])])])])):v("",!0),x(L,{show:b.value,onClose:s[5]||(s[5]=e=>b.value=!1),"max-width":"4xl"},{default:h(()=>{var e;return[t("div",Kt,[t("h3",Pt,[s[21]||(s[21]=g(" Enroll ")),t("span",Qt,r(o.student.firstName)+" "+r(o.student.lastName),1),s[22]||(s[22]=g(" to ")),t("span",Rt,r(l(u).course_id?(e=o.courses.find(d=>d.id==l(u).course_id))==null?void 0:e.name:"New Course"),1)]),t("p",Xt,r(l(u).errors.section_id),1),t("p",te,r(l(u).errors.course_id),1),s[23]||(s[23]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Course ",-1)),s[24]||(s[24]=t("p",{class:"text-sm text-gray-500 mb-2"}," Choose a course the student hasnâ€™t taken yet. ",-1)),x(l(O),{modelValue:l(u).course_id,"onUpdate:modelValue":s[1]||(s[1]=d=>l(u).course_id=d),options:D.value,checkmark:"",optionLabel:"name","option-value":"id",filter:"",placeholder:"Select Course",class:"w-full mb-4"},null,8,["modelValue","options"]),s[25]||(s[25]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Study Mode ",-1)),s[26]||(s[26]=t("p",{class:"text-sm text-gray-500 mb-2"}," Select how the course will be attended (e.g. regular, weekend). ",-1)),x(l(M),{modelValue:S.value,"onUpdate:modelValue":s[2]||(s[2]=d=>S.value=d),options:m.studyModes,placeholder:"Select Study Mode","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options"]),s[27]||(s[27]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"}," Section ",-1)),s[28]||(s[28]=t("p",{class:"text-sm text-gray-500 mb-2"}," Pick the section where the student will take the given course in the given study mode. ",-1)),x(l(M),{modelValue:l(u).section_id,"onUpdate:modelValue":s[3]||(s[3]=d=>l(u).section_id=d),options:$.value,placeholder:`This course is available in (${$.value.length})`,"empty-message":"no available section!","option-label":"name","append-to":"self","option-value":"id",class:"w-full mb-4 px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},{option:h(d=>[g(r(d.option.name)+" In "+r(d.option.studyMode.name)+" ",1),t("span",ee," ("+r(d.option.program.name)+" in "+r(d.option.track.name)+") ",1)]),_:1},8,["modelValue","options","placeholder"]),t("div",se,[t("button",{onClick:j,disabled:l(u).processing,class:"bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded mr-3"},r(l(u).processing?"Adding...":"Add"),9,re),t("button",{onClick:s[4]||(s[4]=d=>b.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded"}," Cancel ")])])]}),_:1},8,["show"])]))}};export{ve as default};
