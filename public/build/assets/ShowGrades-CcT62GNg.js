import{r as k,h as G,x as F,c as n,o as i,a as t,t as o,F as m,d as b,n as f}from"./app-79y1XoOY.js";import{S as x}from"./sweetalert2.esm.all-89IKscqO.js";const v={class:"overflow-x-auto px-4 py-6"},N={key:0},A={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900"},B={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold"},q={class:"px-4 py-2"},C={class:"px-4 py-2"},O={class:"px-4 py-2"},P={class:"px-4 py-2 font-semibold"},j={class:"px-4 py-2"},D={key:1},E={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900"},T={class:"bg-gray-100 dark:bg-gray-800 text-sm font-semibold"},L={class:"px-4 py-2"},z={class:"px-4 py-2"},U={class:"px-4 py-2"},V={class:"px-4 py-2 font-semibold"},W={class:"px-4 py-2"},J={__name:"ShowGrades",props:{section:{type:Object,required:!0},course:{type:Object,required:!0},semester:{type:Object,required:!0},weights:{type:Array,required:!0},instructor:{type:Object,required:!0}},setup(h){const d=h,w=k({id:1}),u=G(()=>d.weights.reduce((s,e)=>s+(parseFloat(e.point)||0),0)),c=F({grades:[]}),g=s=>{let e=0;return d.weights.forEach(r=>{const a=r.results.find(l=>l.student_id===s);e+=parseFloat((a==null?void 0:a.point)||0)}),e.toFixed(2)},p=s=>(s=parseFloat(s),isNaN(s)?"N/A":s>=94?"A":s>=90?"A-":s>=87?"B+":s>=84?"B":s>=80?"B-":s>=77?"C+":s>=74?"C":s>=70?"C-":s>=67?"D+":s>=64?"D":s>=60?"D-":"F"),S=()=>{const s=d.section.students.map(e=>{const r=g(e.id);return{student_id:e.id,grade_point:r,grade_letter:p(r),grade_description:"",grade_scale:u.value.toString(),grade_complaint:!1,grade_comment:"",changed_grade:null,grade_status:"Pending",changed_by:null,user_id:w.value.id,year_id:d.semester.year_id,semester_id:d.semester.id,section_id:d.section.id,course_id:d.course.id}});c.grades=s,c.post(route("grades.store"),{onSuccess:()=>{x.fire("Success","Grades successfully submitted!","success"),c.reset()},onError:()=>{x.fire("Error","Failed to submit grades.","error")}})},_=s=>d.section.grades.find(e=>e.student_id===s);return(s,e)=>(i(),n("div",v,[!d.section.grades||d.section.grades.length===0?(i(),n("div",N,[e[3]||(e[3]=t("h2",{class:"text-xl font-bold mb-4"},"Grade Generation Form",-1)),t("table",A,[t("thead",B,[t("tr",null,[e[0]||(e[0]=t("th",{class:"px-4 py-2"},"#",-1)),e[1]||(e[1]=t("th",{class:"px-4 py-2 text-left"},"Student Name",-1)),t("th",q,"Total ("+o(u.value)+" pt)",1),e[2]||(e[2]=t("th",{class:"px-4 py-2"},"Grade",-1))])]),t("tbody",null,[(i(!0),n(m,null,b(d.section.students,(r,a)=>(i(),n("tr",{key:r.id,class:f([a%2===0?"bg-white":"bg-gray-50","text-sm border-b"])},[t("td",C,o(a+1),1),t("td",O,o(r.first_name)+" "+o(r.middle_name),1),t("td",P,o(g(r.id)),1),t("td",j,o(p(g(r.id))),1)],2))),128))]),t("tfoot",null,[t("tr",null,[t("td",{colspan:"100%",class:"text-center py-4 bg-gray-50 dark:bg-gray-800"},[t("button",{onClick:S,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded"}," Submit Grades ")])])])])])):(i(),n("div",D,[e[7]||(e[7]=t("h2",{class:"text-xl font-bold mb-4"},"Submitted Grades",-1)),t("table",E,[t("thead",T,[t("tr",null,[e[4]||(e[4]=t("th",{class:"px-4 py-2"},"#",-1)),e[5]||(e[5]=t("th",{class:"px-4 py-2 text-left"},"Student Name",-1)),t("th",L,"Total ("+o(u.value)+" pt)",1),e[6]||(e[6]=t("th",{class:"px-4 py-2"},"Grade",-1))])]),t("tbody",null,[(i(!0),n(m,null,b(d.section.students,(r,a)=>{var l,y;return i(),n("tr",{key:r.id,class:f([a%2===0?"bg-white":"bg-gray-50","text-sm border-b"])},[t("td",z,o(a+1),1),t("td",U,o(r.first_name)+" "+o(r.middle_name),1),t("td",V,o(((l=_(r.id))==null?void 0:l.grade_point)??"N/A"),1),t("td",W,o(((y=_(r.id))==null?void 0:y.grade_letter)??"N/A"),1)],2)}),128))])])]))]))}};export{J as default};
