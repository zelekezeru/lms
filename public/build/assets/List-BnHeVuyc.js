import{c as y,o as m,a as l,r as A,x as B,m as w,g as r,i as u,u as o,w as n,F as h,e as V,d as C,t as f,S as k,h as M,l as T,v as N,n as I}from"./app-0Lmbkjoj.js";import{a as L,T as j}from"./TableHeader-DFKCArYd.js";import{T as D}from"./TableZebraRows-Bw0zR451.js";import{_ as x}from"./Thead-HMOlyQzO.js";import{_ as H}from"./Modal-CEMlb_52.js";import{s as g}from"./index-B1KVgf5l.js";import{r as O}from"./EyeIcon-BcfK0ics.js";import{r as R}from"./PencilSquareIcon-B1rNWYtp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BDOyXzBQ.js";import"./index-DHqNzCog.js";import"./index-D6iXzyeS.js";import"./index-c4f5IeZw.js";import"./index-B3P1e8hK.js";import"./index-DaE3Rsqd.js";function P(d,p){return m(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M3.792 2.938A49.069 49.069 0 0 1 12 2.25c2.797 0 5.54.236 8.209.688a1.857 1.857 0 0 1 1.541 1.836v1.044a3 3 0 0 1-.879 2.121l-6.182 6.182a1.5 1.5 0 0 0-.439 1.061v2.927a3 3 0 0 1-1.658 2.684l-1.757.878A.75.75 0 0 1 9.75 21v-5.818a1.5 1.5 0 0 0-.44-1.06L3.13 7.938a3 3 0 0 1-.879-2.121V4.774c0-.897.64-1.683 1.542-1.836Z","clip-rule":"evenodd"})])}const Z={class:"overflow-x-auto shadow-md sm:rounded-lg mt-3"},z={class:"flex justify-between items-center my-4"},E={class:"px-6 py-4"},G={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Y={class:"px-6 py-4"},q={class:"px-6 py-4"},J={class:"px-6 py-4 flex space-x-6"},K={key:0},Q={key:1},W={class:"mt-3 flex justify-center space-x-6"},X={class:"p-6 space-y-6 bg-gradient-to-br from-white via-blue-50 to-blue-100 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 rounded-xl shadow-xl"},_={class:"text-2xl font-bold text-blue-700 dark:text-blue-300 flex items-center gap-2"},ee={class:"flex flex-wrap gap-4"},te={class:"flex items-center gap-2 text-gray-600 dark:text-gray-300"},le={class:"flex items-center gap-2 text-gray-600 dark:text-gray-300"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"flex justify-end space-x-3 pt-4"},ke={__name:"List",props:{students:Object,sortInfo:Object,deleteStudent:Function,search:String,programs:Array,years:Array},setup(d){const p=d,b=A(!1),i=new URLSearchParams(window.location.search),s=B({payment:i.has("payment")?i.get("payment"):null,statuses:[],year:i.has("year")?p.years.find(a=>a.id==i.get("year")):null,program:i.has("program")?p.programw.find(a=>a.id==i.get("program")):null,track:i.has("track")?p.tracks.find(a=>a.id==i.get("track")):null,study_mode:i.has("study_mode")?p.studyModes.find(a=>a.id==i.get("study_mode")):null,section:null}),S=w(()=>{const a=p.programs.find(e=>e.id==s.program);return a?a.tracks:[]}),U=w(()=>{const a=p.programs.find(e=>e.id==s.program);return a?a.studyModes:[]}),F=w(()=>{var v;const a=s.track,e=s.study_mode,t=(v=S.value)==null?void 0:v.find(c=>c.id==a);return t?e?t.sections.filter(c=>s.year?c.studyMode.id==e&&c.year.id==s.year:c.studyMode.id==e):t.sections:[]}),$=()=>{s.get(route("students.index"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>b.value=!1})};return(a,e)=>(m(),y(h,null,[l("div",Z,[l("div",z,[l("button",{onClick:e[0]||(e[0]=t=>b.value=!0),class:"flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition"},[r(o(P),{class:"w-5 h-5 mr-2"}),e[11]||(e[11]=u(" Filters "))])]),r(j,null,{default:n(()=>[r(L,null,{default:n(()=>[l("tr",null,[r(x,null,{default:n(()=>e[12]||(e[12]=[u("No.")])),_:1}),r(x,{sortable:!0,"sort-info":d.sortInfo,sortColumn:"first_name"},{default:n(()=>e[13]||(e[13]=[u("Student Name")])),_:1},8,["sort-info"]),r(x,{sortable:!0,"sort-info":d.sortInfo,sortColumn:"id_no"},{default:n(()=>e[14]||(e[14]=[u("ID Number")])),_:1},8,["sort-info"]),r(x,{sortable:!0,"sort-info":d.sortInfo,sortColumn:"mobile_phone"},{default:n(()=>e[15]||(e[15]=[u("Phone")])),_:1},8,["sort-info"]),r(x,null,{default:n(()=>e[16]||(e[16]=[u("Actions")])),_:1})])]),_:1}),l("tbody",null,[(m(!0),y(h,null,V(d.students.data,(t,v)=>(m(),C(D,{key:t.id},{default:n(()=>[l("td",E,f(v+1+(d.students.meta.current_page-1)*d.students.meta.per_page),1),l("th",G,[r(o(k),{href:a.route("students.show",{student:t.id})},{default:n(()=>[u(f(t.firstName)+" "+f(t.middleName)+" "+f(t.lastName),1)]),_:2},1032,["href"])]),l("td",Y,f(t.idNo),1),l("td",q,f(t.mobilePhone),1),l("td",J,[a.userCan("view-students")?(m(),y("div",K,[r(o(k),{href:a.route("students.show",{student:t.id}),class:"text-blue-500 hover:text-blue-700"},{default:n(()=>[r(o(O),{class:"w-5 h-5"})]),_:2},1032,["href"])])):M("",!0),a.userCan("update-students")?(m(),y("div",Q,[r(o(k),{href:a.route("students.edit",{student:t.id}),class:"text-green-500 hover:text-green-700"},{default:n(()=>[r(o(R),{class:"w-5 h-5"})]),_:2},1032,["href"])])):M("",!0)])]),_:2},1024))),128))])]),_:1})]),l("div",W,[(m(!0),y(h,null,V(d.students.meta.links,t=>(m(),C(o(k),{key:t.label,href:t.url?`${t.url}&search=${d.search}`:"#",class:I(["p-2 px-4 text-sm font-medium rounded-lg transition-colors",{"text-gray-700 dark:text-gray-400":!0,"cursor-not-allowed opacity-50":!t.url,"!bg-gray-100 !dark:bg-gray-800":t.active}]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),128))]),r(H,{show:b.value,onClose:e[10]||(e[10]=t=>b.value=!1)},{default:n(()=>[l("div",X,[l("h2",_,[r(o(P),{class:"w-6 h-6 text-blue-500 dark:text-blue-300"}),e[17]||(e[17]=u(" Filter Students "))]),l("div",null,[e[18]||(e[18]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"By Payment",-1)),r(o(g),{"append-to":"self",modelValue:o(s).payment,"onUpdate:modelValue":e[1]||(e[1]=t=>o(s).payment=t),options:[{label:"Uncompleted (Pending)",value:"pending"},{label:"All Completed(both Scholarship and self-sponsor)",value:"paid"},{label:"Only Scholarship Students",value:"is_scholarship"}],"option-label":"label","option-value":"value",placeholder:"Select payment type",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[21]||(e[21]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"By Status",-1)),l("div",ee,[l("label",te,[T(l("input",{type:"checkbox",value:"active","onUpdate:modelValue":e[2]||(e[2]=t=>o(s).statuses=t)},null,512),[[N,o(s).statuses]]),e[19]||(e[19]=u(" Active "))]),l("label",le,[T(l("input",{type:"checkbox",value:"graduated","onUpdate:modelValue":e[3]||(e[3]=t=>o(s).statuses=t)},null,512),[[N,o(s).statuses]]),e[20]||(e[20]=u(" Graduated "))])])]),l("div",oe,[l("div",null,[e[22]||(e[22]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Year",-1)),r(o(g),{"append-to":"self",modelValue:o(s).year,"onUpdate:modelValue":e[4]||(e[4]=t=>o(s).year=t),options:d.years,"option-label":"name","option-value":"id",placeholder:"Select year",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[e[23]||(e[23]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Program",-1)),r(o(g),{"append-to":"self",modelValue:o(s).program,"onUpdate:modelValue":e[5]||(e[5]=t=>o(s).program=t),options:d.programs,"option-label":"name","option-value":"id",placeholder:"Select program",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[e[24]||(e[24]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Track",-1)),r(o(g),{"append-to":"self",modelValue:o(s).track,"onUpdate:modelValue":e[6]||(e[6]=t=>o(s).track=t),options:S.value,"option-label":"name","option-value":"id",placeholder:"Select track",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[e[25]||(e[25]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"StudyMode",-1)),r(o(g),{"append-to":"self",modelValue:o(s).study_mode,"onUpdate:modelValue":e[7]||(e[7]=t=>o(s).study_mode=t),options:U.value,"option-label":"name","option-value":"id",placeholder:"Select Study Mode",class:"w-full"},null,8,["modelValue","options"])]),l("div",null,[e[26]||(e[26]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Section",-1)),r(o(g),{"append-to":"self",modelValue:o(s).section,"onUpdate:modelValue":e[8]||(e[8]=t=>o(s).section=t),options:F.value,"option-label":"name","option-value":"id",placeholder:"Select section",class:"w-full"},null,8,["modelValue","options"])])]),l("div",se,[l("button",{onClick:e[9]||(e[9]=t=>b.value=!1),class:"px-5 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition font-semibold"}," Cancel "),l("button",{onClick:$,class:"px-5 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-400 text-white font-semibold shadow hover:from-blue-700 hover:to-blue-500 transition"}," Apply Filters ")])])]),_:1},8,["show"])],64))}};export{ke as default};
