import{r as p,x as j,c as a,o as i,a as t,g,h as n,l as f,B as R,u as o,t as d,i as w,w as N,k as U,y as C,s as M}from"./app-Dpl0wRPt.js";import{S as x}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as E}from"./Modal-CNR65Uy-.js";import{r as _}from"./PencilIcon-DMGvODDl.js";import{r as F}from"./PlusCircleIcon-dJ50l1os.js";const T={class:"p-8 max-w-2xl mx-auto"},z={key:0},G={class:"flex flex-col items-center mb-8 relative"},H={key:0,class:"rounded-full w-44 h-44 bg-gray-300 dark:bg-gray-700 animate-pulse"},J=["src","alt"],K={class:"grid sm:grid-cols-2 gap-4"},Q={class:"text-lg font-medium"},W={class:"text-lg font-medium"},X={class:"text-lg font-medium"},Y={class:"text-lg font-medium"},Z={class:"flex justify-end mt-6 space-x-6"},ee={key:1,class:"text-center mt-10"},te={class:"p-6 space-y-4"},oe={key:0,class:"text-red-500 text-sm"},se={key:0,class:"text-red-500 text-sm"},re={key:0,class:"mt-2"},le=["src"],ae={key:1,class:"text-red-500 text-sm"},ie={key:0,class:"text-red-500 text-sm"},de={class:"flex justify-end space-x-2"},ne=["disabled"],ue={class:"p-6 space-y-4"},me={key:0,class:"text-red-500 text-sm"},ge={key:0,class:"text-red-500 text-sm"},ce={key:0,class:"mt-2"},fe=["src"],be={key:1,class:"text-red-500 text-sm"},pe={key:0,class:"text-red-500 text-sm"},xe={class:"flex justify-end space-x-2"},ye=["disabled"],ve={class:"p-6 space-y-6 bg-gradient-to-br from-white via-blue-50 to-blue-100 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 rounded-xl shadow-xl"},ke={class:"text-2xl font-bold text-blue-700 dark:text-blue-300 flex items-center gap-2"},he={class:"block"},we={key:0,class:"flex justify-center"},Ce=["src"],_e={key:1,class:"flex justify-center"},Se={class:"w-32 h-32 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-400 dark:text-gray-500 text-4xl"},Pe={class:"flex justify-end space-x-3 pt-4"},Ie=["disabled"],je={key:0,class:"animate-spin mr-2"},Ve={__name:"ShowCoordinators",props:{center:Object,coordinator:Object},setup(m){const c=m,y=p(!1),v=p(!1),b=p(null),r=j({name:"",phone:"",status:"Active",center_id:c.center.id}),s=j({name:"",phone:"",status:"Active",center_id:c.center.id}),V=()=>{b.value=null,r.reset(),r.center_id=c.center.id,y.value=!0},A=u=>{b.value=u.profile_img||null,s.reset(),s.name=u.name,s.phone=u.phone,s.status=u.status||"Active",s.profile_img="",s.center_id=u.center_id||c.center.id,v.value=!0},$=()=>{r.post(route("coordinators.store"),{onSuccess:()=>{x.fire("Success!","Coordinator created.","success"),y.value=!1,r.reset()},onError:()=>{x.fire("Error","Please check the form for errors.","error")}})},L=()=>{s.post(route("coordinators.update",{coordinator:c.coordinator.id}),{onSuccess:()=>{x.fire("Success!","Coordinator updated.","success"),v.value=!1,s.reset()},onError:()=>{x.fire("Error","Please check the form for errors.","error")}})},S=p(!1),B=()=>{console.log("hello"),S.value=!0},P=p(!1),k=p(null),h=j({user_id:c.coordinator.id,profile_image:null,get _preview(){return k.value||c.coordinator.profileImg}}),q=()=>{P.value=!0},I=()=>{P.value=!1,h.reset(),k.value=null},O=u=>{const e=u.target.files[0];e&&(h.profile_image=e,k.value=URL.createObjectURL(e))},D=()=>{h.post(route("users.update.image",{user:c.coordinator.id}),{onSuccess:()=>{x.fire("Success!","Profile image updated.","success"),I()},onError:()=>{x.fire("Error!","Failed to update image.","error")}})};return(u,e)=>(i(),a("div",T,[e[36]||(e[36]=t("h1",{class:"text-2xl font-bold mb-4 text-center"}," Coordinator Management ",-1)),m.coordinator?(i(),a("div",z,[t("div",G,[S.value?n("",!0):(i(),a("div",H)),f(t("img",{class:"rounded-full w-44 h-44 object-contain bg-gray-400",src:m.coordinator.profileImg,alt:"Logo of "+m.coordinator.name,onLoad:B},null,40,J),[[R,S.value]]),u.userCan&&u.userCan("update-coordinators")?(i(),a("button",{key:1,class:"mt-4 bg-white dark:bg-gray-800 rounded-full p-2 shadow hover:bg-gray-100 dark:hover:bg-gray-700 transition",title:"Change Profile Picture",onClick:q,type:"button"},[g(o(_),{class:"w-5 h-5 text-gray-600 dark:text-gray-300"})])):n("",!0)]),t("div",K,[t("div",null,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-500"},"Full Name",-1)),t("div",Q,d(m.coordinator.name),1)]),t("div",null,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-500"},"Email",-1)),t("div",W,d(m.coordinator.email),1)]),t("div",null,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-500"},"Phone",-1)),t("div",X,d(m.coordinator.phone||"N/A"),1)]),t("div",null,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500"},"Status",-1)),t("div",Y,d(m.coordinator.status),1)])]),t("div",Z,[t("button",{onClick:e[0]||(e[0]=l=>A(m.coordinator)),class:"text-blue-500 hover:text-blue-700 flex items-center gap-1"},[g(o(_),{class:"w-5 h-5"}),e[17]||(e[17]=w(" Edit "))])])])):(i(),a("div",ee,[g(o(F),{class:"w-16 h-16 text-green-400 mb-4 animate-bounce"}),e[19]||(e[19]=t("p",{class:"mb-2 font-semibold"},"No coordinator assigned",-1)),t("button",{onClick:V,class:"px-6 py-3 bg-green-600 text-white rounded-full flex items-center gap-2"},[g(o(F),{class:"w-5 h-5"}),e[18]||(e[18]=w(" Add Coordinator "))])])),g(E,{show:y.value,onClose:e[6]||(e[6]=l=>y.value=!1)},{default:N(()=>[t("div",te,[e[25]||(e[25]=t("h2",{class:"text-lg font-bold"},"New Coordinator",-1)),t("form",{onSubmit:U($,["prevent"]),class:"space-y-4"},[t("div",null,[e[20]||(e[20]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name ",-1)),f(t("input",{id:"name","onUpdate:modelValue":e[1]||(e[1]=l=>o(r).name=l),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Full Name"},null,512),[[C,o(r).name]]),o(r).errors.name?(i(),a("div",oe,d(o(r).errors.name),1)):n("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Phone ",-1)),f(t("input",{id:"phone","onUpdate:modelValue":e[2]||(e[2]=l=>o(r).phone=l),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Phone Number"},null,512),[[C,o(r).phone]]),o(r).errors.phone?(i(),a("div",se,d(o(r).errors.phone),1)):n("",!0)]),t("div",null,[e[22]||(e[22]=t("label",{for:"profile_img_create",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Profile Image ",-1)),t("input",{id:"profile_img_create",type:"file",accept:"image/*",class:"mt-1 block w-full text-gray-700 dark:text-gray-200",onChange:e[3]||(e[3]=l=>u.handleFileChange(l,o(r)))},null,32),b.value?(i(),a("div",re,[t("img",{src:b.value,class:"w-16 h-16 rounded-full object-cover"},null,8,le)])):n("",!0),o(r).errors.profile_img?(i(),a("div",ae,d(o(r).errors.profile_img),1)):n("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{for:"status_create",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Status ",-1)),f(t("select",{id:"status_create","onUpdate:modelValue":e[4]||(e[4]=l=>o(r).status=l),class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},e[23]||(e[23]=[t("option",{value:"Active"},"Active",-1),t("option",{value:"Inactive"},"Inactive",-1)]),512),[[M,o(r).status]]),o(r).errors.status?(i(),a("div",ie,d(o(r).errors.status),1)):n("",!0)]),t("div",de,[t("button",{type:"button",onClick:e[5]||(e[5]=l=>y.value=!1),class:"btn-secondary"}," Cancel "),t("button",{type:"submit",class:"btn-primary",disabled:o(r).processing},d(o(r).processing?"Saving...":"Save"),9,ne)])],32)])]),_:1},8,["show"]),g(E,{show:v.value,onClose:e[12]||(e[12]=l=>v.value=!1)},{default:N(()=>[t("div",ue,[e[31]||(e[31]=t("h2",{class:"text-lg font-bold"},"Edit Coordinator",-1)),t("form",{onSubmit:U(L,["prevent"]),class:"space-y-4"},[t("div",null,[e[26]||(e[26]=t("label",{for:"edit_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name ",-1)),f(t("input",{id:"edit_name","onUpdate:modelValue":e[7]||(e[7]=l=>o(s).name=l),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Full Name"},null,512),[[C,o(s).name]]),o(s).errors.name?(i(),a("div",me,d(o(s).errors.name),1)):n("",!0)]),t("div",null,[e[27]||(e[27]=t("label",{for:"edit_phone",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Phone ",-1)),f(t("input",{id:"edit_phone","onUpdate:modelValue":e[8]||(e[8]=l=>o(s).phone=l),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Phone Number"},null,512),[[C,o(s).phone]]),o(s).errors.phone?(i(),a("div",ge,d(o(s).errors.phone),1)):n("",!0)]),t("div",null,[e[28]||(e[28]=t("label",{for:"profile_img_edit",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Profile Image ",-1)),t("input",{id:"profile_img_edit",type:"file",accept:"image/*",class:"mt-1 block w-full text-gray-700 dark:text-gray-200",onChange:e[9]||(e[9]=l=>u.handleFileChange(l,o(s)))},null,32),b.value?(i(),a("div",ce,[t("img",{src:b.value,class:"w-16 h-16 rounded-full object-cover"},null,8,fe)])):n("",!0),o(s).errors.profile_img?(i(),a("div",be,d(o(s).errors.profile_img),1)):n("",!0)]),t("div",null,[e[30]||(e[30]=t("label",{for:"status_edit",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Status ",-1)),f(t("select",{id:"status_edit","onUpdate:modelValue":e[10]||(e[10]=l=>o(s).status=l),class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},e[29]||(e[29]=[t("option",{value:"Active"},"Active",-1),t("option",{value:"Inactive"},"Inactive",-1)]),512),[[M,o(s).status]]),o(s).errors.status?(i(),a("div",pe,d(o(s).errors.status),1)):n("",!0)]),t("div",xe,[t("button",{type:"button",onClick:e[11]||(e[11]=l=>v.value=!1),class:"btn-secondary"}," Cancel "),t("button",{type:"submit",class:"btn-primary",disabled:o(s).processing},d(o(s).processing?"Updating...":"Update"),9,ye)])],32)])]),_:1},8,["show"]),g(E,{show:P.value,onClose:I},{default:N(()=>[t("div",ve,[t("h2",ke,[g(o(_),{class:"w-6 h-6 text-blue-500 dark:text-blue-300"}),e[32]||(e[32]=w(" Update Profile Image "))]),t("label",he,[e[33]||(e[33]=t("span",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2"},"Choose a new profile picture",-1)),t("input",{type:"file",accept:"image/*",onChange:O,class:"block w-full text-sm text-gray-700 dark:text-gray-200 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-blue-200 dark:hover:file:bg-gray-600"},null,32)]),k.value?(i(),a("div",we,[t("img",{src:k.value,alt:"Selected Preview",class:"w-32 h-32 rounded-full object-cover border-4 border-blue-300 shadow-lg transition-all duration-300"},null,8,Ce)])):(i(),a("div",_e,[t("div",Se,[g(o(_),{class:"w-12 h-12"})])])),t("div",Pe,[t("button",{onClick:I,class:"px-5 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition font-semibold"}," Cancel "),t("button",{onClick:D,disabled:o(h).processing,class:"px-5 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-400 text-white font-semibold shadow hover:from-blue-700 hover:to-blue-500 transition disabled:opacity-60 disabled:cursor-not-allowed"},[o(h).processing?(i(),a("span",je,e[34]||(e[34]=[t("svg",{class:"w-5 h-5 inline",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)]))):n("",!0),e[35]||(e[35]=w(" Save "))],8,Ie)])])]),_:1},8,["show"])]))}};export{Ve as default};
