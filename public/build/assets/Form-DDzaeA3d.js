import{r as h,q as S,c as i,o as n,a,g as s,u,F as D,e as U,t as x,k as $}from"./app-2tfRiCxz.js";import{_ as g}from"./InputError-C_nx3bSo.js";import{_ as y}from"./InputLabel-DyIGbIhI.js";import{_ as V}from"./TextInput-DYYDMKEM.js";import"./sweetalert2.esm.all-89IKscqO.js";import{s as z}from"./index-Ch29TnLd.js";import{s as b}from"./index-CD_K2U2U.js";import{s as F}from"./index-pyMKxjHz.js";import"./index-dAxwNK-8.js";import"./index-CAvIJ2M0.js";import"./index-DVgjx7yL.js";import"./index-DqWD3Gz6.js";import"./index-DF4HFo_2.js";import"./index-B20VgfrV.js";import"./index-BeYBTb88.js";import"./index-D303QjTI.js";const M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N={class:"border-t pt-6 dark:border-gray-700"},O={class:"space-y-10"},T={key:0,class:"text-gray-500 italic dark:text-gray-400"},j={key:1,class:"space-y-6"},E={class:"text-base font-semibold mb-4 text-gray-800 dark:text-gray-100"},L={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},q={class:"mt-6 flex justify-center"},B=["disabled"],I={key:0},A={key:1},ae={__name:"Form",props:{form:Object,years:Array,studyModes:Array,semester:Object},emits:["submit"],setup(e,{emit:p}){const o=e,f=h(o.semester?o.semester.studyModes.map(m=>m.id):[]),c=m=>{const t=m.getTimezoneOffset()*6e4;return new Date(m.valueOf()-t).toISOString().slice(0,-1)};S(f,m=>{o.form.study_modes=m.reduce((t,r)=>(t[r]={start_date:o.form.study_modes[r]?o.form.study_modes[r].start_date:o.semester&&o.semester.studyModes.find(l=>l.id==r)?o.semester.studyModes.find(l=>l.id==r).semester_start_date:o.form.start_date,end_date:o.form.study_modes[r]?o.form.study_modes[r].end_date:o.semester&&o.semester.studyModes.find(l=>l.id==r)?o.semester.studyModes.find(l=>l.id==r).semester_end_date:o.form.end_date},t),{})},{immediate:!0});const w=p;return(m,t)=>{var r,l,k;return n(),i("form",{onSubmit:t[6]||(t[6]=$(d=>w("submit"),["prevent"]))},[a("div",M,[a("div",null,[s(y,{for:"name",value:"Name",class:"block mb-1 text-gray-800 dark:text-gray-200"}),s(V,{id:"name",type:"text",modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=d=>e.form.name=d),required:"",autofocus:"",placeholder:"Name",autocomplete:"name",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue"]),s(g,{message:e.form.errors.name,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),a("div",null,[s(y,{for:"level",value:"Level",class:"block mb-1 text-gray-800 dark:text-gray-200"}),s(V,{id:"level",type:"number",modelValue:e.form.level,"onUpdate:modelValue":t[1]||(t[1]=d=>e.form.level=d),required:"",placeholder:"Level",autofocus:"",autocomplete:"level",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue"]),s(g,{message:e.form.errors.level,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),a("div",null,[s(y,{for:"year_id",value:"Select Year"}),s(u(z),{id:"year_id",modelValue:e.form.year_id,"onUpdate:modelValue":t[2]||(t[2]=d=>e.form.year_id=d),options:e.years,placeholder:"Select Year","option-value":"id","option-label":"name",class:"w-full px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options"]),s(g,{message:(r=e.form.errors)==null?void 0:r.year_id,class:"mt-2"},null,8,["message"])]),a("div",null,[s(y,{for:"start_date",value:"Start Date"}),s(u(b),{dateFormat:"dd-mm-yy",showIcon:"",modelValue:e.form.start_date?new Date(e.form.start_date):"","onUpdate:modelValue":t[3]||(t[3]=d=>{e.form.start_date=c(d)}),placeholder:"Select Start Date"},null,8,["modelValue"]),s(g,{message:(l=e.form.errors)==null?void 0:l.start_date,class:"mt-2"},null,8,["message"])]),a("div",null,[s(y,{for:"end_date",value:"End Date"}),s(u(b),{modelValue:e.form.end_date?new Date(e.form.end_date):"","onUpdate:modelValue":t[4]||(t[4]=d=>{e.form.end_date=c(d)}),dateFormat:"dd-mm-yy",showIcon:"",placeholder:"Select End Date"},null,8,["modelValue"]),s(g,{message:(k=e.form.errors)==null?void 0:k.end_date,class:"mt-2"},null,8,["message"])])]),a("div",N,[a("div",O,[a("div",null,[t[7]||(t[7]=a("h2",{class:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100"}," This semester is applied in... ",-1)),s(u(F),{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=d=>f.value=d),options:e.studyModes,checkmark:"",optionLabel:"name","option-value":"id",filter:"",multiple:"",placeholder:"Select study modes",class:"w-full"},null,8,["modelValue","options"])]),a("div",null,[t[10]||(t[10]=a("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100"}," Pick duration in each study mode ",-1)),f.value.length===0?(n(),i("div",T," No study mode selected ")):(n(),i("div",j,[(n(!0),i(D,null,U(e.studyModes.filter(d=>f.value.includes(d.id)),d=>(n(),i("div",{key:d.id,class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700"},[a("h3",E,x(d.name),1),a("div",L,[a("div",null,[t[8]||(t[8]=a("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"}," Start Date ",-1)),s(u(b),{"date-format":"dd-mm-yy","show-icon":"",class:"w-full",modelValue:e.form.study_modes[d.id].start_date,"onUpdate:modelValue":v=>{e.form.study_modes[d.id].start_date=c(v)}},null,8,["modelValue","onUpdate:modelValue"])]),a("div",null,[t[9]||(t[9]=a("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"}," End Date ",-1)),s(u(b),{"date-format":"dd-mm-yy","show-icon":"",class:"w-full",modelValue:e.form.study_modes[d.id].end_date,"onUpdate:modelValue":v=>{e.form.study_modes[d.id].end_date=c(v)}},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]))])])]),a("div",q,[a("button",{type:"submit",disabled:e.form.processing,class:"inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[e.form.processing?(n(),i("span",A,x(m.$t("common.loading","Submitting...")),1)):(n(),i("span",I,x(m.$t("common.save","Submit")),1))],8,B)])],32)}}};export{ae as default};
