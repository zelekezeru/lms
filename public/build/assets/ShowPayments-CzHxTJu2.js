import{b as W,r as h,x as F,d as z,q as S,c as y,o as m,a as t,h as d,k as P,u as r,F as V,f as U,t as o,w as c,l as I,m as k,y as _,T as M,i as D,n as L,S as Y}from"./app-CzIJxpLV.js";import{S as E}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */import{_ as j}from"./Modal-a5lB9UbA.js";import{_ as x}from"./InputError-CT3ZsfGD.js";import{r as G}from"./PlusCircleIcon-BjLcrZK5.js";import{s as H}from"./index--bU0FzAL.js";import{s as C}from"./index-B9PKhMfA.js";import"./index-BB2yY7gZ.js";import"./index-B52ZsOST.js";import"./index-BE91hO-n.js";import"./index-CucGX3wH.js";import"./index-BtcsP75t.js";import"./index-Dma-8vCA.js";const J={class:""},K={class:"flex items-center justify-between mb-4"},Q={class:"overflow-x-auto"},X={class:"mt-8 border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},Z={key:0,class:"text-center"},tt={key:1,class:"flex flex-col"},et={class:"mt-8 border-t border-b border-gray-300 dark:border-gray-600 pt-4 pb-4"},st={class:"min-w-full table-auto border border-gray-300 dark:border-gray-600"},at={class:"w-10 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},rt={class:"w-60 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},ot={class:"w-40 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},dt={class:"w-40 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},lt={class:"w-40 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},nt={class:"w-40 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},it={class:"w-20 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},yt={class:"w-20 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},mt={class:"w-40 px-4 py-2 text-sm text-gray-600 dark:text-gray-300 border-r border-gray-300 dark:border-gray-600"},ut={key:2,class:"flex flex-col"},xt={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},gt={class:"w-full px-16 py-8"},pt={class:"flex justify-end mt-4"},ct=["disabled"],bt={class:"w-full px-8 py-6"},ft={class:"text-xl font-semibold mb-4 text-gray-900 dark:text-gray-100"},kt={class:"text-yellow-700 underline"},_t={class:"text-red-700 text-lg"},wt={class:"mb-4"},vt={class:"flex flex-wrap -mx-2"},ht={class:"w-full md:w-1/2 px-2 mb-4"},St={class:"w-full md:w-1/2 px-2 mb-4"},Pt={key:0,class:"mb-6"},Vt={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},Ct={class:"overflow-x-auto"},Tt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},At={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},Nt={class:"px-6 py-2 text-sm text-gray-800 dark:text-gray-200"},Ft={class:"px-6 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},Ut={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},Mt={class:"bg-yellow-50 dark:bg-yellow-900 font-bold"},Dt={class:"px-6 py-2 text-yellow-800 dark:text-yellow-200 text-lg"},Lt={key:1,class:"mb-6"},Et={class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3"},jt={class:"overflow-x-auto"},Ot={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},$t={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},qt={class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition"},Bt={class:"px-6 py-2 text-sm font-medium text-gray-900 dark:text-gray-100"},Rt={class:"px-6 py-2 text-sm text-yellow-700 dark:text-yellow-400"},Wt={class:"bg-yellow-50 dark:bg-yellow-900 font-bold"},zt={class:"px-6 py-2 text-yellow-800 dark:text-yellow-200 text-lg"},It={class:"flex flex-wrap -mx-2"},Yt={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Gt={key:0,class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Ht={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Jt={class:"w-full md:w-1/2 lg:w-1/4 px-2 mb-4"},Kt={class:"flex justify-end mt-4"},Qt=["disabled"],ue={__name:"ShowPayments",props:{student:{type:Object,required:!0},payments:{type:Array,required:!0},activeSemester:{type:Object,required:!0},paymentMethods:Array,paymentTypes:Array},setup(l){const g=l,O=W().props.errors,b=h(!1),p=h(!1),u=F({payments:[],student_id:g.student.id}),a=F({student_id:g.student.id,payment_method_id:null,payment_type_id:null,payment_date:new Date().toISOString().slice(0,10),paid_amount:null,total_amount:null,description:null,status:null,reference_number:null}),w=g.student.enrollments.filter(i=>i.status=="pending"),$=()=>{b.value=!1,u.reset()},q=()=>{u.post(route("payments",g.student.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1,u.reset()}})},v=h(!1),T=()=>{p.value=!1,a.reset()},n=z(()=>g.paymentTypes.find(i=>i.id==a.payment_type_id&&i.study_mode_id==g.student.studyMode.id));S(()=>a.paid_amount,i=>{i==a.total_amount?a.status="completed":a.status="pending"}),S(()=>a.status,i=>{i=="completed"?a.paid_amount=a.total_amount:a.paid_amount=0}),S(()=>a.payment_type_id,()=>{console.log(n.value),n.value&&n.value.duration=="per-course"?(v.value=!0,a.total_amount=n.value.amount*w.length):(v.value=!1,n.value&&(a.total_amount=n.value.amount))});const B=[{label:"pending",value:"pending"},{label:"completed",value:"completed"},{label:"canceled",value:"failed"}],R=()=>{a.post(route("payments.store",{student:g.student.id}),{onSuccess:()=>{E.fire("Success!","Payment has been created successfully.","success"),p.value=!1,a.reset()},onError:i=>{p.value=!1,a.reset(),E.fire("Error!",i.error,"error")}})};return(i,e)=>{var A;return m(),y(V,null,[t("div",J,[t("div",K,[e[11]||(e[11]=t("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Payments ",-1)),t("button",{onClick:e[0]||(e[0]=s=>p.value=!p.value),class:"flex text-green-600 hover:text-green-800"},[d(r(G),{class:"mx-2 w-8 h-8"}),e[10]||(e[10]=P(" Create Payment "))])]),t("div",Q,[t("div",X,[l.payments?l.payments?(m(),y("div",tt,[t("div",et,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Enrolled Payments",-1)),t("table",st,[e[13]||(e[13]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-700"},[t("th",{class:"w-10 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," No. "),t("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Type "),t("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Method "),t("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Total Amount "),t("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Paid Amount "),t("th",{class:"w-60 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Semester "),t("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Date "),t("th",{class:"w-20 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Reference "),t("th",{class:"w-40 px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-200 border-r border-gray-300 dark:border-gray-600"}," Status ")])],-1)),t("tbody",null,[(m(!0),y(V,null,U(l.payments,(s,f)=>{var N;return m(),y("tr",{key:s.id,class:L([f%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","border-b border-gray-300 dark:border-gray-600"])},[t("td",at,o(f+1),1),t("td",rt,[d(r(Y),{href:i.route("payments.show",{payment:s.id})},{default:c(()=>[P(o(s.payment_type?s.payment_type.type:"N/A"),1)]),_:2},1032,["href"])]),t("td",ot,o(s.payment_method?s.payment_method.bank_name:"N/A"),1),t("td",dt,o(s==null?void 0:s.total_amount),1),t("td",lt,o(s==null?void 0:s.paid_amount),1),t("td",nt,o((N=s==null?void 0:s.semester)==null?void 0:N.name),1),t("td",it,o(s==null?void 0:s.payment_date),1),t("td",yt,o(s==null?void 0:s.reference_number),1),t("td",mt,[t("span",{class:L({"text-yellow-500":s.status==="pending","text-green-500":s.status==="completed","text-red-500":s.status==="failed","text-blue-500":s.status==="refunded"})},o(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)])],2)}),128))])])])])):(m(),y("div",ut,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"No Payments Enrolled",-1)),t("span",xt,o((A=l.student)==null?void 0:A.name)+" has not enrolled in any payments yet. ",1)])):(m(),y("div",Z,e[12]||(e[12]=[t("p",{class:"text-gray-500 dark:text-gray-400"}," No payment information available. ",-1)])))])])]),d(j,{show:b.value,onClose:e[2]||(e[2]=s=>b.value=!1),maxWidth:"6xl",class:"p-24 h-full"},{default:c(()=>[t("div",gt,[e[16]||(e[16]=t("h1",{class:"text-lg mb-5"}," Pick Payments You Would like To Assign To This Section ",-1)),d(r(H),{id:"cousesList",modelValue:r(u).payments,"onUpdate:modelValue":e[1]||(e[1]=s=>r(u).payments=s),options:l.payments,optionLabel:"name","option-value":"id",appendTo:"self",filter:"",checkmark:"",multiple:"","list-style":"max-height: 500px",placeholder:"Select Payments",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"]),d(x,{message:r(u).errors.payments,class:"mt-2 text-sm text-red-500"},null,8,["message"]),t("div",pt,[t("button",{onClick:q,disabled:r(u).processing,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},o(r(u).processing?"Assigning...":"Assign"),9,ct),t("button",{onClick:$,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])])]),_:1},8,["show"]),d(j,{show:p.value,onClose:T,maxWidth:"6xl",class:"p-6"},{default:c(()=>[t("div",bt,[t("h1",ft,[e[17]||(e[17]=P(" Create Payment for – ")),t("span",kt,o(l.student.first_name)+" "+o(l.student.middle_name),1)]),t("span",_t,o(r(O).error),1),t("form",{onSubmit:I(R,["prevent"])},[t("div",wt,[e[18]||(e[18]=t("label",{for:"narration",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Description ",-1)),k(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>r(a).description=s),placeholder:"Payment Description (eg Registration Fee, Tuition Fee...)",id:"narration",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[_,r(a).description]]),d(x,{message:r(a).errors.narration,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),t("div",vt,[t("div",ht,[e[19]||(e[19]=t("label",{for:"payment_method_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Method ",-1)),d(r(C),{modelValue:r(a).payment_method_id,"onUpdate:modelValue":e[4]||(e[4]=s=>r(a).payment_method_id=s),options:l.paymentMethods,optionLabel:"bank_name",optionValue:"id",appendTo:"self",placeholder:"Select Payment Method",class:"w-full"},null,8,["modelValue","options"]),d(x,{message:r(a).errors.payment_method_id,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),t("div",St,[e[20]||(e[20]=t("label",{for:"payment_type_id",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Type ",-1)),d(r(C),{modelValue:r(a).payment_type_id,"onUpdate:modelValue":e[5]||(e[5]=s=>r(a).payment_type_id=s),options:l.paymentTypes,optionLabel:"type",optionValue:"id",appendTo:"self",placeholder:"Select Type",class:"w-full"},null,8,["modelValue","options"]),d(x,{message:r(a).errors.payment_type_id,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),d(M,{"enter-active-class":"transition ease-out duration-500","enter-from-class":"opacity-0 -translate-y-6","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-6"},{default:c(()=>[v.value?(m(),y("div",Pt,[t("h2",Vt," Courses with Unpaid Fees – "+o(l.activeSemester.year.name)+" Semester "+o(l.activeSemester.level),1),t("div",Ct,[t("table",Tt,[e[22]||(e[22]=t("thead",{class:"bg-gray-100 dark:bg-gray-800"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," # "),t("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Course Name "),t("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Amount ")])],-1)),t("tbody",At,[(m(!0),y(V,null,U(r(w),(s,f)=>(m(),y("tr",{key:s.course.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition"},[t("td",Nt,o(f+1),1),t("td",Ft,o(s.course.name),1),t("td",Ut,o(n.value.amount),1)]))),128)),t("tr",Mt,[e[21]||(e[21]=t("td",{colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"}," Total ",-1)),t("td",Dt,o(n.value.amount*r(w).length),1)])])])])])):n.value&&n.value.duration!="per-course"?(m(),y("div",Lt,[t("h2",Et," Courses with Unpaid Fees – "+o(l.activeSemester.year.name)+" Semester "+o(l.activeSemester.level),1),t("div",jt,[t("table",Ot,[e[25]||(e[25]=t("thead",{class:"bg-gray-100 dark:bg-gray-800"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," # "),t("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Description "),t("th",{scope:"col",class:"px-6 py-1 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Fee Amount ")])],-1)),t("tbody",$t,[t("tr",qt,[e[23]||(e[23]=t("td",{class:"px-6 py-2 text-sm text-gray-800 dark:text-gray-200"}," 1 ",-1)),t("td",Bt,o(n.value.type),1),t("td",Rt,o(n.value.amount),1)]),t("tr",Wt,[e[24]||(e[24]=t("td",{colspan:"2",class:"px-6 py-2 text-gray-900 dark:text-gray-100"}," Total ",-1)),t("td",zt,o(n.value.amount),1)])])])])])):D("",!0)]),_:1}),t("div",It,[t("div",Yt,[e[26]||(e[26]=t("label",{for:"status",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Status ",-1)),d(r(C),{modelValue:r(a).status,"onUpdate:modelValue":e[6]||(e[6]=s=>r(a).status=s),options:B,optionLabel:"label",optionValue:"value",appendTo:"self",placeholder:"Select Status",class:"w-full"},null,8,["modelValue"]),d(x,{message:r(a).errors.status,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),d(M,{"enter-active-class":"transition ease-out duration-500","enter-from-class":"opacity-0 -translate-x-6","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition ease-in duration-300","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-6"},{default:c(()=>[r(a).status!=="completed"?(m(),y("div",Gt,[e[27]||(e[27]=t("label",{for:"paid_amount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Paid Amount ",-1)),k(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=s=>r(a).paid_amount=s),id:"paid_amount",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[_,r(a).paid_amount]]),d(x,{message:r(a).errors.paid_amount,class:"mt-2 text-sm text-red-500"},null,8,["message"])])):D("",!0)]),_:1}),t("div",Ht,[e[28]||(e[28]=t("label",{for:"payment_date",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Payment Date ",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=s=>r(a).payment_date=s),id:"payment_date",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[_,r(a).payment_date]]),d(x,{message:r(a).errors.payment_date,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),t("div",Jt,[e[29]||(e[29]=t("label",{for:"reference_number",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Reference Number (Optional) ",-1)),k(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=s=>r(a).reference_number=s),id:"reference_number",class:"shadow border rounded w-full py-2 px-3 text-gray-700 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 focus:outline-none focus:shadow-outline"},null,512),[[_,r(a).reference_number]]),d(x,{message:r(a).errors.reference_number,class:"mt-2 text-sm text-red-500"},null,8,["message"])])]),t("div",Kt,[t("button",{type:"submit",disabled:r(a).processing,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow-md transition mr-5"},o(r(a).processing?"Creating...":"Create Payment"),9,Qt),t("button",{type:"button",onClick:T,class:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg shadow-md transition"}," Close ")])],32)])]),_:1},8,["show"])],64)}}};export{ue as default};
