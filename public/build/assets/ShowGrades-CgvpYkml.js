import{m as f,r as b,x as G,c as o,o as i,a as t,F as c,e as p,t as a}from"./app-ls423X1b.js";import{S as h}from"./sweetalert2.esm.all-89IKscqO.js";/* empty css                        */const F={class:"overflow-x-auto px-4 py-6"},A={key:0},L={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900"},N={class:"bg-gray-100 dark:bg-gray-800 text-sm"},O={class:"px-4 py-2"},j={class:"px-4 py-2"},B={class:"px-4 py-2"},P={class:"px-4 py-2 font-semibold"},R={class:"px-4 py-2"},C={colspan:"100%",class:"text-center py-4"},D={key:1,class:"text-sm text-red-600"},E={key:1},T={class:"min-w-full border rounded shadow bg-white dark:bg-gray-900"},V={class:"px-4 py-2"},W={class:"px-4 py-2"},q={class:"px-4 py-2"},H={class:"px-4 py-2"},J={__name:"ShowGrades",props:{section:Object,course:Object,semester:Object,weights:Array,instructor:Object,studentsList:Object,studentResults:Object},setup(k){const d=k,y=f(()=>d.weights.reduce((s,r)=>s+(parseFloat(r.point)||0),0)),S=b({id:d.instructor.id}),_=G({grades:[]}),g=s=>{let r=0;return d.weights.forEach(e=>{const n=d.studentResults[s][e.id];n&&n.point&&(r+=parseFloat(n.point))}),r.toFixed(2)},m=s=>(s=parseFloat(s),isNaN(s)?"N/A":s>=94?"A":s>=90?"A-":s>=87?"B+":s>=84?"B":s>=80?"B-":s>=77?"C+":s>=74?"C":s>=70?"C-":s>=67?"D+":s>=64?"D":s>=60?"D-":"F"),v=()=>{const s=d.studentsList.map(r=>{const e=g(r.id);return{student_id:r.id,grade_point:e,grade_letter:m(e),grade_scale:y.value.toString(),grade_status:"Submitted",user_id:S.value.id,year_id:d.semester.year_id,semester_id:d.semester.id,section_id:d.section.id,course_id:d.course.id}});_.grades=s,_.post(route("grades.store"),{onSuccess:()=>{h.fire("Success","Grades successfully submitted!","success"),_.reset()},onError:()=>{h.fire("Error","Failed to submit grades.","error")}})},w=f(()=>d.studentsList.every(s=>d.weights.every(r=>{var e,n;return((e=d.studentResults[s.id][r.id])==null?void 0:e.point)!==null&&((n=d.studentResults[s.id][r.id])==null?void 0:n.point)!==void 0}))),x=s=>d.section.grades.find(r=>r.student_id===s);return b(null),(s,r)=>(i(),o("div",F,[!d.section.grades||d.section.grades.filter(e=>e.course_id===d.course.id).length===0?(i(),o("div",A,[r[3]||(r[3]=t("h2",{class:"text-xl font-bold mb-4"},"Grade Generation Form",-1)),t("table",L,[t("thead",N,[t("tr",null,[r[0]||(r[0]=t("th",{class:"px-4 py-2"},"#",-1)),r[1]||(r[1]=t("th",{class:"px-4 py-2 text-left"},"Student",-1)),(i(!0),o(c,null,p(d.weights,e=>(i(),o("th",{key:e.id,class:"px-4 py-2 text-center"},a(e.name)+" ("+a(e.point)+"pt) ",1))),128)),t("th",O,"Total ("+a(y.value)+"pt)",1),r[2]||(r[2]=t("th",{class:"px-4 py-2"},"Grade",-1))])]),t("tbody",null,[(i(!0),o(c,null,p(d.studentsList,(e,n)=>(i(),o("tr",{key:e.id,class:"text-sm"},[t("td",j,a(n+1),1),t("td",B,a(e.first_name)+" "+a(e.middle_name)+" "+a(e.last_name),1),(i(!0),o(c,null,p(d.weights,l=>{var u;return i(),o("td",{key:l.id,class:"px-4 py-2 text-center"},a(((u=d.studentResults[e.id][l.id])==null?void 0:u.point)??"N/A"),1)}),128)),t("td",P,a(g(e.id)),1),t("td",R,a(m(g(e.id))),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",C,[w.value?(i(),o("button",{key:0,onClick:v,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded"}," Submit Grades ")):(i(),o("p",D," Please enter all required weight values before submitting. "))])])])])])):(i(),o("div",E,[r[5]||(r[5]=t("h2",{class:"text-xl font-bold mb-4"},"Submitted Grades",-1)),t("table",T,[r[4]||(r[4]=t("thead",{class:"bg-gray-100 dark:bg-gray-800 text-sm"},[t("tr",null,[t("th",{class:"px-4 py-2"},"#"),t("th",{class:"px-4 py-2 text-left"},"Student"),t("th",{class:"px-4 py-2"},"Total"),t("th",{class:"px-4 py-2"},"Grade")])],-1)),t("tbody",null,[(i(!0),o(c,null,p(d.studentsList,(e,n)=>{var l,u;return i(),o("tr",{key:e.id,class:"text-sm"},[t("td",V,a(n+1),1),t("td",W,a(e.first_name)+" "+a(e.middle_name),1),t("td",q,a(((l=x(e.id))==null?void 0:l.grade_point)??"N/A"),1),t("td",H,a(((u=x(e.id))==null?void 0:u.grade_letter)??"N/A"),1)])}),128))])])]))]))}};export{J as default};
