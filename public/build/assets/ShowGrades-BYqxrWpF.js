import{r as S,d as f,x as v,c as i,o,a as s,t as d,k as u}from"./app-Cuthcimd.js";import{S as p}from"./sweetalert2.esm.all-89IKscqO.js";const A={class:"px-4 py-6"},G={key:0},k={class:"text-xl font-bold mb-4"},F={class:"bg-white dark:bg-gray-900 rounded shadow p-4"},O={class:"mt-4"},q={key:1,class:"text-sm text-red-600"},B={key:1},j={class:"text-xl font-bold mb-4"},N={class:"bg-white dark:bg-gray-900 rounded shadow p-4"},D={__name:"ShowGrades",props:{section:{type:Object,required:!0},course:{type:Object,required:!0},semester:{type:Object,required:!0},weights:{type:Array,required:!0},instructor:{type:Object,required:!0},student:{type:Object,required:!0}},setup(h){const e=h,y=S({id:1}),g=f(()=>Array.isArray(e.weights)?e.weights.reduce((t,r)=>t+(parseFloat(r.point)||0),0):0),a=v({grade:{student_id:e.student.id,grade_point:"",grade_letter:"",grade_description:"",grade_scale:g.value.toString(),grade_complaint:!1,grade_comment:"",changed_grade:null,grade_status:"Pending",changed_by:null,user_id:y.value.id,year_id:e.semester&&e.semester.year_id?e.semester.year_id:null,semester_id:e.semester&&e.semester.id?e.semester.id:null,section_id:e.section&&e.section.id?e.section.id:null,course_id:e.course&&e.course.id?e.course.id:null}}),l=()=>{let t=0;return Array.isArray(e.weights)&&e.weights.forEach(r=>{var m;const n=(m=r.results)==null?void 0:m.find(x=>x.student_id===e.student.id);t+=parseFloat((n==null?void 0:n.point)||0)}),t.toFixed(2)},_=t=>(t=parseFloat(t),isNaN(t)?"N/A":t>=94?"A":t>=90?"A-":t>=87?"B+":t>=84?"B":t>=80?"B-":t>=77?"C+":t>=74?"C":t>=70?"C-":t>=67?"D+":t>=64?"D":t>=60?"D-":"F"),b=()=>{const t=l();a.grade.grade_point=t,a.grade.grade_letter=_(t),a.post(route("grades.storeOne"),{onSuccess:()=>{p.fire("Success","Grade successfully submitted!","success"),a.reset()},onError:()=>{p.fire("Error","Failed to submit grade.","error")}})},w=f(()=>e.weights.every(t=>{var r;return(r=t.results)==null?void 0:r.some(n=>n.student_id===e.student.id&&n.point!==null&&n.point!==void 0)})),c=()=>e.section&&Array.isArray(e.section.grades)?e.section.grades.find(t=>t.student_id===e.student.id):void 0;return(t,r)=>(o(),i("div",A,[c()?(o(),i("div",B,[s("h2",j,"Submitted Grade for "+d(e.student.first_name)+" "+d(e.student.middle_name),1),s("div",N,[s("p",null,[r[1]||(r[1]=s("strong",null,"Total Score:",-1)),u(" "+d(c().grade_point),1)]),s("p",null,[r[2]||(r[2]=s("strong",null,"Grade:",-1)),u(" "+d(c().grade_letter),1)])])])):(o(),i("div",G,[s("h2",k,"Generate Grade for "+d(e.student.first_name)+" "+d(e.student.middle_name),1),s("div",F,[s("p",null,[s("strong",null,"Total Score ("+d(g.value)+" pt):",1),u(" "+d(l()),1)]),s("p",null,[r[0]||(r[0]=s("strong",null,"Grade:",-1)),u(" "+d(_(l())),1)]),s("div",O,[w.value?(o(),i("button",{key:0,onClick:b,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded"}," Submit Grade ")):(o(),i("p",q," Please complete all weight entries for this student. "))])])]))]))}};export{D as default};
