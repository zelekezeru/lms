import{r as h,q as S,c as i,o as n,a as d,g as a,u,F as D,e as U,t as x,k as $}from"./app-BYf-oIMO.js";import{_ as g}from"./InputError-0V2RFXaG.js";import{_ as y}from"./InputLabel-Dxfhy4KK.js";import{_ as p}from"./TextInput-B0F9EFh6.js";import"./sweetalert2.esm.all-89IKscqO.js";import{s as M}from"./index-DUjIzazG.js";import{s as b}from"./index-BtH_orF0.js";import{s as z}from"./index-ujSmCPTx.js";import"./index-CAYk_y6_.js";import"./index-DNjezwWl.js";import"./index-DFKOeGY7.js";import"./index-DgIVyqR2.js";import"./index-4wd7YkDB.js";import"./index-D5ViYauP.js";import"./index-C4Nqq9oS.js";import"./index-B2qF0VJ2.js";const F={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N={class:"border-t pt-6 dark:border-gray-700"},O={class:"space-y-10"},T={key:0,class:"text-gray-500 italic dark:text-gray-400"},_={key:1,class:"space-y-6"},j={class:"text-base font-semibold mb-4 text-gray-800 dark:text-gray-100"},E={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},L={class:"mt-6 flex justify-center"},q=["disabled"],B={key:0},I={key:1},de={__name:"Form",props:{form:Object,years:Array,studyModes:Array,semester:Object},emits:["submit"],setup(t,{emit:V}){const o=t,f=h(o.semester?o.semester.studyModes.map(m=>m.id):[]),c=m=>{const e=m.getTimezoneOffset()*6e4;return new Date(m.valueOf()-e).toISOString().slice(0,-1)};S(f,m=>{o.form.study_modes=m.reduce((e,r)=>(console.log(r),console.log(o.semester.studyModes.find(l=>l.id==r).semester_start_date,o.semester.studyModes.find(l=>l.id==r).semester_end_date),e[r]={start_date:o.form.study_modes[r]?o.form.study_modes[r].start_date:o.semester&&o.semester.studyModes.find(l=>l.id==r)?o.semester.studyModes.find(l=>l.id==r).semester_start_date:o.form.start_date,end_date:o.form.study_modes[r]?o.form.study_modes[r].end_date:o.semester&&o.semester.studyModes.find(l=>l.id==r)?o.semester.studyModes.find(l=>l.id==r).semester_end_date:o.form.end_date},e),{})},{immediate:!0});const w=V;return(m,e)=>{var r,l,k;return n(),i("form",{onSubmit:e[6]||(e[6]=$(s=>w("submit"),["prevent"]))},[d("div",F,[d("div",null,[a(y,{for:"name",value:"Name",class:"block mb-1 text-gray-800 dark:text-gray-200"}),a(p,{id:"name",type:"text",modelValue:t.form.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.form.name=s),required:"",autofocus:"",placeholder:"Name",autocomplete:"name",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue"]),a(g,{message:t.form.errors.name,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),d("div",null,[a(y,{for:"level",value:"Level",class:"block mb-1 text-gray-800 dark:text-gray-200"}),a(p,{id:"level",type:"number",modelValue:t.form.level,"onUpdate:modelValue":e[1]||(e[1]=s=>t.form.level=s),required:"",placeholder:"Level",autofocus:"",autocomplete:"level",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue"]),a(g,{message:t.form.errors.level,class:"mt-2 text-sm text-red-500"},null,8,["message"])]),d("div",null,[a(y,{for:"year_id",value:"Select Year"}),a(u(M),{id:"year_id",modelValue:t.form.year_id,"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.year_id=s),options:t.years,placeholder:"Select Year","option-value":"id","option-label":"name",class:"w-full px-3 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 transition"},null,8,["modelValue","options"]),a(g,{message:(r=t.form.errors)==null?void 0:r.year_id,class:"mt-2"},null,8,["message"])]),d("div",null,[a(y,{for:"start_date",value:"Start Date"}),a(u(b),{dateFormat:"dd-mm-yy",showIcon:"",modelValue:new Date(t.form.start_date),"onUpdate:modelValue":e[3]||(e[3]=s=>{t.form.start_date=c(s)}),placeholder:"Select Start Date"},null,8,["modelValue"]),a(g,{message:(l=t.form.errors)==null?void 0:l.start_date,class:"mt-2"},null,8,["message"])]),d("div",null,[a(y,{for:"end_date",value:"End Date"}),a(u(b),{modelValue:new Date(t.form.end_date),"onUpdate:modelValue":e[4]||(e[4]=s=>{t.form.end_date=c(s)}),dateFormat:"dd-mm-yy",showIcon:"",placeholder:"Select End Date"},null,8,["modelValue"]),a(g,{message:(k=t.form.errors)==null?void 0:k.end_date,class:"mt-2"},null,8,["message"])])]),d("div",N,[d("div",O,[d("div",null,[e[7]||(e[7]=d("h2",{class:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100"}," This semester is applied in... ",-1)),a(u(z),{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=s=>f.value=s),options:t.studyModes,checkmark:"",optionLabel:"name","option-value":"id",filter:"",multiple:"",placeholder:"Select study modes",class:"w-full"},null,8,["modelValue","options"])]),d("div",null,[e[10]||(e[10]=d("h2",{class:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100"}," Pick duration in each study mode ",-1)),f.value.length===0?(n(),i("div",T," No study mode selected ")):(n(),i("div",_,[(n(!0),i(D,null,U(t.studyModes.filter(s=>f.value.includes(s.id)),s=>(n(),i("div",{key:s.id,class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700"},[d("h3",j,x(s.name),1),d("div",E,[d("div",null,[e[8]||(e[8]=d("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"}," Start Date ",-1)),a(u(b),{"date-format":"dd-mm-yy","show-icon":"",class:"w-full",modelValue:new Date(t.form.study_modes[s.id].start_date),"onUpdate:modelValue":v=>{t.form.study_modes[s.id].start_date=c(v)}},null,8,["modelValue","onUpdate:modelValue"])]),d("div",null,[e[9]||(e[9]=d("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"}," End Date ",-1)),a(u(b),{"date-format":"dd-mm-yy","show-icon":"",class:"w-full",modelValue:new Date(t.form.study_modes[s.id].end_date),"onUpdate:modelValue":v=>{t.form.study_modes[s.id].end_date=c(v)}},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]))])])]),d("div",L,[d("button",{type:"submit",disabled:t.form.processing,class:"inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[t.form.processing?(n(),i("span",I,x(m.$t("common.loading","Submitting...")),1)):(n(),i("span",B,x(m.$t("common.save","Submit")),1))],8,q)])],32)}}};export{de as default};
